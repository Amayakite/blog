import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as t,o as l,c,a as n,b as s,d as e,e as p}from"./app-3ab2953d.js";const r="/images/Java/JavaSE/21-MySql/image-20211119220054247.png",i="/images/Java/JavaSE/21-MySql/image-20211119224623277.png",k="/images/Java/JavaSE/21-MySql/1704051-20200703164942350-177162620.png",u="/images/Java/JavaSE/21-MySql/image-20211119233159061.png",d="/images/Java/JavaSE/21-MySql/image-20211120135003148.png",m="/images/Java/JavaSE/21-MySql/image-20211120135054472.png",v="/images/Java/JavaSE/21-MySql/image-20211120135239889.png",b="/images/Java/JavaSE/21-MySql/MySql数据类型.svg",y="/images/Java/JavaSE/21-MySql/image-20211120185628320.png",g="/images/Java/JavaSE/21-MySql/image-20211120185641114.png",w="/images/Java/JavaSE/21-MySql/image-20211120192745001.png",h="/images/Java/JavaSE/21-MySql/image-20211120192825877.png",q="/images/Java/JavaSE/21-MySql/image-20211120205829953.png",f="/images/Java/JavaSE/21-MySql/image-20211120205914839.png",E="/images/Java/JavaSE/21-MySql/image-20211120190547035.png",L="/images/Java/JavaSE/21-MySql/image-20211120185726028.png",S="/images/Java/JavaSE/21-MySql/image-20211120185843253.png",A="/images/Java/JavaSE/21-MySql/image-20211121154510850.png",N="/images/Java/JavaSE/21-MySql/image-20211121154625191.png",_="/images/Java/JavaSE/21-MySql/image-20211121163030748.png",x="/images/Java/JavaSE/21-MySql/image-20211121165926182.png",R="/images/Java/JavaSE/21-MySql/image-20211121172736581.png",M="/images/Java/JavaSE/21-MySql/image-20211121172709333.png",T="/images/Java/JavaSE/21-MySql/image-20211121173857683.png",I="/images/Java/JavaSE/21-MySql/image-20211121173952348.png",C="/images/Java/JavaSE/21-MySql/image-20211121174113576.png",O="/images/Java/JavaSE/21-MySql/image-20211121205018177.png",U="/images/Java/JavaSE/21-MySql/image-20211121223552978.png",J="/images/Java/JavaSE/21-MySql/image-20211121223951951.png",D="/images/Java/JavaSE/21-MySql/image-20211121224339699.png",K="/images/Java/JavaSE/21-MySql/image-20211121230457415.png",B="/images/Java/JavaSE/21-MySql/image-20211122154537661.png",G="/images/Java/JavaSE/21-MySql/image-20211122154637130.png",j="/images/Java/JavaSE/21-MySql/image-20211122154827000.png",z="/images/Java/JavaSE/21-MySql/image-20211122163807238.png",H="/images/Java/JavaSE/21-MySql/image-20211122170615206.png",Y="/images/Java/JavaSE/21-MySql/image-20211122164902068.png",F="/images/Java/JavaSE/21-MySql/image-20211122164935895.png",V="/images/Java/JavaSE/21-MySql/image-20211122170505505.png",P="/images/Java/JavaSE/21-MySql/image-20211122171017894.png",W="/images/Java/JavaSE/21-MySql/image-20211122173148429.png",Q="/images/Java/JavaSE/21-MySql/image-20211122173232565.png",X="/images/Java/JavaSE/21-MySql/image-20211122204414063.png",$="/images/Java/JavaSE/21-MySql/image-20211122204942231.png",Z="/images/Java/JavaSE/21-MySql/image-20211122211047180.png",ss="/images/Java/JavaSE/21-MySql/image-20211122212123404.png",ns="/images/Java/JavaSE/21-MySql/image-20211122212421742.png",as="/images/Java/JavaSE/21-MySql/image-20211122220117209.png",es="/images/Java/JavaSE/21-MySql/image-20211122220509463.png",ps="/images/Java/JavaSE/21-MySql/image-20211122222616278.png",os="/images/Java/JavaSE/21-MySql/image-20211122225446144.png",ts="/images/Java/JavaSE/21-MySql/image-20211122224421237.png",ls="/images/Java/JavaSE/21-MySql/image-20211122223136404.png",cs="/images/Java/JavaSE/21-MySql/image-20211122224643847.png",rs="/images/Java/JavaSE/21-MySql/image-20211122230850135.png",is="/images/Java/JavaSE/21-MySql/image-20211122231201037.png",ks="/images/Java/JavaSE/21-MySql/image-20211123004055233.png",us="/images/Java/JavaSE/21-MySql/image-20211123121320164.png",ds="/images/Java/JavaSE/21-MySql/image-20211123121826094.png",ms="/images/Java/JavaSE/21-MySql/image-20211123122055639.png",vs="/images/Java/JavaSE/21-MySql/image-20211123122248185.png",bs="/images/Java/JavaSE/21-MySql/image-20211123132241153.png",ys="/images/Java/JavaSE/21-MySql/image-20211123132622996.png",gs="/images/Java/JavaSE/21-MySql/image-20211123133743001.png",ws="/images/Java/JavaSE/21-MySql/image-20211123135455381.png",hs="/images/Java/JavaSE/21-MySql/image-20211123140408719.png",qs="/images/Java/JavaSE/21-MySql/image-20211123140910846.png",fs="/images/Java/JavaSE/21-MySql/image-20211123143351050.png",Es="/images/Java/JavaSE/21-MySql/image-20211123144656109.png",Ls="/images/Java/JavaSE/21-MySql/image-20211123145819580.png",Ss="/images/Java/JavaSE/21-MySql/image-20211123152210307.png",As={},Ns=p('<h2 id="基本介绍" tabindex="-1"><a class="header-anchor" href="#基本介绍" aria-hidden="true">#</a> 基本介绍</h2><p>​ 数据库嘛，懂得都懂，在我学习Java之前，已经接触过Mysql了，并使用Nodejs、Koa、Vue3、ElementUI搭建了一个个人博客，使用的数据库就是Mysql，当然在学习Java之前Mysql为我存取了超多的图片：</p><figure><img src="'+r+'" alt="image-20211119220054247" tabindex="0" loading="lazy"><figcaption>image-20211119220054247</figcaption></figure><p>​ 这大概是爬取了三天的结果，共在数据库内简历了八千多条索引，也就是说我以后能够随意调用这些数据hhhh~</p><p>​ 总之，Mysql中最为核心的就是CRUP(增删改查)，其中最重要的就是查，实际项目中往往绝大部分项目都是存在sql数据库中，例如：网页的sabbar，网页的菜单，用户的信息，用户的发言，用户所拥有的东西等等</p><p>​ 这里开始，学的也只是基础，Mysql后面还得学些更深入的玩意...</p><p>​ 好了，言归正传，当你访问淘宝，京东，天猫，微信等相关软件或者网页时，是否发现每次退出，再次登陆时，你的订单，聊天等信息依旧还存在</p><p>​ 又或者说，你电脑上的原神卸载了，重装回来后，再次登陆账号后，你账号上的所有角色和物品依旧存在</p><p>​ 这之中就是Mysql的功劳----它存储了你的所有信息，当你访问到相关的网站、软件、服务时，对方的后台搜索到你的数据并返回给你</p><p>​ 可能这样说有点抽象，举一个生活化的案例说明---&gt; 如果说，图书馆是保存书籍的，那么数据库就是保存数据的</p><p>​ 可能你会这样想，我现在正在用着Excel来存储数据，再不济也可以用txt文件啊之类的文件来保存数据，为什么要用Mysql</p><p>​ 但是，假设现在有一千万条不重样的数据，我要你快速的读取或者写入或者在这些数据中查找某个符合条件的值，使用Excel.....一千万条数据可能连软件都打不开，使用普通的txt之类的文件，本人有幸试过（一个密码字典），可以说打开慢，查询慢，完全不符合我的使用需求</p><p>​ 但是使用数据库的话，这些烦恼就没有了，我可能快速的增删改查，不过目前我还不好说，等过完一遍后大概就能知道它有多顺手了</p><h2 id="mysql的安装" tabindex="-1"><a class="header-anchor" href="#mysql的安装" aria-hidden="true">#</a> Mysql的安装</h2><h3 id="windows" tabindex="-1"><a class="header-anchor" href="#windows" aria-hidden="true">#</a> Windows</h3>',15),_s={href:"https://www.bilibili.com/video/BV1fh411y7R8?p=732&t=1.5",target:"_blank",rel:"noopener noreferrer"},xs={href:"https://dev.mysql.com/downloads/mysql/",target:"_blank",rel:"noopener noreferrer"},Rs=p('<figure><img src="'+i+'" alt="image-20211119224623277" tabindex="0" loading="lazy"><figcaption>image-20211119224623277</figcaption></figure><p>小TIps：在配置<code>my.ini</code>的过程中，字符集<code>default-character-set</code>可以选择设置为<code>utf8mb4</code></p><p>为啥呢？比方说想在sql里存放🐂🐏子类的表情，utf-8是存放不进去的，因为这类表情占用四个字符...</p><h4 id="个人windows安装流程" tabindex="-1"><a class="header-anchor" href="#个人windows安装流程" aria-hidden="true">#</a> 个人Windows安装流程</h4>',4),Ms={href:"https://dev.mysql.com/downloads/mysql/",target:"_blank",rel:"noopener noreferrer"},Ts=p(`<li><p>到解压目录，创建配置文件my.ini</p><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysqld</span><span class="token punctuation">]</span></span> 
<span class="token comment"># 设置mysql的安装目录，也就是刚才我们解压的目录 这里要么用正斜杠/，要么用\\\\双反斜杠</span>
<span class="token key attr-name">basedir</span><span class="token punctuation">=</span><span class="token value attr-value">C:/mysql-8.0.13-winx64</span>
<span class="token comment"># 设置mysql数据库的数据的存放目录</span>
<span class="token key attr-name">datadir</span><span class="token punctuation">=</span><span class="token value attr-value">C:/mysql-8.0.13-winx64/data</span>
<span class="token comment"># 设置默认使用的端口</span>
<span class="token key attr-name">port</span><span class="token punctuation">=</span><span class="token value attr-value">3306</span>
<span class="token comment"># 允许最大连接数</span>
<span class="token key attr-name">max_connections</span><span class="token punctuation">=</span><span class="token value attr-value">200</span>
<span class="token comment"># 允许连接失败的次数。这是为了防止有人试图攻击数据库</span>
<span class="token key attr-name">max_connect_errors</span><span class="token punctuation">=</span><span class="token value attr-value">10</span>
<span class="token comment"># 服务端使用的字符集</span>
<span class="token key attr-name">character-set-server</span><span class="token punctuation">=</span><span class="token value attr-value">utf8mb4</span>
<span class="token comment"># 数据库字符集对应一些排序等规则使用的字符集</span>
<span class="token key attr-name">collation-server</span><span class="token punctuation">=</span><span class="token value attr-value">utf8mb4_general_ci</span>
<span class="token comment"># 创建新表时将使用的默认存储引擎</span>
<span class="token key attr-name">default-storage-engine</span><span class="token punctuation">=</span><span class="token value attr-value">INNODB</span>
<span class="token comment"># 默认使用“mysql_native_password”插件作为认证加密方式</span>
<span class="token comment"># MySQL8.0默认认证加密方式为caching_sha2_password</span>
<span class="token key attr-name">default_authentication_plugin</span><span class="token punctuation">=</span><span class="token value attr-value">mysql_native_password</span>
 
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysql</span><span class="token punctuation">]</span></span>
<span class="token comment"># 设置mysql客户端默认字符集</span>
<span class="token key attr-name">default-character-set</span><span class="token punctuation">=</span><span class="token value attr-value">utf8mb4</span>
 
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">client</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">default-character-set</span><span class="token punctuation">=</span><span class="token value attr-value">utf8mb4</span>
<span class="token key attr-name">port</span><span class="token punctuation">=</span><span class="token value attr-value">3306</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>进入到<code>bin</code>目录，以管理员方式打开<code>powerShell</code>或者<code>Cmd</code></p><ol><li><p>安装服务</p><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code><span class="token punctuation">.</span><span class="token operator">/</span>mysqld<span class="token punctuation">.</span>exe install 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>初始化：</p><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code><span class="token punctuation">.</span><span class="token operator">/</span>mysqld<span class="token punctuation">.</span>exe <span class="token operator">--</span>initialize <span class="token operator">--</span>console
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>等待初始化完毕后，会在最后打印出默认的root账户密码，把密码先记下来，格式大概是这样的：<br><code>root@localhost:dS8hTh)u?hAl</code>，其中<code>dS8hTh)u?hAl</code>就是初始密码</p></li><li><p>注意 这一步密码中可能会带有空格，别复制多了..</p></li></ol></li><li><p>接下来修改默认初始密码</p><ol><li><p>依旧是在<code>bin</code>目录中的powershell或者cmd</p><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code>mysql <span class="token operator">-</span>uroot <span class="token operator">-</span>p
<span class="token comment"># 然后会提示要求输入root的密码，输入上一步中获取到的即可</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>修改密码</p><ul><li><p>首先输入<code>use mysql;</code></p></li><li><p>然后看下有没有出现一条消息</p><ul><li><p>如果发现屏幕中有这样的消息：You must reset your password using ALTER USER statement before executing this statement.</p><ul><li><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">user</span> <span class="token string">&#39;root&#39;</span><span class="token variable">@&#39;localhost&#39;</span> identified <span class="token keyword">by</span> <span class="token string">&#39;要改成的密码&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li><li><p>如果没有：</p><ul><li><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">update</span> <span class="token keyword">user</span> <span class="token keyword">set</span> authentication_string<span class="token operator">=</span>password<span class="token punctuation">(</span><span class="token string">&#39;要改成的密码&#39;</span><span class="token punctuation">)</span> <span class="token keyword">where</span> <span class="token keyword">user</span> <span class="token operator">=</span><span class="token string">&#39;root&#39;</span> <span class="token operator">and</span> Host<span class="token operator">=</span><span class="token string">&#39;localhost&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li></ul></li><li><p>修改完毕后：</p><ul><li><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 刷新权限</span>
flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul></li></ol></li><li><p>添加系统变量</p><ol><li>复制<code>bin</code>目录路径打开环境变量配置，配置当前用户的Path，添加该路径，关闭所有的cmd再重新打开即可</li></ol></li>`,4),Is=p(`<p>相关关闭启动命令：</p><div class="language-powershell line-numbers-mode" data-ext="powershell"><pre class="language-powershell"><code><span class="token comment">#启动服务</span>
net <span class="token function">start</span> mysql
<span class="token comment">#关闭服务</span>
net stop mysql
<span class="token comment">#进入mysql</span>
mysql <span class="token operator">-</span>uroot <span class="token operator">-</span>p
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="卸载mysql" tabindex="-1"><a class="header-anchor" href="#卸载mysql" aria-hidden="true">#</a> 卸载mysql</h5>`,3),Cs={href:"https://www.cnblogs.com/zhaosq/p/10469848.html",target:"_blank",rel:"noopener noreferrer"},Os={href:"https://blog.csdn.net/weixin_29348211/article/details/113163856",target:"_blank",rel:"noopener noreferrer"},Us=p(`<p>两篇文章的操作都跟着做下，然后把path中的相关信息删除即可</p><h3 id="linux" tabindex="-1"><a class="header-anchor" href="#linux" aria-hidden="true">#</a> Linux</h3><p>因为我只用Ubuntu系统，所以只放出Ubuntu系统的安装方式，若要用其他系统自行百度</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#安装</span>
<span class="token function">sudo</span> <span class="token function">apt</span> update
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> mysql-server
<span class="token comment"># 初始化Mysql</span>
<span class="token function">sudo</span> mysql_secure_installation
<span class="token comment"># 这里会要求进行相关配置，第一个是密码，其他的自己看着整，建议是跟着翻译来进行操作</span>
<span class="token comment"># https://blog.csdn.net/weixx3/article/details/94133847/ 也可以参照这篇文章</span>

<span class="token comment">#检查Mysql运行状态</span>
systemctl status mysql.service

<span class="token comment">#如果不是运行状态的话（active不是running）：启动mysql</span>
<span class="token function">sudo</span> <span class="token function">service</span> mysql start 

<span class="token comment">#停止mysql</span>
<span class="token function">sudo</span> <span class="token function">service</span> mysql stop

<span class="token comment">#重启mysql</span>
<span class="token function">sudo</span> <span class="token function">service</span> mysql restart

<span class="token comment">#刷新权限</span>
flush privileges<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改字符集为utf8mb4:</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vi</span> /etc/mysql/mysql.conf.d/mysqld.cnf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="language-ini"><code><span class="token comment"># 注意 是修改 若原先只有[mysql]，则覆盖，其余情况参照windows安装一览的写法写</span>
<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">client</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">default-character-set</span> <span class="token punctuation">=</span> <span class="token value attr-value">utf8mb4</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysql</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">default-character-set</span> <span class="token punctuation">=</span> <span class="token value attr-value">utf8mb4</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysqld</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">character-set-server</span><span class="token punctuation">=</span><span class="token value attr-value">utf8mb4</span>
<span class="token key attr-name">character-set-client-handshake</span> <span class="token punctuation">=</span> <span class="token value attr-value">FALSE</span>
<span class="token key attr-name">collation-server</span> <span class="token punctuation">=</span> <span class="token value attr-value">utf8mb4_unicode_ci</span>
<span class="token key attr-name">init_connect</span><span class="token punctuation">=</span><span class="token value attr-value">&#39;<span class="token inner-value">SET NAMES utf8mb4</span>&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后重启mysql，进入mysql插入搜索验证：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 查看字符集</span>
<span class="token keyword">SHOW</span> VARIABLES <span class="token keyword">WHERE</span> Variable_name <span class="token operator">LIKE</span> <span class="token string">&#39;character\\_set\\_%&#39;</span> <span class="token operator">OR</span> Variable_name <span class="token operator">LIKE</span> <span class="token string">&#39;collation%&#39;</span><span class="token punctuation">;</span>
<span class="token comment"># 如果说发现还有utf8的字样：</span>
<span class="token keyword">set</span> character_set_client <span class="token operator">=</span>utf8mb4<span class="token punctuation">;</span>
<span class="token keyword">set</span> character_set_results <span class="token operator">=</span> utf8mb4<span class="token punctuation">;</span>
<span class="token keyword">set</span> character_set_connection <span class="token operator">=</span> utf8mb4<span class="token punctuation">;</span>
<span class="token comment"># 或者 SET NAMES utf8mb4; 就可以修改client编码</span>
<span class="token keyword">SET</span> NAMES utf8mb4<span class="token punctuation">;</span>
<span class="token comment"># 最终结果大概是这样的</span>
<span class="token operator">+</span><span class="token comment">--------------------------+--------------------+</span>
<span class="token operator">|</span> Variable_name            <span class="token operator">|</span> <span class="token keyword">Value</span>              <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------+--------------------+</span>
<span class="token operator">|</span> character_set_client     <span class="token operator">|</span> utf8mb4            <span class="token operator">|</span>
<span class="token operator">|</span> character_set_connection <span class="token operator">|</span> utf8mb4            <span class="token operator">|</span>
<span class="token operator">|</span> character_set_database   <span class="token operator">|</span> utf8mb4            <span class="token operator">|</span>
<span class="token operator">|</span> character_set_filesystem <span class="token operator">|</span> <span class="token keyword">binary</span>             <span class="token operator">|</span>
<span class="token operator">|</span> character_set_results    <span class="token operator">|</span> utf8mb4            <span class="token operator">|</span>
<span class="token operator">|</span> character_set_server     <span class="token operator">|</span> utf8mb4            <span class="token operator">|</span>
<span class="token operator">|</span> character_set_system     <span class="token operator">|</span> utf8mb3            <span class="token operator">|</span>
<span class="token operator">|</span> collation_connection     <span class="token operator">|</span> utf8mb4_unicode_ci <span class="token operator">|</span>
<span class="token operator">|</span> collation_database       <span class="token operator">|</span> utf8mb4_unicode_ci <span class="token operator">|</span>
<span class="token operator">|</span> collation_server         <span class="token operator">|</span> utf8mb4_unicode_ci <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------+--------------------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置远程访问：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span>
<span class="token comment">#然后输入密码进入mysql</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 原先是这样的</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">&#39;root&#39;</span><span class="token variable">@&#39;localhost&#39;</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">;</span>

<span class="token comment"># 注意&#39;root&#39;@&#39;localhost&#39; 均有单引号，其余的也是</span>

<span class="token comment"># 要设置成这样</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">&#39;root&#39;</span><span class="token variable">@&#39;%&#39;</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&quot;想设置成的密码&quot;</span><span class="token punctuation">;</span>
<span class="token comment">#其中root@localhos，localhost就是本地访问，配置成%就是所有主机都可连接；</span>
<span class="token comment">#第二个&#39;123456&#39;为你给新增权限用户设置的密码，%代表所有主机，也可以是具体的ip；</span>
<span class="token comment">#不过这随设置了%但我root通过工具还是登陆不进去，可能是为了安全性，所以新建数据库和用户；</span>


<span class="token comment">#或者指定用户：</span>
<span class="token comment">#用root用户新建数据和用作远程访问的用户</span>
<span class="token comment">##1 创建数据库weixx</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> weixx<span class="token punctuation">;</span>
<span class="token comment">##2 创建用户wxx(密码654321) 并允许wxx用户可以从任意机器上登入mysql的weixx数据库</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> weixx<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">&#39;wxx&#39;</span><span class="token variable">@&#39;%&#39;</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&quot;654321&quot;</span><span class="token punctuation">;</span> 

<span class="token comment">#刷新权限</span>
flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,12),Js={href:"https://blog.csdn.net/weixx3/article/details/80782479",target:"_blank",rel:"noopener noreferrer"},Ds=n("h4",{id:"卸载和重装mysql",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#卸载和重装mysql","aria-hidden":"true"},"#"),s(" 卸载和重装Mysql")],-1),Ks={href:"https://blog.csdn.net/fanrongwoaini/article/details/107518693",target:"_blank",rel:"noopener noreferrer"},Bs={href:"https://www.cnblogs.com/zhangxuel1ang/p/13456116.html",target:"_blank",rel:"noopener noreferrer"},Gs=p(`<h3 id="docker" tabindex="-1"><a class="header-anchor" href="#docker" aria-hidden="true">#</a> Docker</h3><p>我还是更喜欢用Docker</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> pull mysql@版本号
<span class="token comment"># 不指定版本的话默认是最新</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>创建并运行容器</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> run <span class="token parameter variable">--name</span> mysql <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这里注意一下，最好不要加-d参数。-d表示后台执行，就不能看到初始化数据库过程，这个过程可能有一会儿，没经过初始化数据库不能启动服务的。</p><figure><img src="`+k+`" alt="img" tabindex="0" loading="lazy"><figcaption>img</figcaption></figure><p>出现这条记录就说明安装成功，可以把这个控制台关掉，重新开一个</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> start mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>进入bash</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> mysql <span class="token function">bash</span>
mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>添加远程登录用户</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">USER</span> <span class="token string">&#39;账户名&#39;</span><span class="token variable">@&#39;%&#39;</span> IDENTIFIED <span class="token keyword">WITH</span> mysql_native_password <span class="token keyword">BY</span> <span class="token string">&#39;密码&#39;</span><span class="token punctuation">;</span> 

<span class="token comment">#或者</span>
<span class="token comment">##1 创建数据库weixx</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> weixx<span class="token punctuation">;</span>
<span class="token comment">##2 创建用户wxx(密码654321) 并允许wxx用户可以从任意机器上登入mysql的weixx数据库</span>
<span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> weixx<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">&#39;wxx&#39;</span><span class="token variable">@&#39;%&#39;</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">&quot;654321&quot;</span><span class="token punctuation">;</span> 
<span class="token comment">#刷新权限</span>
flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>

<span class="token keyword">exit</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重启</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">service</span> mysql restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>设置字符集的方式：和Linux中一致：个人建议使用图形化方式操作</p><figure><img src="`+u+`" alt="image-20211119233159061" tabindex="0" loading="lazy"><figcaption>image-20211119233159061</figcaption></figure><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">client</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">default-character-set</span> <span class="token punctuation">=</span> <span class="token value attr-value">utf8mb4</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysql</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">default-character-set</span> <span class="token punctuation">=</span> <span class="token value attr-value">utf8mb4</span>

<span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysqld</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">character-set-server</span><span class="token punctuation">=</span><span class="token value attr-value">utf8mb4</span>
<span class="token key attr-name">character-set-client-handshake</span> <span class="token punctuation">=</span> <span class="token value attr-value">FALSE</span>
<span class="token key attr-name">collation-server</span> <span class="token punctuation">=</span> <span class="token value attr-value">utf8mb4_unicode_ci</span>
<span class="token key attr-name">init_connect</span><span class="token punctuation">=</span><span class="token value attr-value">&#39;<span class="token inner-value">SET NAMES utf8mb4</span>&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置完毕后，重启mysql</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> restart mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="mysql的基本使用" tabindex="-1"><a class="header-anchor" href="#mysql的基本使用" aria-hidden="true">#</a> Mysql的基本使用</h2><p>连接到任意的mysql数据库的指令</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql <span class="token parameter variable">-h</span> 主机IP <span class="token parameter variable">-P</span> 端口 <span class="token parameter variable">-u</span> 用户名 -p密码
<span class="token comment">#小写的p和密码不要有空格</span>
<span class="token comment">#如果-p时没跟密码，回车后会要求输入密码</span>
<span class="token comment">#演示：</span>
mysql <span class="token parameter variable">-h</span> localhost <span class="token parameter variable">-P</span> <span class="token number">3306</span> <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p123456</span>

<span class="token comment">#当然默认的情况下前两个参数分别是 localhost 和 3306</span>
mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p123456</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当然默认情况下，在实际使用过程中，都会将Mysql的默认端口改成别的，如53146（3306容易被黑客攻击）</p><h3 id="使用图形化管理软件来操作mysql" tabindex="-1"><a class="header-anchor" href="#使用图形化管理软件来操作mysql" aria-hidden="true">#</a> 使用图形化管理软件来操作Mysql</h3>`,25),js={href:"https://www.navicat.com.cn/products",target:"_blank",rel:"noopener noreferrer"},zs={href:"https://github.com/gitccl/Navicat-key",target:"_blank",rel:"noopener noreferrer"},Hs={href:"https://github.com/webyog/sqlyog-community/wiki/Downloads",target:"_blank",rel:"noopener noreferrer"},Ys=n("p",null,"他们两的功能都大同小异",-1),Fs={href:"https://www.bilibili.com/video/BV1fh411y7R8?p=734&t=0.9",target:"_blank",rel:"noopener noreferrer"},Vs=p(`<p>​ 图形化的好处是方便直观的查看数据，但是在实际使用过程中，插入数据之类的过程一般都是才用命令模式插入（配合相关语言的相关库），试想一下，假设现在你要管理一千个用户的信息，每个用户的信息你都想要手动录入，那岂不是...</p><p>​ 以后在Java程序中也是通过指令来操作数据库的，这里放下老韩视频中基本的操作：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">#Create database</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> db02<span class="token punctuation">;</span>
<span class="token keyword">use</span> db02<span class="token punctuation">;</span>
<span class="token comment">#Create table</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> users<span class="token punctuation">(</span>
 id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    address <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#insert values</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> users <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;北京&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> users <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;李四&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;天津&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> users <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;王老五&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;南京&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#search </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> users<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>​ 当然，无论你是否感觉到了图形化界面的好处，我都建议你----还是用回命令行开打的那个mysql进行操作，因为实际过程中大部分的操作都是由sql语句来完成的，比如上面的那些。</p><p>​ 所以使用命令行来操作是一个好习惯。（同时可以有效的降低一丢丢面试不通过的概率）</p><h3 id="mysql的结构" tabindex="-1"><a class="header-anchor" href="#mysql的结构" aria-hidden="true">#</a> Mysql的结构</h3><figure><img src="`+d+'" alt="image-20211120135003148" tabindex="0" loading="lazy"><figcaption>image-20211120135003148</figcaption></figure><figure><img src="'+m+'" alt="image-20211120135054472" tabindex="0" loading="lazy"><figcaption>image-20211120135054472</figcaption></figure><figure><img src="'+v+`" alt="image-20211120135239889" tabindex="0" loading="lazy"><figcaption>image-20211120135239889</figcaption></figure><h2 id="sql语句分类" tabindex="-1"><a class="header-anchor" href="#sql语句分类" aria-hidden="true">#</a> SQL语句分类</h2><ul><li>DDL:数据定义语句:<code>create</code>表，库...</li><li>DML:数据库操作语句: <ul><li>增加<code>insert</code></li><li>修改<code>update</code></li><li>删除<code>delete</code></li></ul></li><li>DQL:数据库的查询语句<code>select</code> 查询时需指定哪个数据库 <ul><li>比如指定db1的user:<code>select * from db1.user</code></li></ul></li><li>DCL:数据库控制语句-管理数据库 <ul><li>给用户授权<code>grant</code></li><li>取消对用户的授权<code>revoke</code></li></ul></li></ul><h2 id="数据库的相关操作" tabindex="-1"><a class="header-anchor" href="#数据库的相关操作" aria-hidden="true">#</a> 数据库的相关操作</h2><h3 id="创建数据库" tabindex="-1"><a class="header-anchor" href="#创建数据库" aria-hidden="true">#</a> 创建数据库</h3><p>语法：<code>CREATE DATABASE [可选：IF NOT EXITS] 数据库名 [可选 CHARACTER SET] [可选 COLLATE]</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 创建一个默认类型的数据库</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> db1<span class="token punctuation">;</span>
<span class="token comment"># 创建一个数据库，如果已存在，就不创建 不存在则创建</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> db1<span class="token punctuation">;</span>

<span class="token comment"># 创建一个数据库，并指定字符集为utf-8;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">if</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> db2 <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8<span class="token punctuation">;</span>

<span class="token comment"># 创建一个数据库，并指定字符集为utf-8,校验规则为区分大小写utf8_bin</span>
<span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">if</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> db3 <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_bin<span class="token punctuation">;</span>

<span class="token comment"># 通常来说，创建数据库的时候，为了规避关键字，都会使用反引号包裹名字</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token identifier"><span class="token punctuation">\`</span>select<span class="token punctuation">\`</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>CHARACTER SET</code>:指定数据库采用的字符集，如果不指定字符集，默认为配置数据库时设置的字符集(utf8或者utf8mb4)</p><p><code>COLLATE</code>:指定数据库的校验规则，无论是哪种字符集，排序规则的名字都是大同小异的，utf-8默认为<code>utf8_general_ci</code>，下面举几个常用的</p><table><thead><tr><th style="text-align:center;">名称</th><th style="text-align:center;">特点</th></tr></thead><tbody><tr><td style="text-align:center;">utf8_general_ci</td><td style="text-align:center;">校对速度快，但准确度稍差，不区分大小写</td></tr><tr><td style="text-align:center;">utf8_general_cs</td><td style="text-align:center;">校对速度快，但准确度稍差，区分大小写</td></tr><tr><td style="text-align:center;">utf8_unicode_ci</td><td style="text-align:center;">准确度高，但校对速度稍慢，不区分大小写</td></tr><tr><td style="text-align:center;">utf8_bin</td><td style="text-align:center;">将字符串中的每一个字符用二进制数据存储，区分大小写;</td></tr></tbody></table><p>一般来说，都是在<code>general_ci</code>和 <code>utf8_bin</code>之间来回选择，其他字符集同理，例如utf8mb4要区分大小写就：<code>utf8mb4_bin</code></p><h3 id="查看、删除数据库" tabindex="-1"><a class="header-anchor" href="#查看、删除数据库" aria-hidden="true">#</a> 查看、删除数据库</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 显示所有数据库</span>
<span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>

<span class="token comment"># 显示创建数据库时的语句</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">database</span> 数据库名<span class="token punctuation">;</span>

<span class="token comment"># 删除一个数据库</span>
<span class="token keyword">drop</span> <span class="token keyword">database</span> 数据库名<span class="token punctuation">;</span>

<span class="token comment"># 删除一个数据库 如果存在就删除，不存在就什么也不做</span>
<span class="token keyword">drop</span> <span class="token keyword">database</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> 数据库名<span class="token punctuation">;</span>

<span class="token comment"># 通常来说 为了严谨性，数据库名都会用反引号包裹</span>
<span class="token keyword">drop</span> <span class="token keyword">database</span> <span class="token identifier"><span class="token punctuation">\`</span>db222<span class="token punctuation">\`</span></span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="备份、恢复数据库" tabindex="-1"><a class="header-anchor" href="#备份、恢复数据库" aria-hidden="true">#</a> 备份、恢复数据库</h3><ul><li>备份数据库（CMD或者Shell下执行）千万别用powerShell 千万别用powerShell 千万别用powerShell</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 备份整个数据库</span>
mysqldump <span class="token parameter variable">-u</span> 用户名 <span class="token parameter variable">-p</span> <span class="token parameter variable">-B</span> 数据库1 数据库2 数据库n <span class="token operator">&gt;</span> 文件名.sql或者路径/文件名.sql
<span class="token comment">#例如</span>
<span class="token builtin class-name">cd</span> d:<span class="token punctuation">\\</span><span class="token punctuation">;</span>
mysqldump <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span> <span class="token parameter variable">-B</span> db1 <span class="token operator">&gt;</span>my.sql

<span class="token comment">#备份数据库的某些表</span>
mysqldump <span class="token parameter variable">-u</span> 用户名 <span class="token parameter variable">-p</span> 数据库名 表1 表2 表n <span class="token operator">&gt;</span> 文件名.sql或者路径/文件名.sql

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不指定路径的话默认位置是当前shell所在同级路径下</p><ul><li>恢复数据库(要进入到MySQL命令行中执行)</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 必须得进入命令行</span>
mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>然后再执行恢复：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>source 路径:文件<span class="token punctuation">;</span>

<span class="token comment">#例如</span>
source d:\\my<span class="token punctuation">.</span><span class="token keyword">sql</span><span class="token punctuation">;</span>

<span class="token comment"># 恢复数据表-要进入到自己想的数据库中;</span>
<span class="token keyword">use</span> 数据库名<span class="token punctuation">;</span>
source 路径:文件<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者直接把文件拖到那些图形化软件中执行也可</p><h2 id="表的相关操作" tabindex="-1"><a class="header-anchor" href="#表的相关操作" aria-hidden="true">#</a> 表的相关操作</h2><h3 id="创建、查看、删除表" tabindex="-1"><a class="header-anchor" href="#创建、查看、删除表" aria-hidden="true">#</a> 创建、查看、删除表</h3><p>​ mysql中，普遍的命名规则是下划线命名，而非是编程语言中常见的驼峰命名，例如<code>userMessage</code>在mysql中就要写成<code>user_message</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> 表名（
 字段名<span class="token number">1</span> 字段类型 可选<span class="token operator">-</span>验证规则<span class="token punctuation">,</span>
 字段名<span class="token number">1</span> 字段类型<span class="token punctuation">,</span>
 字段名<span class="token number">1</span> 字段类型<span class="token punctuation">,</span>
 字段名<span class="token number">1</span> 字段类型
）<span class="token keyword">character</span> <span class="token keyword">set</span> 字符集  <span class="token keyword">collate</span> 校验规则 <span class="token keyword">engine</span> 引擎<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>character set</code>字段的字符集，不指定为所在数据库的字符集</p><p><code>collate</code>字段的校验规则，不指定为所在数据库的规则</p><p><code>engine</code>引擎，这玩意涉及的内容有点多</p><p>验证规则，这个后面单独说-也被称为约束</p><p>查看当前库(database)中的所有表：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 查看db1下的所有表;</span>
<span class="token keyword">use</span> db1<span class="token punctuation">;</span>
<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>删除当前库(database)中的某个表：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 删除表：db1下的emp;</span>
<span class="token keyword">use</span> db1<span class="token punctuation">;</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> emp<span class="token punctuation">;</span>

<span class="token comment"># 如果存在则删除：</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token keyword">if</span> <span class="token keyword">exists</span> emp<span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="mysql的数据类型" tabindex="-1"><a class="header-anchor" href="#mysql的数据类型" aria-hidden="true">#</a> MySql的数据类型</h3><p>大致如下，标了红旗的就是常用的，当然还有个非常罕见的bit(M)类型，M指定位数，默认值1，范围1~64</p><p>如果精度要求比价高的话就用Deicmal来存放数值</p><p>一般情况下不会用到二进制类型，文件一般都是直接存到一般，数据库中建个索引路径</p><figure><img src="`+b+'" alt="MySql数据类型" tabindex="0" loading="lazy"><figcaption>MySql数据类型</figcaption></figure><figure><img src="'+y+'" alt="image-20211120185628320" tabindex="0" loading="lazy"><figcaption>image-20211120185628320</figcaption></figure><figure><img src="'+g+'" alt="image-20211120185641114" tabindex="0" loading="lazy"><figcaption>image-20211120185641114</figcaption></figure><figure><img src="'+w+'" alt="image-20211120192745001" tabindex="0" loading="lazy"><figcaption>image-20211120192745001</figcaption></figure><figure><img src="'+h+'" alt="image-20211120192825877" tabindex="0" loading="lazy"><figcaption>image-20211120192825877</figcaption></figure><p>Char和Varchar的长度（比如varchar(255)）表示的是255个字符，而并非是255个字节</p><p>反正用的时候只要知道，定义多长，就能放多少个字即可</p><figure><img src="'+q+'" alt="image-20211120205829953" tabindex="0" loading="lazy"><figcaption>image-20211120205829953</figcaption></figure><figure><img src="'+f+`" alt="image-20211120205914839" tabindex="0" loading="lazy"><figcaption>image-20211120205914839</figcaption></figure><h4 id="decimal类型额外说明" tabindex="-1"><a class="header-anchor" href="#decimal类型额外说明" aria-hidden="true">#</a> Decimal类型额外说明</h4><p>这个东西得额外提出来说一嘴</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> db3<span class="token punctuation">(</span>
 num <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
              
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#第一个值就是总长度，第二个值就是小数所占长度；</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> db3 <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">233.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 这样查询可以得到：233.10000000000000000000 1后面有19个小数</span>

<span class="token comment"># 也可以这样让只能插入整数，以存放较大范围的整数</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> db3<span class="token punctuation">(</span>
 num <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
              
<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+E+'" alt="image-20211120190547035" tabindex="0" loading="lazy"><figcaption>image-20211120190547035</figcaption></figure><figure><img src="'+L+'" alt="image-20211120185843253" tabindex="0" loading="lazy"><figcaption>image-20211120185843253</figcaption></figure><figure><img src="'+S+`" alt="image-20211120185843253.png" tabindex="0" loading="lazy"><figcaption>image-20211120185843253.png</figcaption></figure><h4 id="时间相关类型额外说明default值和on-update值" tabindex="-1"><a class="header-anchor" href="#时间相关类型额外说明default值和on-update值" aria-hidden="true">#</a> 时间相关类型额外说明default值和on update值</h4><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> test_time <span class="token punctuation">(</span>
 birthday <span class="token keyword">DATE</span><span class="token punctuation">,</span>
 job_time <span class="token keyword">DATETIME</span><span class="token punctuation">,</span>
 login_time <span class="token keyword">TIMESTAMP</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">on</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CURRENT_TIMESTAMP</span>
    <span class="token comment">#TIMESTAMP 可以通过default来设置初始值 和 on update 来设置自动更新</span>
    <span class="token comment"># 除了DATETIME，其他的时间字段都可以貌似这样CURRENT_XXX</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">into</span> test_time<span class="token punctuation">(</span>birthday<span class="token punctuation">,</span>job_time<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;2011-1-1&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;2001-1-1 1:1:1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">from</span> test_time<span class="token punctuation">;</span>

<span class="token comment"># 可以看到login_time被填充了相关时间</span>
<span class="token operator">+</span><span class="token comment">------------+---------------------+---------------------+</span>
<span class="token operator">|</span> birthday   <span class="token operator">|</span> job_time            <span class="token operator">|</span> login_time          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+---------------------+---------------------+</span>
<span class="token operator">|</span> <span class="token number">2011</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2001</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token number">01</span>:<span class="token number">01</span>:<span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">21</span>:<span class="token number">18</span>:<span class="token number">36</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+---------------------+---------------------+</span>

<span class="token comment">#更新一下试试：</span>
<span class="token keyword">update</span> test_time <span class="token keyword">set</span>  birthday<span class="token operator">=</span><span class="token string">&#39;2111-11-1&#39;</span> <span class="token keyword">where</span> birthday<span class="token operator">=</span><span class="token string">&#39;2011-01-01&#39;</span><span class="token punctuation">;</span>
<span class="token comment"># 可以看到login_time同步的被更新了</span>
<span class="token operator">+</span><span class="token comment">------------+---------------------+---------------------+</span>
<span class="token operator">|</span> birthday   <span class="token operator">|</span> job_time            <span class="token operator">|</span> login_time          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+---------------------+---------------------+</span>
<span class="token operator">|</span> <span class="token number">2111</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2001</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token number">01</span>:<span class="token number">01</span>:<span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">21</span>:<span class="token number">24</span>:<span class="token number">56</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+---------------------+---------------------+</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修改表-字段的增删改" tabindex="-1"><a class="header-anchor" href="#修改表-字段的增删改" aria-hidden="true">#</a> 修改表-字段的增删改</h3><p>增加字段<code>alter table 表名 add 字段1 字段类型 [可选约束] [after 字段2]</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp <span class="token keyword">add</span> image <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token comment"># 在某个字段后面插入：</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> emp <span class="token keyword">add</span> <span class="token identifier"><span class="token punctuation">\`</span>version<span class="token punctuation">\`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">after</span> name<span class="token punctuation">;</span>
<span class="token comment"># 在name后面插入version</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改字段属性<code>alter table 表名 modify 字段1 字段类型 [可选约束] [after 字段2]</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp <span class="token keyword">modify</span> job <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 将已有的job的数据类型替换为varchar60</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> emp <span class="token keyword">modify</span> job <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;工作&#39;</span><span class="token punctuation">;</span>
<span class="token comment">#能修改字段类型、类型长度、默认值、注释</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> emp <span class="token keyword">modify</span> age <span class="token keyword">int</span> <span class="token keyword">after</span> name<span class="token punctuation">;</span>
<span class="token comment"># 将age属性放到name属性后面，注意，字段类型不能落下</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改字段名及字段类型<code>alter table 表名 change 旧字段名 新字段名 新字段类型 [可选约束] [after 字段2]</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> emp change name user_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">&#39;用户名&#39;</span><span class="token punctuation">;</span>

<span class="token comment"># 也可以在重命名后插入到其他元素后面</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> employee change job today_job <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">77</span><span class="token punctuation">)</span> <span class="token keyword">after</span> sex<span class="token punctuation">;</span>
<span class="token comment"># 将job重命名后丢在sex后面，注意，字段类型不能落下</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>删除字段<code>alter table 表名 drop 字段名</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> emp <span class="token keyword">drop</span> name<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看表的结构:<code>desc 表名;</code></p><p>修改表名：<code>Rename table 表名 to 新表名;</code></p><p>修改表字符集：<code>alter table 表名 character set 字符集</code></p><h2 id="crud-增删改查" tabindex="-1"><a class="header-anchor" href="#crud-增删改查" aria-hidden="true">#</a> CRUD-增删改查</h2><h3 id="insert添加数据" tabindex="-1"><a class="header-anchor" href="#insert添加数据" aria-hidden="true">#</a> Insert添加数据</h3><p>语法：<code>insert into 表名 [可选(数据项目)] values(数据),[可选 (数据)]</code></p><p>插入数据的原则：校验用户的数据是否合发，是否在符合预期内，需前后端双重验证+防注入处理；</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> person<span class="token punctuation">(</span>
    id <span class="token keyword">int</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    price <span class="token keyword">double</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 插入一条数据 需要传入所有字段（按照顺序）</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> person <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span><span class="token number">1500.1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 指定字段插入数据（按照指定字段的顺序）</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> person<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;李四&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">------+--------+--------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> price  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+--------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span> <span class="token number">1500.1</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 李四   <span class="token operator">|</span>   <span class="token boolean">NULL</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+--------+</span>

<span class="token comment"># 插入多条数据(可以配合指定字段使用)</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> person <span class="token keyword">values</span>
 <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;王老五&quot;</span><span class="token punctuation">,</span><span class="token number">6663.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">&quot;陈六&quot;</span><span class="token punctuation">,</span><span class="token number">2333.15</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">&quot;嘎子&quot;</span><span class="token punctuation">,</span><span class="token number">159.15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">------+-----------+---------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name      <span class="token operator">|</span> price   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+---------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三      <span class="token operator">|</span>  <span class="token number">1500.1</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 李四      <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> 王老五    <span class="token operator">|</span>  <span class="token number">6663.1</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> 陈六      <span class="token operator">|</span> <span class="token number">2333.15</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> 嘎子      <span class="token operator">|</span>  <span class="token number">159.15</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+---------+</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="update更新数据" tabindex="-1"><a class="header-anchor" href="#update更新数据" aria-hidden="true">#</a> Update更新数据</h3><p>语法：<code>update 表名 set 字段名=字段值,字段名=字段值 [可选： where筛选器]</code></p><p>update 语法可以用于更新原有表行中的各列</p><p>set字句指示要修改那些行和要给予哪些值</p><p><strong>where字句指定应该更新哪些行，如果没有where，则更新所有行</strong>，实际工作中绝对不能犯这种错误......</p><p>如果要修改多个字段 可以<code>set 字段1=值1,字段2=值2....</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">#将表中的所有条目的price字段修改为1000</span>
<span class="token keyword">update</span> person <span class="token keyword">set</span> price <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+-----------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name      <span class="token operator">|</span> price <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三      <span class="token operator">|</span>  <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 李四      <span class="token operator">|</span>  <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> 王老五    <span class="token operator">|</span>  <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> 陈六      <span class="token operator">|</span>  <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> 嘎子      <span class="token operator">|</span>  <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+-------+</span>


<span class="token comment">#将姓名为张三的人的price修改为2000</span>
<span class="token keyword">update</span> person <span class="token keyword">set</span> price <span class="token operator">=</span> <span class="token number">2000</span> <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> price <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>  <span class="token number">2000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>


<span class="token comment">#将所有人的工资改变为原本的工资+1500</span>
<span class="token keyword">update</span> person <span class="token keyword">set</span> price <span class="token operator">=</span> price<span class="token operator">+</span><span class="token number">1000</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+-----------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name      <span class="token operator">|</span> price <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三      <span class="token operator">|</span>  <span class="token number">3000</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 李四      <span class="token operator">|</span>  <span class="token number">2000</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> 王老五    <span class="token operator">|</span>  <span class="token number">2000</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> 陈六      <span class="token operator">|</span>  <span class="token number">2000</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> 嘎子      <span class="token operator">|</span>  <span class="token number">2000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+-------+</span>

<span class="token comment"># 将李四的工资变为原本的工资+666</span>
<span class="token keyword">update</span> person <span class="token keyword">set</span> price <span class="token operator">=</span> price<span class="token operator">+</span><span class="token number">666</span> <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">&#39;李四&#39;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> price <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 李四   <span class="token operator">|</span>  <span class="token number">2666</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>



</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="delete删除数据" tabindex="-1"><a class="header-anchor" href="#delete删除数据" aria-hidden="true">#</a> Delete删除数据</h3><p>语法：<code>delete from 表名 [可选 where 筛选器]</code></p><p>如果没有带where，则删除表中的所有数据</p><p>使用delete语句仅删除记录，不删除表的本身，如果说要删除一个表，一般都是直接使用<code>drop table 表名</code>语句</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 删除表中name=王老五的人;</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> person <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">&quot;王老五&quot;</span><span class="token punctuation">;</span>

<span class="token comment"># 删除某个表中的所有数据 谨慎使用</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> person<span class="token punctuation">;</span>

<span class="token comment"># 如果说是想删除某一列的所有值，建议使用update</span>
<span class="token keyword">update</span> person <span class="token keyword">set</span> price<span class="token operator">=</span><span class="token boolean">null</span> <span class="token punctuation">;</span>
<span class="token comment">#替换为null的方式 或者用替换为&quot;&quot;,0之类的方式</span>
<span class="token operator">+</span><span class="token comment">------+-----------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name      <span class="token operator">|</span> price <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三      <span class="token operator">|</span>  <span class="token boolean">NULL</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 李四      <span class="token operator">|</span>  <span class="token boolean">NULL</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> 王老五    <span class="token operator">|</span>  <span class="token boolean">NULL</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> 陈六      <span class="token operator">|</span>  <span class="token boolean">NULL</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> 嘎子      <span class="token operator">|</span>  <span class="token boolean">NULL</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+-------+</span>

<span class="token comment">#如果说想要删除一列，直接通过操作字段的方式：</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> person <span class="token keyword">drop</span> price<span class="token punctuation">;</span>

<span class="token comment"># 总之，除非非常明确自己确实要删除这个表中的所有数据，不然千万不要</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> person<span class="token punctuation">;</span>
<span class="token comment"># 正常情况下，删除数据必须加where筛选器</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="删除表数据增强" tabindex="-1"><a class="header-anchor" href="#删除表数据增强" aria-hidden="true">#</a> 删除表数据增强</h3><ol><li><p>当你不再需要该表时， 用 drop：<code>drop table表名</code></p><ul><li>drop 是直接将表格删除，无法找回。例如删除 user 表：</li></ul></li><li><p>当你仍要保留该表，但要删除所有记录时，用truncate<br><code>truncate （table） 表名</code></p><ul><li>truncate 是删除表中所有数据，但不能与where一起使用；</li></ul></li><li><p>当你要删除部分记录或者有可能会后悔的话， 用 delete<br><code>delete from 表名 [where]</code></p><ul><li>delete 也是删除表中数据，但可以与where连用，删除特定行；</li></ul></li></ol>`,94),Ps={href:"https://www.cnblogs.com/fcc-123/p/10672604.html",target:"_blank",rel:"noopener noreferrer"},Ws=p('<p>如果说想要删除某个表并且不留有缓存，但是又先使用了delete删除，那么再补一次truncate 即可</p><h1 id="select-查找-单表查询" tabindex="-1"><a class="header-anchor" href="#select-查找-单表查询" aria-hidden="true">#</a> Select 查找-单表查询</h1><p>​ 看到这个H1标题了吗，是整个sql中最重要的玩意。没有任何东西比他更重要了。在任何类型、任何种类的数据库中，查找永远都是最重要的部分，查找对于数据库来说就好比，饭对于人的重要性一般。</p><h2 id="基本语法" tabindex="-1"><a class="header-anchor" href="#基本语法" aria-hidden="true">#</a> 基本语法</h2><p>基本语法很简单：</p><p><code>select [可选：distinct] *号或者字段名1，字段名2，字段名3... from 表名</code></p><p>distinct: 去重，当结果中有重复值的时候自动合并去重</p><p>也可以给字段取个别名：<code>select 字段1 as &#39;别名1&#39;,字段2 as &#39;别名2&#39;... from 表名</code></p><p><strong>字段名是使用运算符的</strong></p><p>然后在表名后面可以跟where语句：<code>select 相关数据 from 表名 where 相关逻辑表达式</code></p><p>下面会演示的表达式：（代码块最后）运算，大小等于，and 和模糊匹配与正则表达式</p>',11),Qs={href:"https://www.runoob.com/mysql/mysql-operator.html",target:"_blank",rel:"noopener noreferrer"},Xs={href:"https://www.runoob.com/mysql/mysql-regexp.html",target:"_blank",rel:"noopener noreferrer"},$s={href:"https://www.runoob.com/mysql/mysql-like-clause.html",target:"_blank",rel:"noopener noreferrer"},Zs=p(`<div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">use</span> db1<span class="token punctuation">;</span>
<span class="token comment">#获取person中的所有字段</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person<span class="token punctuation">;</span> 
<span class="token operator">+</span><span class="token comment">------+-----------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name      <span class="token operator">|</span> price <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三      <span class="token operator">|</span>  <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 李四      <span class="token operator">|</span>  <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> 王老五    <span class="token operator">|</span>  <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> 陈六      <span class="token operator">|</span>  <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+-------+</span>

<span class="token keyword">select</span> name<span class="token punctuation">,</span>price <span class="token keyword">from</span> person<span class="token punctuation">;</span>
<span class="token comment">#只获取姓名，薪水</span>
<span class="token operator">+</span><span class="token comment">-----------+-------+</span>
<span class="token operator">|</span> name      <span class="token operator">|</span> price <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+-------+</span>
<span class="token operator">|</span> 张三      <span class="token operator">|</span>  <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">|</span> 李四      <span class="token operator">|</span>  <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">|</span> 王老五    <span class="token operator">|</span>  <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">|</span> 陈六      <span class="token operator">|</span>  <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+-------+</span>

<span class="token keyword">select</span> name <span class="token keyword">as</span> <span class="token string">&quot;姓名&quot;</span> <span class="token punctuation">,</span>price <span class="token keyword">as</span> <span class="token string">&quot;薪水&quot;</span> <span class="token keyword">from</span> person<span class="token punctuation">;</span>
<span class="token comment">#给获取到的值重命名</span>
<span class="token operator">+</span><span class="token comment">-----------+--------+</span>
<span class="token operator">|</span> 姓名      <span class="token operator">|</span> 薪水   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+--------+</span>
<span class="token operator">|</span> 张三      <span class="token operator">|</span>   <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">|</span> 李四      <span class="token operator">|</span>   <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">|</span> 王老五    <span class="token operator">|</span>   <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">|</span> 陈六      <span class="token operator">|</span>   <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+--------+</span>

<span class="token keyword">select</span> <span class="token keyword">distinct</span> price <span class="token keyword">from</span> person<span class="token punctuation">;</span>
<span class="token comment"># 给薪水去重，注意，这里去重的话得是得到的所有字段值一致</span>
<span class="token operator">+</span><span class="token comment">-------+</span>
<span class="token operator">|</span> price <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+</span>
<span class="token operator">|</span>  <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+</span>

<span class="token comment">#加入name字段，判定的时候也会判定name是否重复</span>
<span class="token comment"># 只有name，price完全相同的时候才会去重</span>
<span class="token keyword">select</span> <span class="token keyword">distinct</span> name<span class="token punctuation">,</span>price <span class="token keyword">from</span> person<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+-------+</span>
<span class="token operator">|</span> name      <span class="token operator">|</span> price <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+-------+</span>
<span class="token operator">|</span> 张三      <span class="token operator">|</span>  <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">|</span> 李四      <span class="token operator">|</span>  <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">|</span> 王老五    <span class="token operator">|</span>  <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">|</span> 陈六      <span class="token operator">|</span>  <span class="token number">1500</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+-------+</span>


<span class="token comment"># 给Student表</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>
<span class="token operator">|</span> name      <span class="token operator">|</span> chinese <span class="token operator">|</span> math <span class="token operator">|</span> english <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>
<span class="token operator">|</span> 张三      <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>   <span class="token number">50</span> <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>
<span class="token operator">|</span> 李四      <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>   <span class="token number">80</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">|</span> 王老五    <span class="token operator">|</span>      <span class="token number">75</span> <span class="token operator">|</span>   <span class="token number">99</span> <span class="token operator">|</span>     <span class="token number">105</span> <span class="token operator">|</span>
<span class="token operator">|</span> 老韩      <span class="token operator">|</span>      <span class="token number">60</span> <span class="token operator">|</span>   <span class="token number">80</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">|</span> 老李      <span class="token operator">|</span>      <span class="token number">40</span> <span class="token operator">|</span>   <span class="token number">30</span> <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>
<span class="token operator">|</span> 张飞      <span class="token operator">|</span>      <span class="token number">60</span> <span class="token operator">|</span>   <span class="token number">63</span> <span class="token operator">|</span>      <span class="token number">53</span> <span class="token operator">|</span>
<span class="token operator">|</span> 特朗普    <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>   <span class="token number">60</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">|</span> 蔡老狗    <span class="token operator">|</span>      <span class="token number">60</span> <span class="token operator">|</span>   <span class="token number">80</span> <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>
<span class="token comment">#中的每个学员的总成绩进行相加并算出其平均值</span>

<span class="token keyword">select</span> name <span class="token punctuation">,</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&quot;总分&quot;</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+--------+</span>
<span class="token operator">|</span> name      <span class="token operator">|</span> 总分   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+--------+</span>
<span class="token operator">|</span> 张三      <span class="token operator">|</span>    <span class="token number">200</span> <span class="token operator">|</span>
<span class="token operator">|</span> 李四      <span class="token operator">|</span>    <span class="token number">230</span> <span class="token operator">|</span>
<span class="token operator">|</span> 王老五    <span class="token operator">|</span>    <span class="token number">279</span> <span class="token operator">|</span>
<span class="token operator">|</span> 老韩      <span class="token operator">|</span>    <span class="token number">240</span> <span class="token operator">|</span>
<span class="token operator">|</span> 老李      <span class="token operator">|</span>    <span class="token number">120</span> <span class="token operator">|</span>
<span class="token operator">|</span> 张飞      <span class="token operator">|</span>    <span class="token number">176</span> <span class="token operator">|</span>
<span class="token operator">|</span> 特朗普    <span class="token operator">|</span>    <span class="token number">160</span> <span class="token operator">|</span>
<span class="token operator">|</span> 蔡老狗    <span class="token operator">|</span>    <span class="token number">190</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+--------+</span>

<span class="token comment">#附带上平均费</span>
<span class="token keyword">select</span> name <span class="token punctuation">,</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&quot;总分&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">3</span> <span class="token keyword">as</span> <span class="token string">&quot;平均分&quot;</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+--------+-----------+</span>
<span class="token operator">|</span> name      <span class="token operator">|</span> 总分   <span class="token operator">|</span> 平均分    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+--------+-----------+</span>
<span class="token operator">|</span> 张三      <span class="token operator">|</span>    <span class="token number">200</span> <span class="token operator">|</span>   <span class="token number">66.6667</span> <span class="token operator">|</span>
<span class="token operator">|</span> 李四      <span class="token operator">|</span>    <span class="token number">230</span> <span class="token operator">|</span>   <span class="token number">76.6667</span> <span class="token operator">|</span>
<span class="token operator">|</span> 王老五    <span class="token operator">|</span>    <span class="token number">279</span> <span class="token operator">|</span>   <span class="token number">93.0000</span> <span class="token operator">|</span>
<span class="token operator">|</span> 老韩      <span class="token operator">|</span>    <span class="token number">240</span> <span class="token operator">|</span>   <span class="token number">80.0000</span> <span class="token operator">|</span>
<span class="token operator">|</span> 老李      <span class="token operator">|</span>    <span class="token number">120</span> <span class="token operator">|</span>   <span class="token number">40.0000</span> <span class="token operator">|</span>
<span class="token operator">|</span> 张飞      <span class="token operator">|</span>    <span class="token number">176</span> <span class="token operator">|</span>   <span class="token number">58.6667</span> <span class="token operator">|</span>
<span class="token operator">|</span> 特朗普    <span class="token operator">|</span>    <span class="token number">160</span> <span class="token operator">|</span>   <span class="token number">53.3333</span> <span class="token operator">|</span>
<span class="token operator">|</span> 蔡老狗    <span class="token operator">|</span>    <span class="token number">190</span> <span class="token operator">|</span>   <span class="token number">63.3333</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+--------+-----------+</span>

<span class="token comment"># 使用简单的where语句</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">&#39;李四&#39;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+---------+------+---------+</span>
<span class="token operator">|</span> name   <span class="token operator">|</span> chinese <span class="token operator">|</span> math <span class="token operator">|</span> english <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+------+---------+</span>
<span class="token operator">|</span> 李四   <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>   <span class="token number">80</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+------+---------+</span>
<span class="token comment">#英语大于60</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> english<span class="token operator">&gt;</span><span class="token number">60</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>
<span class="token operator">|</span> name      <span class="token operator">|</span> chinese <span class="token operator">|</span> math <span class="token operator">|</span> english <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>
<span class="token operator">|</span> 李四      <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>   <span class="token number">80</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">|</span> 王老五    <span class="token operator">|</span>      <span class="token number">75</span> <span class="token operator">|</span>   <span class="token number">99</span> <span class="token operator">|</span>     <span class="token number">105</span> <span class="token operator">|</span>
<span class="token operator">|</span> 老韩      <span class="token operator">|</span>      <span class="token number">60</span> <span class="token operator">|</span>   <span class="token number">80</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">|</span> 特朗普    <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>   <span class="token number">60</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>
<span class="token comment">#总分大于200</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">200</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>
<span class="token operator">|</span> name      <span class="token operator">|</span> chinese <span class="token operator">|</span> math <span class="token operator">|</span> english <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>
<span class="token operator">|</span> 李四      <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>   <span class="token number">80</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">|</span> 王老五    <span class="token operator">|</span>      <span class="token number">75</span> <span class="token operator">|</span>   <span class="token number">99</span> <span class="token operator">|</span>     <span class="token number">105</span> <span class="token operator">|</span>
<span class="token operator">|</span> 老韩      <span class="token operator">|</span>      <span class="token number">60</span> <span class="token operator">|</span>   <span class="token number">80</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>

<span class="token comment">#数学大于60且中文大于50的人：</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> math<span class="token operator">&gt;</span><span class="token number">60</span> <span class="token operator">and</span> chinese<span class="token operator">&gt;</span><span class="token number">50</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>
<span class="token operator">|</span> name      <span class="token operator">|</span> chinese <span class="token operator">|</span> math <span class="token operator">|</span> english <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>
<span class="token operator">|</span> 王老五    <span class="token operator">|</span>      <span class="token number">75</span> <span class="token operator">|</span>   <span class="token number">99</span> <span class="token operator">|</span>     <span class="token number">105</span> <span class="token operator">|</span>
<span class="token operator">|</span> 老韩      <span class="token operator">|</span>      <span class="token number">60</span> <span class="token operator">|</span>   <span class="token number">80</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">|</span> 张飞      <span class="token operator">|</span>      <span class="token number">60</span> <span class="token operator">|</span>   <span class="token number">63</span> <span class="token operator">|</span>      <span class="token number">53</span> <span class="token operator">|</span>
<span class="token operator">|</span> 蔡老狗    <span class="token operator">|</span>      <span class="token number">60</span> <span class="token operator">|</span>   <span class="token number">80</span> <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>

<span class="token comment">#英语成绩大于语文成绩:</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> english<span class="token operator">&gt;</span>chinese<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>
<span class="token operator">|</span> name      <span class="token operator">|</span> chinese <span class="token operator">|</span> math <span class="token operator">|</span> english <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>
<span class="token operator">|</span> 李四      <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>   <span class="token number">80</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">|</span> 王老五    <span class="token operator">|</span>      <span class="token number">75</span> <span class="token operator">|</span>   <span class="token number">99</span> <span class="token operator">|</span>     <span class="token number">105</span> <span class="token operator">|</span>
<span class="token operator">|</span> 老韩      <span class="token operator">|</span>      <span class="token number">60</span> <span class="token operator">|</span>   <span class="token number">80</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">|</span> 老李      <span class="token operator">|</span>      <span class="token number">40</span> <span class="token operator">|</span>   <span class="token number">30</span> <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>
<span class="token operator">|</span> 特朗普    <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>   <span class="token number">60</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>

<span class="token comment">#查询数学分数为80和99的同学</span>
<span class="token keyword">select</span> name <span class="token string">&quot;姓名&quot;</span><span class="token punctuation">,</span>math <span class="token string">&quot;数学分数&quot;</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> math <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span><span class="token number">99</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+--------------+</span>
<span class="token operator">|</span> 姓名      <span class="token operator">|</span> 数学分数     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+--------------+</span>
<span class="token operator">|</span> 李四      <span class="token operator">|</span>           <span class="token number">80</span> <span class="token operator">|</span>
<span class="token operator">|</span> 王老五    <span class="token operator">|</span>           <span class="token number">99</span> <span class="token operator">|</span>
<span class="token operator">|</span> 老韩      <span class="token operator">|</span>           <span class="token number">80</span> <span class="token operator">|</span>
<span class="token operator">|</span> 蔡老狗    <span class="token operator">|</span>           <span class="token number">80</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+--------------+</span>

<span class="token comment">#查询平均分大于50且 数学成绩大于英语成绩 的姓张的学生;</span>

<span class="token comment">#使用模糊匹配</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token punctuation">(</span>chinese <span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">3</span><span class="token operator">&gt;</span><span class="token number">50</span> <span class="token operator">and</span> math<span class="token operator">&gt;</span>english <span class="token operator">and</span> name <span class="token operator">like</span> <span class="token string">&quot;张%&quot;</span><span class="token punctuation">;</span>

<span class="token comment">#使用正则表达式</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token punctuation">(</span>chinese <span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">3</span><span class="token operator">&gt;</span><span class="token number">50</span> <span class="token operator">and</span> math<span class="token operator">&gt;</span>english <span class="token operator">and</span> name <span class="token operator">REGEXP</span> <span class="token string">&#39;^张&#39;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+---------+------+---------+</span>
<span class="token operator">|</span> name   <span class="token operator">|</span> chinese <span class="token operator">|</span> math <span class="token operator">|</span> english <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+------+---------+</span>
<span class="token operator">|</span> 张飞   <span class="token operator">|</span>      <span class="token number">60</span> <span class="token operator">|</span>   <span class="token number">63</span> <span class="token operator">|</span>      <span class="token number">53</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+------+---------+</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="统计函数" tabindex="-1"><a class="header-anchor" href="#统计函数" aria-hidden="true">#</a> 统计函数</h2><h3 id="order-by-对结果进行排序" tabindex="-1"><a class="header-anchor" href="#order-by-对结果进行排序" aria-hidden="true">#</a> Order By 对结果进行排序</h3><p>语法：<code>select 条目 from 表名 [条件筛选 where] order by 根据哪个字段 asc|desc</code></p><p>ASC 升序（默认） 、DESC 降序</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 根据数学成绩升序排列</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">order</span> <span class="token keyword">by</span> math<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>
<span class="token operator">|</span> name      <span class="token operator">|</span> chinese <span class="token operator">|</span> math <span class="token operator">|</span> english <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>
<span class="token operator">|</span> 老李      <span class="token operator">|</span>      <span class="token number">40</span> <span class="token operator">|</span>   <span class="token number">30</span> <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>
<span class="token operator">|</span> 张三      <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>   <span class="token number">50</span> <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>
<span class="token operator">|</span> 特朗普    <span class="token operator">|</span>       <span class="token number">0</span> <span class="token operator">|</span>   <span class="token number">60</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">|</span> 张飞      <span class="token operator">|</span>      <span class="token number">60</span> <span class="token operator">|</span>   <span class="token number">63</span> <span class="token operator">|</span>      <span class="token number">53</span> <span class="token operator">|</span>
<span class="token operator">|</span> 李四      <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>   <span class="token number">80</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">|</span> 老韩      <span class="token operator">|</span>      <span class="token number">60</span> <span class="token operator">|</span>   <span class="token number">80</span> <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">|</span> 蔡老狗    <span class="token operator">|</span>      <span class="token number">60</span> <span class="token operator">|</span>   <span class="token number">80</span> <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>
<span class="token operator">|</span> 王老五    <span class="token operator">|</span>      <span class="token number">75</span> <span class="token operator">|</span>   <span class="token number">99</span> <span class="token operator">|</span>     <span class="token number">105</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+---------+------+---------+</span>

<span class="token comment"># 加上where筛选器 根据语文成绩升序排序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">&quot;张%&quot;</span> <span class="token keyword">order</span> <span class="token keyword">by</span> chinese <span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+---------+------+---------+</span>
<span class="token operator">|</span> name   <span class="token operator">|</span> chinese <span class="token operator">|</span> math <span class="token operator">|</span> english <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+------+---------+</span>
<span class="token operator">|</span> 张飞   <span class="token operator">|</span>      <span class="token number">60</span> <span class="token operator">|</span>   <span class="token number">63</span> <span class="token operator">|</span>      <span class="token number">53</span> <span class="token operator">|</span>
<span class="token operator">|</span> 张三   <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>   <span class="token number">50</span> <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+------+---------+</span>


<span class="token comment"># 降序</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">&quot;张%&quot;</span> <span class="token keyword">order</span> <span class="token keyword">by</span> chinese <span class="token keyword">desc</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+---------+------+---------+</span>
<span class="token operator">|</span> name   <span class="token operator">|</span> chinese <span class="token operator">|</span> math <span class="token operator">|</span> english <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+------+---------+</span>
<span class="token operator">|</span> 张三   <span class="token operator">|</span>     <span class="token number">100</span> <span class="token operator">|</span>   <span class="token number">50</span> <span class="token operator">|</span>      <span class="token number">50</span> <span class="token operator">|</span>
<span class="token operator">|</span> 张飞   <span class="token operator">|</span>      <span class="token number">60</span> <span class="token operator">|</span>   <span class="token number">63</span> <span class="token operator">|</span>      <span class="token number">53</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+------+---------+</span>

<span class="token comment"># 根据总分进行升序排序 as 可以定义局部变量</span>
<span class="token keyword">select</span> name<span class="token punctuation">,</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span> <span class="token keyword">as</span> total_sorce <span class="token keyword">from</span> student <span class="token keyword">order</span> <span class="token keyword">by</span> total_sorce<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+-------------+</span>
<span class="token operator">|</span> name      <span class="token operator">|</span> total_sorce <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+-------------+</span>
<span class="token operator">|</span> 老李      <span class="token operator">|</span>         <span class="token number">120</span> <span class="token operator">|</span>
<span class="token operator">|</span> 特朗普    <span class="token operator">|</span>         <span class="token number">160</span> <span class="token operator">|</span>
<span class="token operator">|</span> 张飞      <span class="token operator">|</span>         <span class="token number">176</span> <span class="token operator">|</span>
<span class="token operator">|</span> 蔡老狗    <span class="token operator">|</span>         <span class="token number">190</span> <span class="token operator">|</span>
<span class="token operator">|</span> 张三      <span class="token operator">|</span>         <span class="token number">200</span> <span class="token operator">|</span>
<span class="token operator">|</span> 李四      <span class="token operator">|</span>         <span class="token number">230</span> <span class="token operator">|</span>
<span class="token operator">|</span> 老韩      <span class="token operator">|</span>         <span class="token number">240</span> <span class="token operator">|</span>
<span class="token operator">|</span> 王老五    <span class="token operator">|</span>         <span class="token number">279</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+-------------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="count-合并、统计函数" tabindex="-1"><a class="header-anchor" href="#count-合并、统计函数" aria-hidden="true">#</a> Count-合并、统计函数</h3><p>语法：<code>select count(*)|count(列名) from 表名 [可选 where等]</code></p><p>count(*)和count(列名)的区别</p><ul><li>count(*) 返回满足条件的记录的行数，不会排除值为null的 <ul><li>比如说一个人姓名年龄age之类的所有信息都为null，依然也会计入+1</li></ul></li><li>count(列名) 统计满足条件的某列有多少个，会排除值为null的 <ul><li>比如说要统计age 然后有一个人的age为null，则这个人将不会算入其中，不会+1</li></ul></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">#统计学生表共有多少行</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> count <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+</span>
<span class="token operator">|</span> count <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+</span>
<span class="token operator">|</span>     <span class="token number">8</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+</span>

<span class="token comment"># 统计数学成绩大于等于80的学生有多少</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token keyword">as</span> count <span class="token keyword">from</span> student <span class="token keyword">where</span> math <span class="token operator">&gt;=</span><span class="token number">80</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+</span>
<span class="token operator">|</span> count <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+</span>
<span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+</span>

<span class="token comment"># 统计总分大于200的人数有多少</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> <span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">200</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+</span>
<span class="token operator">|</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+</span>
<span class="token operator">|</span>        <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="sum-合计函数-计算数值的总合" tabindex="-1"><a class="header-anchor" href="#sum-合计函数-计算数值的总合" aria-hidden="true">#</a> SUM- 合计函数-计算数值的总合</h3><p>该函数满足where条件的行的和，一般用于数值列</p><p>语法：<code>select sum(列名)，{sum(列名)...} from 表名 [where筛选器]</code></p><p>只能对数值使用，否则会报错</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 计算数学的总成绩</span>
<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token string">&quot;数学&quot;</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+</span>
<span class="token operator">|</span> 数学   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+</span>
<span class="token operator">|</span>    <span class="token number">542</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+</span>

<span class="token comment">#统计语文，数学，英语各科的总成绩</span>
<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>chinese<span class="token punctuation">)</span> <span class="token string">&quot;语文&quot;</span><span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token string">&quot;数学&quot;</span><span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>english<span class="token punctuation">)</span> <span class="token string">&quot;英语&quot;</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+--------+--------+</span>
<span class="token operator">|</span> 语文   <span class="token operator">|</span> 数学   <span class="token operator">|</span> 英语   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+--------+</span>
<span class="token operator">|</span>    <span class="token number">445</span> <span class="token operator">|</span>    <span class="token number">542</span> <span class="token operator">|</span>    <span class="token number">608</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+--------+</span>

<span class="token comment">#统计语文数学英语的成绩总和</span>
<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span> <span class="token string">&quot;总分&quot;</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+</span>
<span class="token operator">|</span> 总分   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+</span>
<span class="token operator">|</span>   <span class="token number">1595</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+</span>


<span class="token comment">#统计平均分</span>
<span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span><span class="token operator">/</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token string">&quot;平均分&quot;</span> <span class="token keyword">from</span> student <span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+</span>
<span class="token operator">|</span> 平均分    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+</span>
<span class="token operator">|</span>  <span class="token number">199.3750</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="avg-合计函数-求平均值" tabindex="-1"><a class="header-anchor" href="#avg-合计函数-求平均值" aria-hidden="true">#</a> AVG-合计函数-求平均值</h3><p>返回满足where条件的一列的平均值</p><p>语法：<code>select avg(列名){avg(列名)...} from 表名 [where]</code></p><p>只能对数值使用</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 求数学平均分;</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&quot;数学平均分&quot;</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------------+</span>
<span class="token operator">|</span> 数学平均分       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+</span>
<span class="token operator">|</span>         <span class="token number">67.7500</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+</span>

<span class="token comment"># 总平均分</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&quot;总平均分&quot;</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token operator">|</span> 总平均分      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token operator">|</span>     <span class="token number">199.3750</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="max-min-合计函数-返回最大最小值" tabindex="-1"><a class="header-anchor" href="#max-min-合计函数-返回最大最小值" aria-hidden="true">#</a> Max/Min-合计函数-返回最大最小值</h3><p>返回满足where条件列的最大、最小值</p><p>语法：<code>select max|min(列名) from 表名 [where]</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">#求一个班级的总最高分和总最低分</span>
<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span> <span class="token string">&quot;最高分&quot;</span><span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>chinese<span class="token operator">+</span>math<span class="token operator">+</span>english<span class="token punctuation">)</span> <span class="token string">&quot;最低分&quot;</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------+-----------+</span>
<span class="token operator">|</span> 最高分    <span class="token operator">|</span> 最低分    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+-----------+</span>
<span class="token operator">|</span>       <span class="token number">279</span> <span class="token operator">|</span>       <span class="token number">120</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+-----------+</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="group-by-having-分组-过滤" tabindex="-1"><a class="header-anchor" href="#group-by-having-分组-过滤" aria-hidden="true">#</a> Group By+Having-分组+过滤</h3><p>语法：<code>select 字段1,字段2,... from 表名 [where筛选器] group by 字段</code></p><p>可选，使用having字句对分组后的结果进行过滤 一般情况下group by和having是形影不离的</p><p><code>select 字段1,字段2,... from 表名 group by 字段 having...</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 先分别建立好几张表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> dept<span class="token punctuation">(</span> <span class="token comment">/*部门表*/</span>
 deptno <span class="token keyword">MEDIUMINT</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">,</span>
    dname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    loc <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> dept <span class="token keyword">values</span>
<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&quot;ACCOUNTING&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;NEW Work&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token string">&quot;RESEARCH&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;DALLAS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span><span class="token string">&quot;SALES&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;CHICAGO&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token number">40</span><span class="token punctuation">,</span><span class="token string">&quot;OPERATIONS&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;BOSTON&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 员工表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> emp<span class="token punctuation">(</span>
 empno <span class="token keyword">mediumint</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">/*编号*/</span>
    ename <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token comment">/*名字*/</span>
    job <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token comment">/*工作*/</span>
    mgr <span class="token keyword">mediumint</span> <span class="token keyword">unsigned</span><span class="token punctuation">,</span><span class="token comment">/*上级编号*/</span>
    hiredate <span class="token keyword">DATE</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">/*入职时间*/</span>
    sal <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">/*薪水*/</span>
    comm <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">/*红利*/</span>
    deptno <span class="token keyword">mediumint</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token comment">/*部门编号*/</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token keyword">values</span>
 <span class="token punctuation">(</span><span class="token number">7369</span><span class="token punctuation">,</span><span class="token string">&#39;SMITH&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;CLERK&#39;</span><span class="token punctuation">,</span><span class="token number">7902</span><span class="token punctuation">,</span><span class="token string">&#39;1990-12-17&#39;</span><span class="token punctuation">,</span><span class="token number">800.00</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">7521</span><span class="token punctuation">,</span><span class="token string">&#39;WARD&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;SALESMAN&#39;</span><span class="token punctuation">,</span><span class="token number">7698</span><span class="token punctuation">,</span><span class="token string">&#39;1991-2-20&#39;</span><span class="token punctuation">,</span><span class="token number">1600.00</span><span class="token punctuation">,</span><span class="token number">300.00</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">7566</span><span class="token punctuation">,</span><span class="token string">&#39;JONES&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;SALESMAN&#39;</span><span class="token punctuation">,</span><span class="token number">7698</span><span class="token punctuation">,</span><span class="token string">&#39;1991-2-22&#39;</span><span class="token punctuation">,</span><span class="token number">2100.02</span><span class="token punctuation">,</span><span class="token number">500.00</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">7654</span><span class="token punctuation">,</span><span class="token string">&#39;MARTIN&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;MANAGER&#39;</span><span class="token punctuation">,</span><span class="token number">7939</span><span class="token punctuation">,</span><span class="token string">&#39;1991-9-28&#39;</span><span class="token punctuation">,</span><span class="token number">645.20</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">7782</span><span class="token punctuation">,</span><span class="token string">&#39;BLACK&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;SALESMAN&#39;</span><span class="token punctuation">,</span><span class="token number">7698</span><span class="token punctuation">,</span><span class="token string">&#39;1995-10-17&#39;</span><span class="token punctuation">,</span><span class="token number">625.00</span><span class="token punctuation">,</span><span class="token number">1250.00</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">7788</span><span class="token punctuation">,</span><span class="token string">&#39;COALK&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;MANAGER&#39;</span><span class="token punctuation">,</span><span class="token number">7698</span><span class="token punctuation">,</span><span class="token string">&#39;1997-4-19&#39;</span><span class="token punctuation">,</span><span class="token number">3954.20</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">7839</span><span class="token punctuation">,</span><span class="token string">&#39;SOCTT&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;MANAGER&#39;</span><span class="token punctuation">,</span><span class="token number">7939</span><span class="token punctuation">,</span><span class="token string">&#39;1991-12-3&#39;</span><span class="token punctuation">,</span><span class="token number">2681.30</span><span class="token punctuation">,</span><span class="token number">2450.00</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">7844</span><span class="token punctuation">,</span><span class="token string">&#39;KING&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;ANALYST&#39;</span><span class="token punctuation">,</span><span class="token number">7566</span><span class="token punctuation">,</span><span class="token string">&#39;1992-5-7&#39;</span><span class="token punctuation">,</span><span class="token number">1564.60</span><span class="token punctuation">,</span><span class="token number">211.00</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">7900</span><span class="token punctuation">,</span><span class="token string">&#39;TURNER&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;PRESIDENT&#39;</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token string">&#39;1888-1-1&#39;</span><span class="token punctuation">,</span><span class="token number">2435.00</span><span class="token punctuation">,</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">7902</span><span class="token punctuation">,</span><span class="token string">&#39;JAMES&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;CLERK&#39;</span><span class="token punctuation">,</span><span class="token number">7698</span><span class="token punctuation">,</span><span class="token string">&#39;1996-1-13&#39;</span><span class="token punctuation">,</span><span class="token number">433.10</span><span class="token punctuation">,</span><span class="token number">255.52</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">7934</span><span class="token punctuation">,</span><span class="token string">&#39;FORD&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;ANALYST&#39;</span><span class="token punctuation">,</span><span class="token number">7566</span><span class="token punctuation">,</span><span class="token string">&#39;1990-6-3&#39;</span><span class="token punctuation">,</span><span class="token number">6321.50</span><span class="token punctuation">,</span><span class="token number">153.025</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">7966</span><span class="token punctuation">,</span><span class="token string">&#39;MILLER&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;CLERK&#39;</span><span class="token punctuation">,</span><span class="token number">7782</span><span class="token punctuation">,</span><span class="token string">&#39;1991-10-12&#39;</span><span class="token punctuation">,</span><span class="token number">735.05</span><span class="token punctuation">,</span><span class="token number">453.25</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#工资级别表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> salgrade<span class="token punctuation">(</span>
 grade <span class="token keyword">mediumint</span> <span class="token keyword">unsigned</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">/*工资级别*/</span>
    losal <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token comment">/*该级别的最低工资*/</span>
    hisal <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token comment">/*该级别的最高工资*/</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> salgrade <span class="token keyword">values</span>
 <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token number">1200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1201</span><span class="token punctuation">,</span><span class="token number">1400</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1401</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2001</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3001</span><span class="token punctuation">,</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>接下来使用Group By+Having完成一系列操作</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 显示每个部门的平均和最高工资,按照部门来分组查询 并从低到高排序</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token string">&quot;平均工资&quot;</span><span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token string">&quot;最高工资&quot;</span><span class="token punctuation">,</span>deptno <span class="token string">&quot;部门分组&quot;</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno <span class="token keyword">order</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+</span>
<span class="token operator">|</span> 平均工资       <span class="token operator">|</span> 最高工资      <span class="token operator">|</span> 部门分组      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+</span>
<span class="token operator">|</span>  <span class="token number">3946.766667</span> <span class="token operator">|</span>      <span class="token number">6321.50</span> <span class="token operator">|</span>           <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1004.950000</span> <span class="token operator">|</span>      <span class="token number">2681.30</span> <span class="token operator">|</span>           <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1690.005000</span> <span class="token operator">|</span>      <span class="token number">2435.00</span> <span class="token operator">|</span>           <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+</span>

<span class="token comment">#显示 每个部门 的 每种岗位 的 平均工资 和 最低工资</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token string">&quot;平均工资&quot;</span><span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token string">&quot;最低工资&quot;</span><span class="token punctuation">,</span>deptno <span class="token string">&quot;部门分组&quot;</span><span class="token punctuation">,</span>job <span class="token string">&quot;岗位&quot;</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">,</span>job <span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+-----------+</span>
<span class="token operator">|</span> 平均工资      <span class="token operator">|</span> 最低工资      <span class="token operator">|</span> 部门分组       <span class="token operator">|</span> 岗位      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+-----------+</span>
<span class="token operator">|</span>   <span class="token number">675.800000</span> <span class="token operator">|</span>       <span class="token number">433.10</span> <span class="token operator">|</span>           <span class="token number">20</span> <span class="token operator">|</span> CLERK     <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1441.673333</span> <span class="token operator">|</span>       <span class="token number">625.00</span> <span class="token operator">|</span>           <span class="token number">30</span> <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">1663.250000</span> <span class="token operator">|</span>       <span class="token number">645.20</span> <span class="token operator">|</span>           <span class="token number">20</span> <span class="token operator">|</span> MANAGER   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3954.200000</span> <span class="token operator">|</span>      <span class="token number">3954.20</span> <span class="token operator">|</span>           <span class="token number">10</span> <span class="token operator">|</span> MANAGER   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3943.050000</span> <span class="token operator">|</span>      <span class="token number">1564.60</span> <span class="token operator">|</span>           <span class="token number">10</span> <span class="token operator">|</span> ANALYST   <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2435.000000</span> <span class="token operator">|</span>      <span class="token number">2435.00</span> <span class="token operator">|</span>           <span class="token number">30</span> <span class="token operator">|</span> PRESIDENT <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+-----------+</span>

<span class="token comment"># 显示平均工资低于2000的部门号和它的平均工资 使用了having</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">as</span> sal_avg<span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno <span class="token keyword">having</span> sal_avg<span class="token operator">&lt;</span><span class="token number">2000</span> <span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------+--------+</span>
<span class="token operator">|</span> sal_avg     <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------+--------+</span>
<span class="token operator">|</span> <span class="token number">1004.950000</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">1690.005000</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------+--------+</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+A+'" alt="image-20211121154510850" tabindex="0" loading="lazy"><figcaption>image-20211121154510850</figcaption></figure><h2 id="字符串函数" tabindex="-1"><a class="header-anchor" href="#字符串函数" aria-hidden="true">#</a> 字符串函数</h2><figure><img src="'+N+`" alt="image-20211121154625191" tabindex="0" loading="lazy"><figcaption>image-20211121154625191</figcaption></figure><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">#返回字串字符集</span>
<span class="token keyword">select</span> <span class="token keyword">charset</span><span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment">#utf8mb3就是utf8</span>
<span class="token operator">+</span><span class="token comment">----------------+</span>
<span class="token operator">|</span> <span class="token keyword">charset</span><span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------+</span>
<span class="token operator">|</span> utf8mb3        <span class="token operator">|</span>
<span class="token operator">|</span> utf8mb3        <span class="token operator">|</span>
<span class="token operator">|</span> utf8mb3        <span class="token operator">|</span>
<span class="token operator">|</span> utf8mb3        <span class="token operator">|</span>
<span class="token operator">|</span> utf8mb3        <span class="token operator">|</span>
<span class="token operator">|</span> utf8mb3        <span class="token operator">|</span>
<span class="token operator">|</span> utf8mb3        <span class="token operator">|</span>
<span class="token operator">|</span> utf8mb3        <span class="token operator">|</span>
<span class="token operator">|</span> utf8mb3        <span class="token operator">|</span>
<span class="token operator">|</span> utf8mb3        <span class="token operator">|</span>
<span class="token operator">|</span> utf8mb3        <span class="token operator">|</span>
<span class="token operator">|</span> utf8mb3        <span class="token operator">|</span>
<span class="token operator">|</span> utf8mb3        <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------+</span>

<span class="token comment">#拼接字段</span>
<span class="token keyword">select</span> concat<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token string">&quot;工作是&quot;</span><span class="token punctuation">,</span>job<span class="token punctuation">)</span> <span class="token string">&quot;姓名和工作&quot;</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------------+</span>
<span class="token operator">|</span> 姓名和工作               <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------+</span>
<span class="token operator">|</span> SMITH工作是CLERK         <span class="token operator">|</span>
<span class="token operator">|</span> WARD工作是SALESMAN       <span class="token operator">|</span>
<span class="token operator">|</span> JONES工作是SALESMAN      <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN工作是MANAGER      <span class="token operator">|</span>
<span class="token operator">|</span> BLACK工作是SALESMAN      <span class="token operator">|</span>
<span class="token operator">|</span> COALK工作是MANAGER       <span class="token operator">|</span>
<span class="token operator">|</span> SOCTT工作是MANAGER       <span class="token operator">|</span>
<span class="token operator">|</span> KING工作是ANALYST        <span class="token operator">|</span>
<span class="token operator">|</span> TURNER工作是PRESIDENT    <span class="token operator">|</span>
<span class="token operator">|</span> JAMES工作是CLERK         <span class="token operator">|</span>
<span class="token operator">|</span> FORD工作是ANALYST        <span class="token operator">|</span>
<span class="token operator">|</span> MILLER工作是CLERK        <span class="token operator">|</span>
<span class="token operator">|</span> MILLER工作是CLERK        <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------------+</span>

<span class="token comment"># 查询  字段2 在字段1中出现的位置，没有则返回0</span>
<span class="token keyword">select</span> instr<span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">,</span><span class="token string">&#39;world&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------------------+</span>
<span class="token operator">|</span> instr<span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">,</span><span class="token string">&#39;world&#39;</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------------+</span>
<span class="token operator">|</span>                            <span class="token number">7</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------------+</span>

<span class="token comment">#转换成小写</span>
<span class="token keyword">select</span> <span class="token function">lcase</span><span class="token punctuation">(</span><span class="token string">&quot;ABCEDf&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------------+</span>
<span class="token operator">|</span> <span class="token function">lcase</span><span class="token punctuation">(</span><span class="token string">&quot;ABCEDf&quot;</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+</span>
<span class="token operator">|</span> abcedf          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+</span>

<span class="token comment">#转换成大写</span>
<span class="token keyword">select</span> <span class="token function">ucase</span><span class="token punctuation">(</span><span class="token string">&quot;dlkjkl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------------+</span>
<span class="token operator">|</span> <span class="token function">lcase</span><span class="token punctuation">(</span><span class="token string">&quot;ABCEDf&quot;</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+</span>
<span class="token operator">|</span> abcedf          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------+</span>

<span class="token comment">#从某个字符串取n个字符出来（左边开始取）</span>
<span class="token keyword">select</span> <span class="token keyword">left</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-----------------------+</span>
<span class="token operator">|</span> <span class="token keyword">left</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------------+</span>
<span class="token operator">|</span> hell                  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------------+</span>

<span class="token comment">#right 和上方同理，不过是从右边开始取</span>


<span class="token comment"># 返回str的长度 （按照字节）</span>
<span class="token keyword">select</span> length<span class="token punctuation">(</span><span class="token string">&quot;世界你好&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>
<span class="token operator">|</span> length<span class="token punctuation">(</span><span class="token string">&quot;世界你好&quot;</span><span class="token punctuation">)</span>     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>
<span class="token operator">|</span>                     <span class="token number">12</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>

<span class="token comment"># 将hello world 中的hello 替换为 你好</span>
<span class="token keyword">select</span> <span class="token keyword">replace</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;你好&quot;</span><span class="token punctuation">)</span> <span class="token string">&quot;Replace&quot;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token operator">|</span> <span class="token keyword">Replace</span>      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token operator">|</span> 你好 world   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>

<span class="token comment">#逐字符比较两字符串大小;</span>
<span class="token keyword">select</span> strcmp<span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment"># 返回0</span>
<span class="token keyword">select</span> strcmp<span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;jello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment"># -1 右边比左边大返回负数，左边比右边大返回正数</span>

<span class="token comment">#截取字符串--&gt;我想从hello中截取ell---&gt; string,startindex,length</span>
<span class="token keyword">select</span> substring<span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>
<span class="token operator">|</span> substring<span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>
<span class="token operator">|</span> ell                    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------+</span>
<span class="token comment">#截取第二位开始及后面所有---&gt; string,startindex</span>
<span class="token operator">+</span><span class="token comment">----------------------+</span>
<span class="token operator">|</span> substring<span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+</span>
<span class="token operator">|</span> ello                 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+</span>

<span class="token comment"># 取出前端空格 ltrim 右端空格 rtrim 前后端空格一起去除 trim</span>
<span class="token keyword">select</span> trim<span class="token punctuation">(</span><span class="token string">&quot;  测试   &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>
<span class="token operator">|</span> trim<span class="token punctuation">(</span><span class="token string">&quot;  测试   &quot;</span><span class="token punctuation">)</span>   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>
<span class="token operator">|</span> 测试                <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>


<span class="token comment"># 以首字母大写，其余字母小写的形式显示所有员工名</span>
<span class="token keyword">select</span> concat<span class="token punctuation">(</span><span class="token function">ucase</span><span class="token punctuation">(</span><span class="token keyword">left</span><span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">lcase</span><span class="token punctuation">(</span>substring<span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token string">&quot;员工姓名&quot;</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token operator">|</span> 员工姓名     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token operator">|</span> Smith        <span class="token operator">|</span>
<span class="token operator">|</span> Ward         <span class="token operator">|</span>
<span class="token operator">|</span> Jones        <span class="token operator">|</span>
<span class="token operator">|</span> Martin       <span class="token operator">|</span>
<span class="token operator">|</span> Black        <span class="token operator">|</span>
<span class="token operator">|</span> Coalk        <span class="token operator">|</span>
<span class="token operator">|</span> Soctt        <span class="token operator">|</span>
<span class="token operator">|</span> King         <span class="token operator">|</span>
<span class="token operator">|</span> Turner       <span class="token operator">|</span>
<span class="token operator">|</span> James        <span class="token operator">|</span>
<span class="token operator">|</span> Ford         <span class="token operator">|</span>
<span class="token operator">|</span> Miller       <span class="token operator">|</span>
<span class="token operator">|</span> Miller       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="数学相关函数" tabindex="-1"><a class="header-anchor" href="#数学相关函数" aria-hidden="true">#</a> 数学相关函数</h2><figure><img src="`+_+`" alt="image-20211121163030748" tabindex="0" loading="lazy"><figcaption>image-20211121163030748</figcaption></figure><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 比较简单的这里不写了，写一些看起来难理解的</span>

<span class="token comment">#将10进制的8，转换成2进制输出</span>
<span class="token keyword">select</span> conv<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token operator">|</span> conv<span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token operator">|</span> <span class="token number">1000</span>         <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token comment">#将16进制的9，转换为2进制输出</span>
<span class="token keyword">select</span> conv<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token operator">|</span> conv<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span><span class="token number">16</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>
<span class="token operator">|</span> <span class="token number">1001</span>         <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+</span>

<span class="token comment">#将2进制的10001，转换成10进制</span>
<span class="token keyword">select</span> conv<span class="token punctuation">(</span><span class="token number">10001</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------+</span>
<span class="token operator">|</span> conv<span class="token punctuation">(</span><span class="token number">10001</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+</span>
<span class="token operator">|</span> <span class="token number">17</span>               <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+</span>

<span class="token comment"># 保留小数位数 只保留两位（自动四舍五入）</span>
<span class="token keyword">select</span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token number">78.12543</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span> <span class="token function">format</span><span class="token punctuation">(</span><span class="token number">78.12543</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span> <span class="token number">78.13</span>              <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>


<span class="token comment"># 取 1 -1 5 15 35 0 -200 之中最小的值</span>
<span class="token keyword">select</span> least<span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">,</span><span class="token number">15</span> <span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">200</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------------------------+</span>
<span class="token operator">|</span> least<span class="token punctuation">(</span> <span class="token number">1</span> <span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">5</span> <span class="token punctuation">,</span><span class="token number">15</span> <span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">200</span> <span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------------------+</span>
<span class="token operator">|</span>                               <span class="token operator">-</span><span class="token number">200</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------------------------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token comment"># 生成一个随机数，范围在0&lt;=number&lt;=1.0</span>
<span class="token keyword">select</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span>             <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span> <span class="token number">0.3412554928485821</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+ </span>

<span class="token comment"># 可以通过给定种子，让每次生成的随机数都一样</span>
<span class="token keyword">select</span> rand<span class="token punctuation">(</span><span class="token number">232332323</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#无论执行多少次，都将只会生成0.08963447072509162</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>
<span class="token operator">|</span> rand<span class="token punctuation">(</span><span class="token number">232332323</span><span class="token punctuation">)</span>     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>
<span class="token operator">|</span> <span class="token number">0.08963447072509162</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="时间日期相关函数" tabindex="-1"><a class="header-anchor" href="#时间日期相关函数" aria-hidden="true">#</a> 时间日期相关函数</h2><figure><img src="`+x+'" alt="image-20211121165926182" tabindex="0" loading="lazy"><figcaption>image-20211121165926182</figcaption></figure><figure><img src="'+R+'" alt="image-20211121172736581" tabindex="0" loading="lazy"><figcaption>image-20211121172736581</figcaption></figure><figure><img src="'+M+'" alt="image-20211121172709333" tabindex="0" loading="lazy"><figcaption>image-20211121172709333</figcaption></figure><figure><img src="'+T+'" alt="image-20211121173857683" tabindex="0" loading="lazy"><figcaption>image-20211121173857683</figcaption></figure><figure><img src="'+I+`" alt="image-20211121173952348" tabindex="0" loading="lazy"><figcaption>image-20211121173952348</figcaption></figure><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> mes<span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span>content <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">,</span>send_time <span class="token keyword">DATETIME</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#添加一条记录，时间为当前时间</span>
<span class="token comment"># 使用current_timestamp</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> mes <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;北京新闻&quot;</span><span class="token punctuation">,</span><span class="token keyword">current_timestamp</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#使用now()</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> mes <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;上海新闻&quot;</span><span class="token punctuation">,</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">------+--------------+---------------------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> content      <span class="token operator">|</span> send_time           <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------------+---------------------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 北京新闻     <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">17</span>:<span class="token number">03</span>:<span class="token number">26</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 上海新闻     <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">17</span>:<span class="token number">06</span>:<span class="token number">14</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------------+---------------------+</span>


<span class="token comment"># 显示所有的新闻信息，和发布日期，只显示日期，不显示时间</span>
<span class="token keyword">select</span> content<span class="token punctuation">,</span><span class="token keyword">date</span><span class="token punctuation">(</span>send_time<span class="token punctuation">)</span> <span class="token keyword">from</span> mes<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+-----------------+</span>
<span class="token operator">|</span> content      <span class="token operator">|</span> <span class="token keyword">date</span><span class="token punctuation">(</span>send_time<span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+-----------------+</span>
<span class="token operator">|</span> 北京新闻     <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">21</span>      <span class="token operator">|</span>
<span class="token operator">|</span> 上海新闻     <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">21</span>      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+-----------------+</span>

<span class="token comment"># 查询十分钟内发布的新闻</span>
<span class="token comment"># 2021年11月21日17:10:42</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> mes <span class="token keyword">where</span> date_add<span class="token punctuation">(</span>send_time<span class="token punctuation">,</span><span class="token keyword">interval</span> <span class="token number">10</span> <span class="token keyword">minute</span><span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+--------------+---------------------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> content      <span class="token operator">|</span> send_time           <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------------+---------------------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 北京新闻     <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">17</span>:<span class="token number">03</span>:<span class="token number">26</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> 上海新闻     <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">21</span> <span class="token number">17</span>:<span class="token number">06</span>:<span class="token number">14</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------------+---------------------+</span>


<span class="token comment"># 2011-11-1和1990-1-1相差多少天</span>
<span class="token keyword">select</span> datediff<span class="token punctuation">(</span><span class="token string">&#39;2011-11-1&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;1990-1-1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------------------------------+</span>
<span class="token operator">|</span> datediff<span class="token punctuation">(</span><span class="token string">&#39;2011-11-1&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;1990-1-1&#39;</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------------------+</span>
<span class="token operator">|</span>                             <span class="token number">7974</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------------------+</span>

<span class="token comment">#使用mysql语句，查询自己活了多少天</span>
<span class="token keyword">select</span> datediff<span class="token punctuation">(</span><span class="token keyword">current_date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;2001-8-7&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------------------------------+</span>
<span class="token operator">|</span> datediff<span class="token punctuation">(</span><span class="token keyword">current_date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;2001-8-7&#39;</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------------+</span>
<span class="token operator">|</span>                                <span class="token number">7411</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------------+</span>

<span class="token comment">#如果我能活到80岁，算出我还能活多少天</span>
<span class="token comment"># 80岁的年份</span>
<span class="token keyword">select</span> date_add<span class="token punctuation">(</span><span class="token string">&#39;2011-8-7&#39;</span><span class="token punctuation">,</span><span class="token keyword">interval</span> <span class="token number">80</span> <span class="token keyword">year</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#80岁的年份-已经活了的天数</span>
<span class="token keyword">select</span>  datediff<span class="token punctuation">(</span>date_add<span class="token punctuation">(</span><span class="token string">&#39;2011-8-7&#39;</span><span class="token punctuation">,</span><span class="token keyword">interval</span> <span class="token number">80</span> <span class="token keyword">year</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------------------------------------------------+</span>
<span class="token operator">|</span> datediff<span class="token punctuation">(</span>date_add<span class="token punctuation">(</span><span class="token string">&#39;2011-8-7&#39;</span><span class="token punctuation">,</span><span class="token keyword">interval</span> <span class="token number">80</span> <span class="token keyword">year</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------------------------------+</span>
<span class="token operator">|</span>                                                 <span class="token number">25461</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------------------------------------+</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="加密函数和系统函数" tabindex="-1"><a class="header-anchor" href="#加密函数和系统函数" aria-hidden="true">#</a> 加密函数和系统函数</h2><figure><img src="`+C+'" alt="image-20211121174113576" tabindex="0" loading="lazy"><figcaption>image-20211121174113576</figcaption></figure>',48),sn={href:"https://blog.csdn.net/rocky1996/article/details/75283826",target:"_blank",rel:"noopener noreferrer"},nn={href:"https://www.cnblogs.com/gjc592/p/9681093.html",target:"_blank",rel:"noopener noreferrer"},an=p(`<div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 查询用户</span>
<span class="token comment">#  可以查询到登陆到mysql的有哪些用户，以及登陆的IP</span>
<span class="token keyword">select</span> <span class="token keyword">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------------+</span>
<span class="token operator">|</span> <span class="token keyword">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span>         <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------+</span>
<span class="token operator">|</span> root<span class="token variable">@localhost</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------+ </span>

<span class="token comment">#查询当前使用的数据库名称</span>
<span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------+</span>
<span class="token operator">|</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+</span>
<span class="token operator">|</span> db1        <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+</span>

<span class="token comment">#为字符串算出一个md5 32的字符串，常用的对用户密码的加密方式; 固定的三十二位字符</span>
<span class="token comment">#当然，正常工作中，这个md5加密加密的是已经加密的用户密码；（多重套娃加密一样）</span>
<span class="token keyword">select</span> md5<span class="token punctuation">(</span><span class="token number">123456789</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------------------------------+</span>
<span class="token operator">|</span> md5<span class="token punctuation">(</span><span class="token number">123456789</span><span class="token punctuation">)</span>                   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------------------+</span>
<span class="token operator">|</span> <span class="token number">25</span>f9e794323b453885f5181f1b624d0b <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------------------+</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> myuser<span class="token punctuation">(</span>name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">,</span>password <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> myuser <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span>md5<span class="token punctuation">(</span><span class="token number">123456879</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+----------------------------------+</span>
<span class="token operator">|</span> name  <span class="token operator">|</span> password                         <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+----------------------------------+</span>
<span class="token operator">|</span> admin <span class="token operator">|</span> <span class="token number">97</span>b290acab82d5937fb87a28b06181a3 <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+----------------------------------+</span>

<span class="token comment">#一般验证用户的时候应该是 类似于这样的</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> myuser <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">&quot;admin&quot;</span> <span class="token operator">and</span> password<span class="token operator">=</span>md5<span class="token punctuation">(</span><span class="token number">123456879</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># password(str) 加密函数</span>
<span class="token keyword">SELECT</span> PASSWORD<span class="token punctuation">(</span><span class="token string">&quot;123456789&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#当然，mysql8.0开始就移除了这个函数，今天刚刚发现的，如果再使用PASSWORD会报错:You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near</span>
<span class="token comment">#可以使用SHA1替代</span>



</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="流程控制函数-if-ifnull-case" tabindex="-1"><a class="header-anchor" href="#流程控制函数-if-ifnull-case" aria-hidden="true">#</a> 流程控制函数-IF-IFNULL-CASE</h2><p>if类似于三元表达式</p><p>ifnull类似于if</p><p>case类似于 套娃版三元表达式</p><figure><img src="`+O+`" alt="image-20211121205018177" tabindex="0" loading="lazy"><figcaption>image-20211121205018177</figcaption></figure><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># if语句的基本使用：</span>
<span class="token keyword">select</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token string">&#39;北京&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;上海&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token string">&#39;北京&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;上海&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------------------------+-----------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token string">&#39;北京&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;上海&#39;</span><span class="token punctuation">)</span>     <span class="token operator">|</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token string">&#39;北京&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;上海&#39;</span><span class="token punctuation">)</span>     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------------+-----------------------------+</span>
<span class="token operator">|</span> 北京                       <span class="token operator">|</span> 上海                        <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------------+-----------------------------+</span>

<span class="token comment"># ifnull</span>
<span class="token keyword">select</span> ifnull<span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ifnull<span class="token punctuation">(</span><span class="token string">&#39;world&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------------------------+</span>
<span class="token operator">|</span> ifnull<span class="token punctuation">(</span><span class="token boolean">null</span><span class="token punctuation">,</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span> <span class="token operator">|</span> ifnull<span class="token punctuation">(</span><span class="token string">&#39;world&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------------------------+</span>
<span class="token operator">|</span> hello                <span class="token operator">|</span> world                   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+-------------------------+</span>

<span class="token comment"># 进阶使用及when case的用法：数据源：</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
<span class="token operator">|</span> empno <span class="token operator">|</span> ename  <span class="token operator">|</span> job       <span class="token operator">|</span> mgr  <span class="token operator">|</span> hiredate   <span class="token operator">|</span> sal     <span class="token operator">|</span> comm    <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
<span class="token operator">|</span>  <span class="token number">7369</span> <span class="token operator">|</span> SMITH  <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7902</span> <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7521</span> <span class="token operator">|</span> WARD   <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">20</span> <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>  <span class="token number">300.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7566</span> <span class="token operator">|</span> JONES  <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">22</span> <span class="token operator">|</span> <span class="token number">2100.02</span> <span class="token operator">|</span>  <span class="token number">500.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7654</span> <span class="token operator">|</span> MARTIN <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7939</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">28</span> <span class="token operator">|</span>  <span class="token number">645.20</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7782</span> <span class="token operator">|</span> BLACK  <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1995</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">625.00</span> <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7788</span> <span class="token operator">|</span> COALK  <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1997</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span> <span class="token number">3954.20</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7839</span> <span class="token operator">|</span> SOCTT  <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7939</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">03</span> <span class="token operator">|</span> <span class="token number">2681.30</span> <span class="token operator">|</span> <span class="token number">2450.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7844</span> <span class="token operator">|</span> KING   <span class="token operator">|</span> ANALYST   <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span> <span class="token number">1992</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">07</span> <span class="token operator">|</span> <span class="token number">1564.60</span> <span class="token operator">|</span>  <span class="token number">211.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7900</span> <span class="token operator">|</span> TURNER <span class="token operator">|</span> PRESIDENT <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token number">1888</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2435.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7902</span> <span class="token operator">|</span> JAMES  <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1996</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">13</span> <span class="token operator">|</span>  <span class="token number">433.10</span> <span class="token operator">|</span>  <span class="token number">255.52</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7934</span> <span class="token operator">|</span> FORD   <span class="token operator">|</span> ANALYST   <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">03</span> <span class="token operator">|</span> <span class="token number">6321.50</span> <span class="token operator">|</span>  <span class="token number">153.03</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7966</span> <span class="token operator">|</span> MILLER <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7782</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span> <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>  <span class="token number">453.25</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7966</span> <span class="token operator">|</span> MILLER <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7782</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span> <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>  <span class="token number">453.25</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>


<span class="token comment"># 查询emp表，如果comm是null，则显示0</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span> IFNULL<span class="token punctuation">(</span>comm<span class="token punctuation">,</span><span class="token number">0.0</span><span class="token punctuation">)</span> <span class="token keyword">as</span> comm<span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token comment"># 或者</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span> <span class="token keyword">IF</span><span class="token punctuation">(</span>comm <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">0.0</span><span class="token punctuation">)</span> <span class="token keyword">as</span> comm<span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+---------+---------+--------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> sal     <span class="token operator">|</span> comm    <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+---------+--------+</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>    <span class="token number">0.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>  <span class="token number">300.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> <span class="token number">2100.02</span> <span class="token operator">|</span>  <span class="token number">500.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span>  <span class="token number">645.20</span> <span class="token operator">|</span>    <span class="token number">0.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> BLACK  <span class="token operator">|</span>  <span class="token number">625.00</span> <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span> COALK  <span class="token operator">|</span> <span class="token number">3954.20</span> <span class="token operator">|</span>    <span class="token number">0.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span> SOCTT  <span class="token operator">|</span> <span class="token number">2681.30</span> <span class="token operator">|</span> <span class="token number">2450.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> <span class="token number">1564.60</span> <span class="token operator">|</span>  <span class="token number">211.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> <span class="token number">2435.00</span> <span class="token operator">|</span>    <span class="token number">0.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span>  <span class="token number">433.10</span> <span class="token operator">|</span>  <span class="token number">255.52</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> <span class="token number">6321.50</span> <span class="token operator">|</span>  <span class="token number">153.03</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>  <span class="token number">453.25</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>  <span class="token number">453.25</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+---------+--------+</span>

<span class="token comment"># 如果emp表的job是CLERK则显示职员，如果是MANAGER则显示经理，如果是SALESMAN则显示销售人员，其他正常显示</span>
<span class="token comment"># 使用 case when   注意，这玩意使用的时候没有逗号的</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span><span class="token punctuation">(</span> <span class="token keyword">CASE</span> 
              <span class="token keyword">WHEN</span> job <span class="token operator">=</span> <span class="token string">&#39;CLERK&#39;</span> <span class="token keyword">THEN</span> <span class="token string">&#39;职员&#39;</span>
              <span class="token keyword">WHEN</span> job <span class="token operator">=</span> <span class="token string">&#39;MANAGER&#39;</span> <span class="token keyword">THEN</span> <span class="token string">&#39;经理&#39;</span>
              <span class="token keyword">WHEN</span> job <span class="token operator">=</span> <span class="token string">&#39;SALESMAN&#39;</span> <span class="token keyword">THEN</span> <span class="token string">&#39;销售人员&#39;</span>
              <span class="token keyword">ELSE</span> job <span class="token keyword">end</span>
             <span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">&quot;job&quot;</span>
             <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+--------------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> job          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------------+</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span> 职员         <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> 销售人员     <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> 销售人员     <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span> 经理         <span class="token operator">|</span>
<span class="token operator">|</span> BLACK  <span class="token operator">|</span> 销售人员     <span class="token operator">|</span>
<span class="token operator">|</span> COALK  <span class="token operator">|</span> 经理         <span class="token operator">|</span>
<span class="token operator">|</span> SOCTT  <span class="token operator">|</span> 经理         <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> ANALYST      <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> PRESIDENT    <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span> 职员         <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> ANALYST      <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span> 职员         <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span> 职员         <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------------+</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="单表补充-加强查询" tabindex="-1"><a class="header-anchor" href="#单表补充-加强查询" aria-hidden="true">#</a> 单表补充-加强查询</h2><h3 id="where比较日期" tabindex="-1"><a class="header-anchor" href="#where比较日期" aria-hidden="true">#</a> Where比较日期</h3><p>在Mysql中，日期类型可以直接比较</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 查找1992.10.1后入职的员工-使用where完成</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>hiredate <span class="token keyword">from</span> emp <span class="token keyword">where</span> hiredate<span class="token operator">&gt;</span><span class="token string">&#39;1992-10-1&#39;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+------------+</span>
<span class="token operator">|</span> ename <span class="token operator">|</span> hiredate   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+------------+</span>
<span class="token operator">|</span> BLACK <span class="token operator">|</span> <span class="token number">1995</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span>
<span class="token operator">|</span> COALK <span class="token operator">|</span> <span class="token number">1997</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span>
<span class="token operator">|</span> JAMES <span class="token operator">|</span> <span class="token number">1996</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">13</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+------------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="like模糊查询规则" tabindex="-1"><a class="header-anchor" href="#like模糊查询规则" aria-hidden="true">#</a> Like模糊查询规则</h3><ul><li><code>%</code>表示0到多个字符</li><li><code>_</code>表示单个字符</li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 查找首字母为S的员工姓名和工资 这里因为表格是非严格匹配大小写的，所以可以直接用小写的s</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">&#39;s%&#39;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+---------+</span>
<span class="token operator">|</span> ename <span class="token operator">|</span> sal     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+---------+</span>
<span class="token operator">|</span> SMITH <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> SOCTT <span class="token operator">|</span> <span class="token number">2681.30</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+---------+</span>

<span class="token comment"># 第三个字符为A的所有员工 这里因为表格是非严格匹配大小写的，所以可以直接用小写的a</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">&#39;__a%&#39;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+---------+</span>
<span class="token operator">|</span> ename <span class="token operator">|</span> sal     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+---------+</span>
<span class="token operator">|</span> BLACK <span class="token operator">|</span>  <span class="token number">625.00</span> <span class="token operator">|</span>
<span class="token operator">|</span> COALK <span class="token operator">|</span> <span class="token number">3954.20</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+---------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="判断值是否为null" tabindex="-1"><a class="header-anchor" href="#判断值是否为null" aria-hidden="true">#</a> 判断值是否为NULl</h3><p>使用 <code>select * from xxx where xxx IS NULL</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 显示没有上级雇员的情况</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> mgr <span class="token operator">is</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+------+--------+</span>
<span class="token operator">|</span> empno <span class="token operator">|</span> ename  <span class="token operator">|</span> job       <span class="token operator">|</span> mgr  <span class="token operator">|</span> hiredate   <span class="token operator">|</span> sal     <span class="token operator">|</span> comm <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+------+--------+</span>
<span class="token operator">|</span>  <span class="token number">7900</span> <span class="token operator">|</span> TURNER <span class="token operator">|</span> PRESIDENT <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token number">1888</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2435.00</span> <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+------+--------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查询表的结构" tabindex="-1"><a class="header-anchor" href="#查询表的结构" aria-hidden="true">#</a> 查询表的结构</h3><p><code>desc 表名称</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 查看emp表的表结构;</span>
<span class="token keyword">desc</span> emp<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+--------------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> Field    <span class="token operator">|</span> <span class="token keyword">Type</span>               <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+--------------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> empno    <span class="token operator">|</span> <span class="token keyword">mediumint</span> <span class="token keyword">unsigned</span> <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token number">0</span>       <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> ename    <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>        <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span>         <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> job      <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>         <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span>         <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> mgr      <span class="token operator">|</span> <span class="token keyword">mediumint</span> <span class="token keyword">unsigned</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> hiredate <span class="token operator">|</span> <span class="token keyword">date</span>               <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> sal      <span class="token operator">|</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>       <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> comm     <span class="token operator">|</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>       <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> deptno   <span class="token operator">|</span> <span class="token keyword">mediumint</span> <span class="token keyword">unsigned</span> <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token number">0</span>       <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+--------------------+------+-----+---------+-------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="order-by排序-多重排序" tabindex="-1"><a class="header-anchor" href="#order-by排序-多重排序" aria-hidden="true">#</a> Order By排序-多重排序</h3><p>语法：<code>select * from 表名 [where] order by 字段1 字段1排序规则, 字段2 字段2排序规则...</code></p><p>字段1 中相同的按照字段2的排序规则进行排序 字段2中相同的字段按照字段3的规则进行排序...以此类推</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 按照部门号升序而雇员的工资降序的顺序排列</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span> deptno<span class="token punctuation">,</span>sal <span class="token keyword">desc</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+---------+--------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> sal     <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+--------+</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> <span class="token number">6321.50</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span> COALK  <span class="token operator">|</span> <span class="token number">3954.20</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> <span class="token number">1564.60</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span> SOCTT  <span class="token operator">|</span> <span class="token number">2681.30</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span>  <span class="token number">645.20</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span>  <span class="token number">433.10</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> <span class="token number">2435.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> <span class="token number">2100.02</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span> BLACK  <span class="token operator">|</span>  <span class="token number">625.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+--------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="limit-分页查询" tabindex="-1"><a class="header-anchor" href="#limit-分页查询" aria-hidden="true">#</a> LIMIT 分页查询</h3><p>在实际工作中，<strong>做任何项目时都要用到分页</strong>，因为正常情况下，一张表的数据往往是几万几十万几百万，不可能说每次查询都把全部查询下来：</p><p>基本语法：<code>select ... from 表名 [where order group 等语句] LIMIT 位置,数量</code></p><p>位置(index)从零开始计数</p><p>嘛，也就是说 实际上是index+1</p><ul><li>0,10，表示第一条到第十条</li><li>10,20表示第十一条到第二十条</li><li>20，30表示第二十一条到第三十条</li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 按照员工的id号升序取出，每页显示三条记录，分别显示1,2,3页</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span>  empno <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token comment">#第一页</span>
<span class="token operator">+</span><span class="token comment">-------+-------+----------+------+------------+---------+--------+--------+</span>
<span class="token operator">|</span> empno <span class="token operator">|</span> ename <span class="token operator">|</span> job      <span class="token operator">|</span> mgr  <span class="token operator">|</span> hiredate   <span class="token operator">|</span> sal     <span class="token operator">|</span> comm   <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------+----------+------+------------+---------+--------+--------+</span>
<span class="token operator">|</span>  <span class="token number">7369</span> <span class="token operator">|</span> SMITH <span class="token operator">|</span> CLERK    <span class="token operator">|</span> <span class="token number">7902</span> <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>   <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7521</span> <span class="token operator">|</span> WARD  <span class="token operator">|</span> SALESMAN <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">20</span> <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span> <span class="token number">300.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7566</span> <span class="token operator">|</span> JONES <span class="token operator">|</span> SALESMAN <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">22</span> <span class="token operator">|</span> <span class="token number">2100.02</span> <span class="token operator">|</span> <span class="token number">500.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-------+----------+------+------------+---------+--------+--------+</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span>  empno <span class="token keyword">limit</span> <span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token comment">#第二页</span>
<span class="token operator">+</span><span class="token comment">-------+--------+----------+------+------------+---------+---------+--------+</span>
<span class="token operator">|</span> empno <span class="token operator">|</span> ename  <span class="token operator">|</span> job      <span class="token operator">|</span> mgr  <span class="token operator">|</span> hiredate   <span class="token operator">|</span> sal     <span class="token operator">|</span> comm    <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+----------+------+------------+---------+---------+--------+</span>
<span class="token operator">|</span>  <span class="token number">7654</span> <span class="token operator">|</span> MARTIN <span class="token operator">|</span> MANAGER  <span class="token operator">|</span> <span class="token number">7939</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">28</span> <span class="token operator">|</span>  <span class="token number">645.20</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7782</span> <span class="token operator">|</span> BLACK  <span class="token operator">|</span> SALESMAN <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1995</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">625.00</span> <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7788</span> <span class="token operator">|</span> COALK  <span class="token operator">|</span> MANAGER  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1997</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span> <span class="token number">3954.20</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+----------+------+------------+---------+---------+--------+</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">order</span> <span class="token keyword">by</span>  empno <span class="token keyword">limit</span> <span class="token number">6</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span><span class="token comment">#第三页</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
<span class="token operator">|</span> empno <span class="token operator">|</span> ename  <span class="token operator">|</span> job       <span class="token operator">|</span> mgr  <span class="token operator">|</span> hiredate   <span class="token operator">|</span> sal     <span class="token operator">|</span> comm    <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
<span class="token operator">|</span>  <span class="token number">7839</span> <span class="token operator">|</span> SOCTT  <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7939</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">03</span> <span class="token operator">|</span> <span class="token number">2681.30</span> <span class="token operator">|</span> <span class="token number">2450.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7844</span> <span class="token operator">|</span> KING   <span class="token operator">|</span> ANALYST   <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span> <span class="token number">1992</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">07</span> <span class="token operator">|</span> <span class="token number">1564.60</span> <span class="token operator">|</span>  <span class="token number">211.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7900</span> <span class="token operator">|</span> TURNER <span class="token operator">|</span> PRESIDENT <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token number">1888</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2435.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="使用分组函数和分组字句、流程控制增强-group-by、if" tabindex="-1"><a class="header-anchor" href="#使用分组函数和分组字句、流程控制增强-group-by、if" aria-hidden="true">#</a> 使用分组函数和分组字句、流程控制增强 GROUP BY、IF</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 显示 每种岗位 的 雇员总数、平均工资</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+-------------+</span>
<span class="token operator">|</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span>    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+-------------+</span>
<span class="token operator">|</span>        <span class="token number">6</span> <span class="token operator">|</span> <span class="token number">1004.950000</span> <span class="token operator">|</span>
<span class="token operator">|</span>        <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">1690.005000</span> <span class="token operator">|</span>
<span class="token operator">|</span>        <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">3946.766667</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+-------------+</span>

<span class="token comment"># 显示 雇员总数 以及 没有获得补助 的员工数</span>
<span class="token comment"># count 某列 如果该列的值为null，是不会加入统计的</span>

<span class="token comment"># 方法1</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">if</span><span class="token punctuation">(</span>comm <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+--------------------------------+</span>
<span class="token operator">|</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">if</span><span class="token punctuation">(</span>comm <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token boolean">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+--------------------------------+</span>
<span class="token operator">|</span>       <span class="token number">13</span> <span class="token operator">|</span>                              <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+--------------------------------+</span>

<span class="token comment"># 方法2</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">count</span><span class="token punctuation">(</span>comm<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+----------------------+</span>
<span class="token operator">|</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">count</span><span class="token punctuation">(</span>comm<span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+----------------------+</span>
<span class="token operator">|</span>       <span class="token number">13</span> <span class="token operator">|</span>                    <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+----------------------+</span>

<span class="token comment"># 显示管理者的总人数(mgr)</span>
<span class="token comment"># count 去null distinct 去重</span>
<span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> mgr<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>
<span class="token operator">|</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token keyword">distinct</span> mgr<span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>
<span class="token operator">|</span>                   <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>

<span class="token comment"># 显示雇员的工资的最大差额</span>

<span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>
<span class="token operator">|</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">min</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>
<span class="token operator">|</span>             <span class="token number">5888.40</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="group-having-limit-order-的使用顺序" tabindex="-1"><a class="header-anchor" href="#group-having-limit-order-的使用顺序" aria-hidden="true">#</a> Group Having limit order 的使用顺序</h3><p>首先他们必须在where之后，</p><p>这之后的顺序就是</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> 字段 <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 条件
 <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> 字段
 <span class="token keyword">HAVING</span> 字段
 <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> 字段
 <span class="token keyword">LIMIT</span> 字段<span class="token punctuation">;</span>
<span class="token comment">#LIMIT永远在最后</span>

<span class="token comment">#应用案例 统计各个部门的平均工资 并且是平均工资大于1000的才会加入统计，并且按照工资从高到低排序，取出前两行记录</span>
<span class="token keyword">select</span> <span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">as</span> sal_avg<span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp 
 <span class="token keyword">group</span> <span class="token keyword">by</span> deptno <span class="token keyword">having</span> sal_avg<span class="token operator">&gt;</span><span class="token number">1000</span>
    <span class="token keyword">order</span> <span class="token keyword">by</span> sal_avg <span class="token keyword">DESC</span>
    <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------+--------+</span>
<span class="token operator">|</span> sal_avg     <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------+--------+</span>
<span class="token operator">|</span> <span class="token number">3946.766667</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">1690.005000</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------+--------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="select-查找-多表查询" tabindex="-1"><a class="header-anchor" href="#select-查找-多表查询" aria-hidden="true">#</a> Select 查找-多表查询</h1><p>实际上开发过程中多表用的多一些（指七八个表一块查..）</p><figure><img src="`+U+`" alt="image-20211121223552978" tabindex="0" loading="lazy"><figcaption>image-20211121223552978</figcaption></figure><p>接下来过程中要用到的三张表</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> dept<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>
<span class="token operator">|</span> deptno <span class="token operator">|</span> dname      <span class="token operator">|</span> loc      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>
<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span> NEW <span class="token keyword">Work</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span> DALLAS   <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span> CHICAGO  <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">40</span> <span class="token operator">|</span> OPERATIONS <span class="token operator">|</span> BOSTON   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+------------+----------+</span>
<span class="token number">4</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> salgrade<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+---------+---------+</span>
<span class="token operator">|</span> grade <span class="token operator">|</span> losal   <span class="token operator">|</span> hisal   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+---------+---------+</span>
<span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span>  <span class="token number">700.00</span> <span class="token operator">|</span> <span class="token number">1200.00</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">1201.00</span> <span class="token operator">|</span> <span class="token number">1400.00</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">1401.00</span> <span class="token operator">|</span> <span class="token number">2000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span> <span class="token number">2001.00</span> <span class="token operator">|</span> <span class="token number">3000.00</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">5</span> <span class="token operator">|</span> <span class="token number">3001.00</span> <span class="token operator">|</span> <span class="token number">9999.00</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+---------+---------+</span>
<span class="token number">5</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
<span class="token operator">|</span> empno <span class="token operator">|</span> ename  <span class="token operator">|</span> job       <span class="token operator">|</span> mgr  <span class="token operator">|</span> hiredate   <span class="token operator">|</span> sal     <span class="token operator">|</span> comm    <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
<span class="token operator">|</span>  <span class="token number">7369</span> <span class="token operator">|</span> SMITH  <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7902</span> <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7521</span> <span class="token operator">|</span> WARD   <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">20</span> <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>  <span class="token number">300.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7566</span> <span class="token operator">|</span> JONES  <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">22</span> <span class="token operator">|</span> <span class="token number">2100.02</span> <span class="token operator">|</span>  <span class="token number">500.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7654</span> <span class="token operator">|</span> MARTIN <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7939</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">28</span> <span class="token operator">|</span>  <span class="token number">645.20</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7782</span> <span class="token operator">|</span> BLACK  <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1995</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">625.00</span> <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7788</span> <span class="token operator">|</span> COALK  <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1997</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span> <span class="token number">3954.20</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7839</span> <span class="token operator">|</span> SOCTT  <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7939</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">03</span> <span class="token operator">|</span> <span class="token number">2681.30</span> <span class="token operator">|</span> <span class="token number">2450.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7844</span> <span class="token operator">|</span> KING   <span class="token operator">|</span> ANALYST   <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span> <span class="token number">1992</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">07</span> <span class="token operator">|</span> <span class="token number">1564.60</span> <span class="token operator">|</span>  <span class="token number">211.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7900</span> <span class="token operator">|</span> TURNER <span class="token operator">|</span> PRESIDENT <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token number">1888</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2435.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7902</span> <span class="token operator">|</span> JAMES  <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1996</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">13</span> <span class="token operator">|</span>  <span class="token number">433.10</span> <span class="token operator">|</span>  <span class="token number">255.52</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7934</span> <span class="token operator">|</span> FORD   <span class="token operator">|</span> ANALYST   <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">03</span> <span class="token operator">|</span> <span class="token number">6321.50</span> <span class="token operator">|</span>  <span class="token number">153.03</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7966</span> <span class="token operator">|</span> MILLER <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7782</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span> <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>  <span class="token number">453.25</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7966</span> <span class="token operator">|</span> MILLER <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7782</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span> <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>  <span class="token number">453.25</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
<span class="token number">13</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+J+'" alt="image-20211121223951951" tabindex="0" loading="lazy"><figcaption>image-20211121223951951</figcaption></figure><figure><img src="'+D+'" alt="image-20211121224339699" tabindex="0" loading="lazy"><figcaption>image-20211121224339699</figcaption></figure><p>这样多表查询默认处理返回的结果，称为笛卡尔集</p><h2 id="多表查询-where过滤" tabindex="-1"><a class="header-anchor" href="#多表查询-where过滤" aria-hidden="true">#</a> 多表查询-where过滤</h2><p>解决这个多表的关键就是要写出正确的过滤条件 where</p><figure><img src="'+K+`" alt="image-20211121230457415" tabindex="0" loading="lazy"><figcaption>image-20211121230457415</figcaption></figure><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>
<span class="token comment"># emp.deptno = dept.deptno 即为去重</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">,</span>dept <span class="token keyword">where</span> emp<span class="token punctuation">.</span>deptno <span class="token operator">=</span> dept<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
<span class="token comment"># 此时若想要显示指定值则需要：</span>
<span class="token keyword">select</span> emp<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>emp<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span>dept<span class="token punctuation">.</span>dname <span class="token keyword">from</span> emp<span class="token punctuation">,</span>dept <span class="token keyword">where</span> emp<span class="token punctuation">.</span>deptno <span class="token operator">=</span> dept<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+--------+------------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> deptno <span class="token operator">|</span> dname      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+------------+</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> BLACK  <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> COALK  <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">|</span> SOCTT  <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+------------+</span>


<span class="token comment"># 显示部门号为10的部门名 员工名 和工资</span>
<span class="token comment"># 多表查询时，可以在from处定义别名</span>
<span class="token keyword">select</span> d<span class="token punctuation">.</span>dname<span class="token punctuation">,</span>
 e<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span>
 e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>
 e<span class="token punctuation">.</span>sal 
 <span class="token keyword">from</span> emp <span class="token keyword">as</span> e <span class="token punctuation">,</span>dept <span class="token keyword">as</span> d <span class="token keyword">where</span> 
    e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno  <span class="token operator">and</span> e<span class="token punctuation">.</span>deptno<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------+--------+-------+---------+</span>
<span class="token operator">|</span> dname      <span class="token operator">|</span> deptno <span class="token operator">|</span> ename <span class="token operator">|</span> sal     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+--------+-------+---------+</span>
<span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> COALK <span class="token operator">|</span> <span class="token number">3954.20</span> <span class="token operator">|</span>
<span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> KING  <span class="token operator">|</span> <span class="token number">1564.60</span> <span class="token operator">|</span>
<span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> FORD  <span class="token operator">|</span> <span class="token number">6321.50</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------+--------+-------+---------+</span>

<span class="token comment"># 显示各个员工的姓名。工资，及工资级别 </span>

<span class="token keyword">select</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>e<span class="token punctuation">.</span>sal<span class="token punctuation">,</span>s<span class="token punctuation">.</span>grade
 <span class="token keyword">from</span> emp <span class="token keyword">as</span> e  <span class="token punctuation">,</span>salgrade <span class="token keyword">as</span> s
 <span class="token keyword">where</span>   e<span class="token punctuation">.</span>sal <span class="token operator">BETWEEN</span> s<span class="token punctuation">.</span>losal <span class="token operator">and</span> s<span class="token punctuation">.</span>hisal<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+---------+-------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> sal     <span class="token operator">|</span> grade <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+-------+</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> <span class="token number">2100.02</span> <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> COALK  <span class="token operator">|</span> <span class="token number">3954.20</span> <span class="token operator">|</span>     <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span> SOCTT  <span class="token operator">|</span> <span class="token number">2681.30</span> <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> <span class="token number">1564.60</span> <span class="token operator">|</span>     <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> <span class="token number">2435.00</span> <span class="token operator">|</span>     <span class="token number">4</span> <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> <span class="token number">6321.50</span> <span class="token operator">|</span>     <span class="token number">5</span> <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>     <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+-------+</span>

<span class="token comment"># 显示雇员名 雇员工资 及所在部门的名字 并按照部门排序（降序排）</span>
<span class="token comment"># 部门相同的，按照工资降序排</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>e<span class="token punctuation">.</span>sal<span class="token punctuation">,</span>e<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname 
 <span class="token keyword">from</span> emp <span class="token keyword">as</span> e<span class="token punctuation">,</span>dept <span class="token keyword">as</span> d
 <span class="token keyword">where</span> e<span class="token punctuation">.</span>deptno <span class="token operator">=</span> d<span class="token punctuation">.</span>deptno
 <span class="token keyword">order</span> <span class="token keyword">by</span> e<span class="token punctuation">.</span>deptno <span class="token keyword">desc</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>sal <span class="token keyword">desc</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+---------+--------+------------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> sal     <span class="token operator">|</span> deptno <span class="token operator">|</span> dname      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+--------+------------+</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> <span class="token number">2435.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> <span class="token number">2100.02</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> BLACK  <span class="token operator">|</span>  <span class="token number">625.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> SALES      <span class="token operator">|</span>
<span class="token operator">|</span> SOCTT  <span class="token operator">|</span> <span class="token number">2681.30</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span>  <span class="token number">645.20</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> JAMES  <span class="token operator">|</span>  <span class="token number">433.10</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> RESEARCH   <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> <span class="token number">6321.50</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">|</span> COALK  <span class="token operator">|</span> <span class="token number">3954.20</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> <span class="token number">1564.60</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> ACCOUNTING <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+--------+------------+</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mysql-多表查询-自连接" tabindex="-1"><a class="header-anchor" href="#mysql-多表查询-自连接" aria-hidden="true">#</a> Mysql 多表查询-自连接</h2><p>自连接指的是在同一张表的连接查询个（将同一张表看做两张表）</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 显示公示员工和他上级的名字</span>
<span class="token comment"># 员工的名字在 emp 上级的名字 也在emp 员工和上级是通过emp表的mgr字段关联</span>
<span class="token comment"># empno 是员工当前阶级  mgr 是员工上级阶级</span>
 <span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
<span class="token operator">|</span> empno <span class="token operator">|</span> ename  <span class="token operator">|</span> job       <span class="token operator">|</span> mgr  <span class="token operator">|</span> hiredate   <span class="token operator">|</span> sal     <span class="token operator">|</span> comm    <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
<span class="token operator">|</span>  <span class="token number">7369</span> <span class="token operator">|</span> SMITH  <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7902</span> <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7521</span> <span class="token operator">|</span> WARD   <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">20</span> <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>  <span class="token number">300.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7566</span> <span class="token operator">|</span> JONES  <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">22</span> <span class="token operator">|</span> <span class="token number">2100.02</span> <span class="token operator">|</span>  <span class="token number">500.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7654</span> <span class="token operator">|</span> MARTIN <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7939</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">28</span> <span class="token operator">|</span>  <span class="token number">645.20</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7782</span> <span class="token operator">|</span> BLACK  <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1995</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">625.00</span> <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7788</span> <span class="token operator">|</span> COALK  <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1997</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span> <span class="token number">3954.20</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7839</span> <span class="token operator">|</span> SOCTT  <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7939</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">03</span> <span class="token operator">|</span> <span class="token number">2681.30</span> <span class="token operator">|</span> <span class="token number">2450.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7844</span> <span class="token operator">|</span> KING   <span class="token operator">|</span> ANALYST   <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span> <span class="token number">1992</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">07</span> <span class="token operator">|</span> <span class="token number">1564.60</span> <span class="token operator">|</span>  <span class="token number">211.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7900</span> <span class="token operator">|</span> TURNER <span class="token operator">|</span> PRESIDENT <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token number">1888</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2435.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7902</span> <span class="token operator">|</span> JAMES  <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1996</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">13</span> <span class="token operator">|</span>  <span class="token number">433.10</span> <span class="token operator">|</span>  <span class="token number">255.52</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7934</span> <span class="token operator">|</span> FORD   <span class="token operator">|</span> ANALYST   <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">03</span> <span class="token operator">|</span> <span class="token number">6321.50</span> <span class="token operator">|</span>  <span class="token number">153.03</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7966</span> <span class="token operator">|</span> MILLER <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7782</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span> <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>  <span class="token number">453.25</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7966</span> <span class="token operator">|</span> MILLER <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7782</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span> <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>  <span class="token number">453.25</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>

<span class="token keyword">select</span> <span class="token keyword">work</span><span class="token punctuation">.</span>ename <span class="token string">&quot;员工名&quot;</span><span class="token punctuation">,</span>boss<span class="token punctuation">.</span>ename <span class="token string">&quot;上级名称&quot;</span> <span class="token keyword">from</span> emp <span class="token keyword">as</span> <span class="token keyword">work</span><span class="token punctuation">,</span>emp <span class="token keyword">as</span> boss
 <span class="token keyword">where</span> <span class="token keyword">work</span><span class="token punctuation">.</span>mgr <span class="token operator">=</span> boss<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>
<span class="token comment"># 因为表中设计了大部分人的上级都没有，所以这里只获取到几个人的，为null或者不存在的都不会记录在内</span>
<span class="token comment"># 通过别名即可轻松来使用 反正多表查询通常情况下分别取个别名就不会错</span>
<span class="token operator">+</span><span class="token comment">-----------+--------------+</span>
<span class="token operator">|</span> 员工名    <span class="token operator">|</span> 上级名称     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+--------------+</span>
<span class="token operator">|</span> FORD      <span class="token operator">|</span> JONES        <span class="token operator">|</span>
<span class="token operator">|</span> KING      <span class="token operator">|</span> JONES        <span class="token operator">|</span>
<span class="token operator">|</span> MILLER    <span class="token operator">|</span> BLACK        <span class="token operator">|</span>
<span class="token operator">|</span> MILLER    <span class="token operator">|</span> BLACK        <span class="token operator">|</span>
<span class="token operator">|</span> SMITH     <span class="token operator">|</span> JAMES        <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------+--------------+</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mysql多表查询-子查询-查询结果当做临时表使用" tabindex="-1"><a class="header-anchor" href="#mysql多表查询-子查询-查询结果当做临时表使用" aria-hidden="true">#</a> Mysql多表查询-子查询-查询结果当做临时表使用</h2><p>就是结果当成表来使用</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 查询emp各个comm分组中 工资最高的人 并按照类别升序排序</span>

<span class="token comment"># 先得到 各个类别中的最高工资</span>
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+----------+</span>
<span class="token operator">|</span> deptno <span class="token operator">|</span> <span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+----------+</span>
<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>  <span class="token number">2681.30</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>  <span class="token number">2435.00</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>  <span class="token number">6321.50</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+----------+</span>

<span class="token comment"># 然后将其结果当做一张表 来传递使用</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>deptno <span class="token string">&quot;类别&quot;</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>ename <span class="token string">&quot;员工名称&quot;</span><span class="token punctuation">,</span>t<span class="token punctuation">.</span>sal <span class="token string">&quot;工资&quot;</span>
 <span class="token keyword">from</span> emp <span class="token keyword">as</span> e <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">as</span> sal <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">)</span><span class="token keyword">as</span> t
 <span class="token keyword">where</span> e<span class="token punctuation">.</span>sal <span class="token operator">=</span> t<span class="token punctuation">.</span>sal
 <span class="token keyword">order</span> <span class="token keyword">by</span> e<span class="token punctuation">.</span>deptno<span class="token punctuation">,</span>t<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+--------------+---------+</span>
<span class="token operator">|</span> 类别   <span class="token operator">|</span> 员工名称     <span class="token operator">|</span> 工资    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------------+---------+</span>
<span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span> FORD         <span class="token operator">|</span> <span class="token number">6321.50</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> SOCTT        <span class="token operator">|</span> <span class="token number">2681.30</span> <span class="token operator">|</span>
<span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span> TURNER       <span class="token operator">|</span> <span class="token number">2435.00</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------------+---------+</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mysql多表查询-all、any匹配操作符" tabindex="-1"><a class="header-anchor" href="#mysql多表查询-all、any匹配操作符" aria-hidden="true">#</a> Mysql多表查询-All、Any匹配操作符</h2><p>all就是匹配某个值是否为另一个列表返回的所有字段或者一个子查询返回的所有字段的值</p><p>all前面一般是大于小于或者等于号</p><p>all 就是匹配全部</p><p>any 就是匹配上其中一个即可</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 显示工资比部门30的 所有员工 的工资高的员工姓名、工资和部门号</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp <span class="token keyword">where</span>
 sal<span class="token operator">&gt;</span><span class="token keyword">ALL</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#  稍微的简写</span>
 sal<span class="token operator">&gt;</span><span class="token keyword">ALL</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token operator">+</span><span class="token comment">-------+---------+--------+</span>
<span class="token operator">|</span> ename <span class="token operator">|</span> sal     <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+---------+--------+</span>
<span class="token operator">|</span> COALK <span class="token operator">|</span> <span class="token number">3954.20</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span> SOCTT <span class="token operator">|</span> <span class="token number">2681.30</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> FORD  <span class="token operator">|</span> <span class="token number">6321.50</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+---------+--------+</span>

<span class="token comment"># 显示工资比部门30的其中 任何一个员工 的工资高的员工</span>
<span class="token keyword">select</span> ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp <span class="token keyword">where</span>
 sal<span class="token operator">&gt;</span><span class="token keyword">ANY</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> sal <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 也可以略微简化</span>
 sal<span class="token operator">&gt;</span><span class="token keyword">ANY</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> deptno <span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+---------+--------+</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> sal     <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+--------+</span>
<span class="token operator">|</span> SMITH  <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> WARD   <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span> JONES  <span class="token operator">|</span> <span class="token number">2100.02</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN <span class="token operator">|</span>  <span class="token number">645.20</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> COALK  <span class="token operator">|</span> <span class="token number">3954.20</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span> SOCTT  <span class="token operator">|</span> <span class="token number">2681.30</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> KING   <span class="token operator">|</span> <span class="token number">1564.60</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span> TURNER <span class="token operator">|</span> <span class="token number">2435.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span> FORD   <span class="token operator">|</span> <span class="token number">6321.50</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> MILLER <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+---------+--------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mysql多表查询-多列子查询" tabindex="-1"><a class="header-anchor" href="#mysql多表查询-多列子查询" aria-hidden="true">#</a> Mysql多表查询-多列子查询</h2><p>就是多个值同时进行匹配，可以有效降低查询时候的资源浪费</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">#查询与 SMITH 的部门和岗位完全相同的所有雇员（不包括smith本人）</span>

<span class="token comment"># 首先获取史密斯的部门和岗位</span>
<span class="token keyword">select</span> deptno<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">=</span><span class="token string">&#39;smith&#39;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+-------+</span>
<span class="token operator">|</span> deptno <span class="token operator">|</span> job   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+-------+</span>
<span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span> CLERK <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+-------+</span>

<span class="token comment">#再把结果当做子查询来使用，并且使用多列子查询的模式</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp 
 <span class="token keyword">where</span> <span class="token punctuation">(</span>deptno<span class="token punctuation">,</span>job<span class="token punctuation">)</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> deptno<span class="token punctuation">,</span>job <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename <span class="token operator">=</span><span class="token string">&#39;smith&#39;</span><span class="token punctuation">)</span> <span class="token operator">and</span> ename <span class="token operator">!=</span> <span class="token string">&#39;smith&#39;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-------+------+------------+--------+--------+--------+</span>
<span class="token operator">|</span> empno <span class="token operator">|</span> ename  <span class="token operator">|</span> job   <span class="token operator">|</span> mgr  <span class="token operator">|</span> hiredate   <span class="token operator">|</span> sal    <span class="token operator">|</span> comm   <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-------+------+------------+--------+--------+--------+</span>
<span class="token operator">|</span>  <span class="token number">7902</span> <span class="token operator">|</span> JAMES  <span class="token operator">|</span> CLERK <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1996</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">13</span> <span class="token operator">|</span> <span class="token number">433.10</span> <span class="token operator">|</span> <span class="token number">255.52</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7966</span> <span class="token operator">|</span> MILLER <span class="token operator">|</span> CLERK <span class="token operator">|</span> <span class="token number">7782</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span> <span class="token operator">|</span> <span class="token number">735.05</span> <span class="token operator">|</span> <span class="token number">453.25</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-------+------+------------+--------+--------+--------+</span>



<span class="token comment"># 获取所有部门中工资高于该部门平均工资的人</span>

<span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token keyword">as</span> sal <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">;</span>

<span class="token keyword">select</span> e<span class="token punctuation">.</span>ename <span class="token string">&#39;员工姓名&#39;</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>sal <span class="token string">&#39;员工工资&#39;</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>deptno <span class="token string">&#39;部门名称&#39;</span><span class="token punctuation">,</span>g<span class="token punctuation">.</span>sal <span class="token string">&quot;该部门平均工资&quot;</span>
 <span class="token keyword">from</span> emp <span class="token keyword">as</span> e<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token keyword">as</span> sal <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">)</span><span class="token keyword">as</span> g
 <span class="token keyword">where</span> e<span class="token punctuation">.</span>deptno<span class="token operator">=</span>g<span class="token punctuation">.</span>deptno <span class="token operator">and</span> e<span class="token punctuation">.</span>sal<span class="token operator">&gt;</span>g<span class="token punctuation">.</span>sal
 <span class="token keyword">order</span> <span class="token keyword">by</span> e<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+-----------------------+</span>
<span class="token operator">|</span> 员工姓名       <span class="token operator">|</span> 员工工资      <span class="token operator">|</span> 部门名称      <span class="token operator">|</span> 该部门平均工资          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+-----------------------+</span>
<span class="token operator">|</span> COALK        <span class="token operator">|</span>      <span class="token number">3954.20</span> <span class="token operator">|</span>           <span class="token number">10</span> <span class="token operator">|</span>           <span class="token number">3946.766667</span> <span class="token operator">|</span>
<span class="token operator">|</span> FORD         <span class="token operator">|</span>      <span class="token number">6321.50</span> <span class="token operator">|</span>           <span class="token number">10</span> <span class="token operator">|</span>           <span class="token number">3946.766667</span> <span class="token operator">|</span>
<span class="token operator">|</span> SOCTT        <span class="token operator">|</span>      <span class="token number">2681.30</span> <span class="token operator">|</span>           <span class="token number">20</span> <span class="token operator">|</span>           <span class="token number">1004.950000</span> <span class="token operator">|</span>
<span class="token operator">|</span> JONES        <span class="token operator">|</span>      <span class="token number">2100.02</span> <span class="token operator">|</span>           <span class="token number">30</span> <span class="token operator">|</span>           <span class="token number">1690.005000</span> <span class="token operator">|</span>
<span class="token operator">|</span> TURNER       <span class="token operator">|</span>      <span class="token number">2435.00</span> <span class="token operator">|</span>           <span class="token number">30</span> <span class="token operator">|</span>           <span class="token number">1690.005000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+-----------------------+</span>

<span class="token comment"># 查找每个部门工资最高的人的详细资料</span>
<span class="token keyword">select</span> e<span class="token punctuation">.</span>ename <span class="token string">&#39;员工姓名&#39;</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>sal <span class="token string">&#39;员工工资&#39;</span><span class="token punctuation">,</span>e<span class="token punctuation">.</span>deptno <span class="token string">&#39;部门名称&#39;</span><span class="token punctuation">,</span>g<span class="token punctuation">.</span>sal <span class="token string">&quot;该部门最高工资&quot;</span>
 <span class="token keyword">from</span> emp <span class="token keyword">as</span> e<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token keyword">select</span> deptno<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>sal<span class="token punctuation">)</span><span class="token keyword">as</span> sal <span class="token keyword">from</span> emp <span class="token keyword">group</span> <span class="token keyword">by</span> deptno<span class="token punctuation">)</span><span class="token keyword">as</span> g
 <span class="token keyword">where</span> e<span class="token punctuation">.</span>deptno<span class="token operator">=</span>g<span class="token punctuation">.</span>deptno <span class="token operator">and</span> e<span class="token punctuation">.</span>sal<span class="token operator">=</span>g<span class="token punctuation">.</span>sal
 <span class="token keyword">order</span> <span class="token keyword">by</span> e<span class="token punctuation">.</span>deptno<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+-----------------------+</span>
<span class="token operator">|</span> 员工姓名     <span class="token operator">|</span> 员工工资     <span class="token operator">|</span> 部门名称     <span class="token operator">|</span> 该部门最高工资        <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+-----------------------+</span>
<span class="token operator">|</span> FORD         <span class="token operator">|</span>      <span class="token number">6321.50</span> <span class="token operator">|</span>           <span class="token number">10</span> <span class="token operator">|</span>               <span class="token number">6321.50</span> <span class="token operator">|</span>
<span class="token operator">|</span> SOCTT        <span class="token operator">|</span>      <span class="token number">2681.30</span> <span class="token operator">|</span>           <span class="token number">20</span> <span class="token operator">|</span>               <span class="token number">2681.30</span> <span class="token operator">|</span>
<span class="token operator">|</span> TURNER       <span class="token operator">|</span>      <span class="token number">2435.00</span> <span class="token operator">|</span>           <span class="token number">30</span> <span class="token operator">|</span>               <span class="token number">2435.00</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+-----------------------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="多表查询细节1-as的省略-返回某个表的全部内容" tabindex="-1"><a class="header-anchor" href="#多表查询细节1-as的省略-返回某个表的全部内容" aria-hidden="true">#</a> 多表查询细节1 -as的省略，*返回某个表的全部内容</h3><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># as 可以省略</span>
<span class="token keyword">select</span> ename <span class="token keyword">as</span> name <span class="token keyword">from</span> xxx<span class="token punctuation">;</span>
<span class="token comment">#可以简写为</span>
<span class="token keyword">select</span> ename  name<span class="token punctuation">;</span>

<span class="token comment"># 当查询多个表的时候，要输出某个表的全部内容</span>
<span class="token comment"># 使用*号即可</span>
<span class="token keyword">select</span> emp<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span>dept<span class="token punctuation">.</span>dname <span class="token keyword">from</span> emp<span class="token punctuation">,</span>dept<span class="token punctuation">;</span>

<span class="token comment"># 也可以*号+ as缩写</span>

<span class="token keyword">select</span> e<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token punctuation">,</span> d<span class="token punctuation">.</span>dname <span class="token keyword">from</span> emp e<span class="token punctuation">,</span>dept d<span class="token punctuation">;</span>

<span class="token comment"># 效果都是一样的</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="表复制-蠕虫复制、复制表的结构、去除表中的重复记录" tabindex="-1"><a class="header-anchor" href="#表复制-蠕虫复制、复制表的结构、去除表中的重复记录" aria-hidden="true">#</a> 表复制-蠕虫复制、复制表的结构、去除表中的重复记录</h2><p>有的时候，为了对某个sql语句进行效率测试，我们需要海量数据时，可以使用此方法为表创建海量数据</p><h3 id="复制表" tabindex="-1"><a class="header-anchor" href="#复制表" aria-hidden="true">#</a> 复制表</h3><ul><li><code>insert into 表1 select * from 表1</code> 自我复制</li><li><code>insert into 表1(字段1 字段2...) select 字段1,字段2... from 表2</code> 两个表之间的复制 <ul><li>把表2中相应字段的值按照顺序复制到表1的相应字段（按照字段1，字段2相互相对应）</li></ul></li></ul><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 先来个测试的表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> my_table01<span class="token punctuation">(</span> id <span class="token keyword">int</span><span class="token punctuation">,</span>name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>sal <span class="token keyword">double</span><span class="token punctuation">,</span>job <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>deptno <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">desc</span> my_table01<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+-------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> Field  <span class="token operator">|</span> <span class="token keyword">Type</span>        <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+-------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> id     <span class="token operator">|</span> <span class="token keyword">int</span>         <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> name   <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> sal    <span class="token operator">|</span> <span class="token keyword">double</span>      <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> job    <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> deptno <span class="token operator">|</span> <span class="token keyword">int</span>         <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+-------------+------+-----+---------+-------+</span>

<span class="token comment"># 把emp表的记录复制到my_table01</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> my_table01
 <span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>job<span class="token punctuation">,</span>deptno<span class="token punctuation">)</span> 
 <span class="token punctuation">(</span><span class="token keyword">SELECT</span> empno<span class="token punctuation">,</span>ename<span class="token punctuation">,</span>sal<span class="token punctuation">,</span>job<span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token operator">+</span><span class="token comment">------+--------+---------+-----------+--------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> sal     <span class="token operator">|</span> job       <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+---------+-----------+--------+</span>
<span class="token operator">|</span> <span class="token number">7369</span> <span class="token operator">|</span> SMITH  <span class="token operator">|</span>     <span class="token number">800</span> <span class="token operator">|</span> CLERK     <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7521</span> <span class="token operator">|</span> WARD   <span class="token operator">|</span>    <span class="token number">1600</span> <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span> JONES  <span class="token operator">|</span> <span class="token number">2100.02</span> <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token number">13</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token comment"># 自我复制</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> my_table01 <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_table01<span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">------+--------+---------+-----------+--------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> sal     <span class="token operator">|</span> job       <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+---------+-----------+--------+</span>
<span class="token operator">|</span> <span class="token number">7369</span> <span class="token operator">|</span> SMITH  <span class="token operator">|</span>     <span class="token number">800</span> <span class="token operator">|</span> CLERK     <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7521</span> <span class="token operator">|</span> WARD   <span class="token operator">|</span>    <span class="token number">1600</span> <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span> JONES  <span class="token operator">|</span> <span class="token number">2100.02</span> <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">7654</span> <span class="token operator">|</span> MARTIN <span class="token operator">|</span>   <span class="token number">645.2</span> <span class="token operator">|</span> MANAGER   <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token number">26</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>

<span class="token comment"># 再次自我复制n次.</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> my_table01 <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_table01<span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> my_table01 <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_table01<span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> my_table01 <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> my_table01<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Query OK<span class="token punctuation">,</span> <span class="token number">1703936</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">16.21</span> sec<span class="token punctuation">)</span>
<span class="token comment"># 复制了越来越多次，也可以明显的感觉到复制的速度越来越慢</span>
<span class="token comment"># 每次复制都是上一次的2倍</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="复制表的结构" tabindex="-1"><a class="header-anchor" href="#复制表的结构" aria-hidden="true">#</a> 复制表的结构</h3><p>语法：<code>create table 表2 like 表1</code> 把表1的结构完整的复制给表2</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 复制表的结构</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> my_table02 <span class="token operator">like</span> emp<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------+--------------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> Field    <span class="token operator">|</span> <span class="token keyword">Type</span>               <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+--------------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> empno    <span class="token operator">|</span> <span class="token keyword">mediumint</span> <span class="token keyword">unsigned</span> <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token number">0</span>       <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> ename    <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>        <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span>         <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> job      <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>         <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span>         <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> mgr      <span class="token operator">|</span> <span class="token keyword">mediumint</span> <span class="token keyword">unsigned</span> <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> hiredate <span class="token operator">|</span> <span class="token keyword">date</span>               <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> sal      <span class="token operator">|</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>       <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> comm     <span class="token operator">|</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>       <span class="token operator">|</span> YES  <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token boolean">NULL</span>    <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> deptno   <span class="token operator">|</span> <span class="token keyword">mediumint</span> <span class="token keyword">unsigned</span> <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token number">0</span>       <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------+--------------------+------+-----+---------+-------+</span>

<span class="token comment"># 再把emp复制给他</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> my_table02 <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Query OK<span class="token punctuation">,</span> <span class="token number">13</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>
<span class="token comment">#再执行一次复制内容</span>
Query OK<span class="token punctuation">,</span> <span class="token number">26</span> <span class="token keyword">rows</span> affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="表的去重" tabindex="-1"><a class="header-anchor" href="#表的去重" aria-hidden="true">#</a> 表的去重</h3><p>去重方式网上应该有更多种，这里举例一种最笨的方法</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 表的去重</span>

<span class="token comment"># 1. 先创建一张临时表my_emp 该表的结构和my_table02完全相同</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> my_emp <span class="token operator">like</span> my_table02<span class="token punctuation">;</span>

<span class="token comment"># 2.把 my_table02的记录，通过 distinct 关键字处理后，复制给my_emp;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> my_emp <span class="token keyword">select</span> <span class="token keyword">DISTINCT</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_table02<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
Records: <span class="token number">12</span>  Duplicates: <span class="token number">0</span>  <span class="token keyword">Warnings</span>: <span class="token number">0</span>

<span class="token comment"># 3. 清除掉 my_table02的所有记录 这里的delete可以换成truncate使其不缓存删除的数据</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> my_table02<span class="token punctuation">;</span>

<span class="token comment"># 4. 把my_emp的表复制给 my_table02;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> my_table02 <span class="token keyword">select</span> <span class="token keyword">DISTINCT</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_emp<span class="token punctuation">;</span>

<span class="token comment"># 5. drop 掉 临时表 my_emp;</span>

<span class="token keyword">drop</span> <span class="token keyword">table</span> my_emp<span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
<span class="token operator">|</span> empno <span class="token operator">|</span> ename  <span class="token operator">|</span> job       <span class="token operator">|</span> mgr  <span class="token operator">|</span> hiredate   <span class="token operator">|</span> sal     <span class="token operator">|</span> comm    <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
<span class="token operator">|</span>  <span class="token number">7369</span> <span class="token operator">|</span> SMITH  <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7902</span> <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">800.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7521</span> <span class="token operator">|</span> WARD   <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">20</span> <span class="token operator">|</span> <span class="token number">1600.00</span> <span class="token operator">|</span>  <span class="token number">300.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7566</span> <span class="token operator">|</span> JONES  <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">02</span><span class="token operator">-</span><span class="token number">22</span> <span class="token operator">|</span> <span class="token number">2100.02</span> <span class="token operator">|</span>  <span class="token number">500.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7654</span> <span class="token operator">|</span> MARTIN <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7939</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">28</span> <span class="token operator">|</span>  <span class="token number">645.20</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7782</span> <span class="token operator">|</span> BLACK  <span class="token operator">|</span> SALESMAN  <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1995</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">17</span> <span class="token operator">|</span>  <span class="token number">625.00</span> <span class="token operator">|</span> <span class="token number">1250.00</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7788</span> <span class="token operator">|</span> COALK  <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1997</span><span class="token operator">-</span><span class="token number">04</span><span class="token operator">-</span><span class="token number">19</span> <span class="token operator">|</span> <span class="token number">3954.20</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7839</span> <span class="token operator">|</span> SOCTT  <span class="token operator">|</span> MANAGER   <span class="token operator">|</span> <span class="token number">7939</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">03</span> <span class="token operator">|</span> <span class="token number">2681.30</span> <span class="token operator">|</span> <span class="token number">2450.00</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7844</span> <span class="token operator">|</span> KING   <span class="token operator">|</span> ANALYST   <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span> <span class="token number">1992</span><span class="token operator">-</span><span class="token number">05</span><span class="token operator">-</span><span class="token number">07</span> <span class="token operator">|</span> <span class="token number">1564.60</span> <span class="token operator">|</span>  <span class="token number">211.00</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7900</span> <span class="token operator">|</span> TURNER <span class="token operator">|</span> PRESIDENT <span class="token operator">|</span> <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token number">1888</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">01</span> <span class="token operator">|</span> <span class="token number">2435.00</span> <span class="token operator">|</span>    <span class="token boolean">NULL</span> <span class="token operator">|</span>     <span class="token number">30</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7902</span> <span class="token operator">|</span> JAMES  <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7698</span> <span class="token operator">|</span> <span class="token number">1996</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">13</span> <span class="token operator">|</span>  <span class="token number">433.10</span> <span class="token operator">|</span>  <span class="token number">255.52</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7934</span> <span class="token operator">|</span> FORD   <span class="token operator">|</span> ANALYST   <span class="token operator">|</span> <span class="token number">7566</span> <span class="token operator">|</span> <span class="token number">1990</span><span class="token operator">-</span><span class="token number">06</span><span class="token operator">-</span><span class="token number">03</span> <span class="token operator">|</span> <span class="token number">6321.50</span> <span class="token operator">|</span>  <span class="token number">153.03</span> <span class="token operator">|</span>     <span class="token number">10</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">7966</span> <span class="token operator">|</span> MILLER <span class="token operator">|</span> CLERK     <span class="token operator">|</span> <span class="token number">7782</span> <span class="token operator">|</span> <span class="token number">1991</span><span class="token operator">-</span><span class="token number">10</span><span class="token operator">-</span><span class="token number">12</span> <span class="token operator">|</span>  <span class="token number">735.05</span> <span class="token operator">|</span>  <span class="token number">453.25</span> <span class="token operator">|</span>     <span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+--------+-----------+------+------------+---------+---------+--------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="合并查询-union、union-all" tabindex="-1"><a class="header-anchor" href="#合并查询-union、union-all" aria-hidden="true">#</a> 合并查询-UNION、UNION ALL</h2><figure><img src="`+B+'" alt="image-20211122154537661" tabindex="0" loading="lazy"><figcaption>image-20211122154537661</figcaption></figure><figure><img src="'+G+'" alt="image-20211122154637130" tabindex="0" loading="lazy"><figcaption>image-20211122154637130</figcaption></figure><h2 id="多表查询-外连接" tabindex="-1"><a class="header-anchor" href="#多表查询-外连接" aria-hidden="true">#</a> 多表查询-外连接</h2><figure><img src="'+j+`" alt="image-20211122154827000" tabindex="0" loading="lazy"><figcaption>image-20211122154827000</figcaption></figure><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 这里使用mgr  上级名称来演示</span>
<span class="token keyword">select</span> worker<span class="token punctuation">.</span>ename <span class="token keyword">as</span> <span class="token string">&quot;员工名称&quot;</span><span class="token punctuation">,</span>worker<span class="token punctuation">.</span>job <span class="token string">&quot;员工工作&quot;</span><span class="token punctuation">,</span>worker<span class="token punctuation">.</span>mgr <span class="token string">&quot;员工上级&quot;</span> <span class="token punctuation">,</span>boss<span class="token punctuation">.</span>ename <span class="token string">&quot;上级名称&quot;</span>
 <span class="token keyword">from</span> emp <span class="token keyword">as</span> worker<span class="token punctuation">,</span>emp <span class="token keyword">as</span> boss
 <span class="token keyword">where</span> worker<span class="token punctuation">.</span>mgr <span class="token operator">=</span> boss<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+--------------+</span>
<span class="token operator">|</span> 员工名称       <span class="token operator">|</span> 员工工作      <span class="token operator">|</span> 员工上级      <span class="token operator">|</span> 上级名称     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+--------------+</span>
<span class="token operator">|</span> FORD         <span class="token operator">|</span> ANALYST      <span class="token operator">|</span>         <span class="token number">7566</span> <span class="token operator">|</span> JONES        <span class="token operator">|</span>
<span class="token operator">|</span> KING         <span class="token operator">|</span> ANALYST      <span class="token operator">|</span>         <span class="token number">7566</span> <span class="token operator">|</span> JONES        <span class="token operator">|</span>
<span class="token operator">|</span> MILLER       <span class="token operator">|</span> CLERK        <span class="token operator">|</span>         <span class="token number">7782</span> <span class="token operator">|</span> BLACK        <span class="token operator">|</span>
<span class="token operator">|</span> MILLER       <span class="token operator">|</span> CLERK        <span class="token operator">|</span>         <span class="token number">7782</span> <span class="token operator">|</span> BLACK        <span class="token operator">|</span>
<span class="token operator">|</span> SMITH        <span class="token operator">|</span> CLERK        <span class="token operator">|</span>         <span class="token number">7902</span> <span class="token operator">|</span> JAMES        <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+--------------+</span>
<span class="token comment"># 可以看到，有些没有上级的员工是无法显示的，只显示了有上级的，为此需要外连接来让员工的上级可以完全显示</span>
<span class="token comment"># 即使他没有上级，也要显示null</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Mysql中外连接分为两种</p><h3 id="左外连接" tabindex="-1"><a class="header-anchor" href="#左外连接" aria-hidden="true">#</a> 左外连接</h3><ul><li><p>左外连接 如果<code>左侧的表能够完全显示</code>就是左外连接</p><ul><li><p><strong>左边的表即使和右边的表</strong>没有完全匹配的记录也能完全显示出来</p></li><li><p>语法：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> 字段  <span class="token keyword">from</span>
 左边的表 <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> 右边的表
 <span class="token keyword">ON</span> 左边的表的某个值 <span class="token operator">=</span> 右边的表的某个值<span class="token punctuation">;</span>

<span class="token comment"># 使用左外连接，显示所有员工的上级，包括没有上级的员工</span>
<span class="token keyword">select</span> worker<span class="token punctuation">.</span>ename <span class="token keyword">as</span> <span class="token string">&quot;员工名称&quot;</span><span class="token punctuation">,</span>worker<span class="token punctuation">.</span>job <span class="token string">&quot;员工工作&quot;</span><span class="token punctuation">,</span>worker<span class="token punctuation">.</span>mgr <span class="token string">&quot;员工上级&quot;</span> <span class="token punctuation">,</span>boss<span class="token punctuation">.</span>ename <span class="token string">&quot;上级名称&quot;</span>
 <span class="token keyword">from</span> emp <span class="token keyword">as</span> worker <span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> emp <span class="token keyword">as</span> boss
 <span class="token keyword">ON</span> worker<span class="token punctuation">.</span>mgr <span class="token operator">=</span> boss<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+--------------+</span>
<span class="token operator">|</span> 员工名称      <span class="token operator">|</span> 员工工作       <span class="token operator">|</span> 员工上级      <span class="token operator">|</span> 上级名称      <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+--------------+</span>
<span class="token operator">|</span> SMITH        <span class="token operator">|</span> CLERK        <span class="token operator">|</span>         <span class="token number">7902</span> <span class="token operator">|</span> JAMES        <span class="token operator">|</span>
<span class="token operator">|</span> WARD         <span class="token operator">|</span> SALESMAN     <span class="token operator">|</span>         <span class="token number">7698</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>         <span class="token operator">|</span>
<span class="token operator">|</span> JONES        <span class="token operator">|</span> SALESMAN     <span class="token operator">|</span>         <span class="token number">7698</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>         <span class="token operator">|</span>
<span class="token operator">|</span> MARTIN       <span class="token operator">|</span> MANAGER      <span class="token operator">|</span>         <span class="token number">7939</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>         <span class="token operator">|</span>
<span class="token operator">|</span> BLACK        <span class="token operator">|</span> SALESMAN     <span class="token operator">|</span>         <span class="token number">7698</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>         <span class="token operator">|</span>
<span class="token operator">|</span> COALK        <span class="token operator">|</span> MANAGER      <span class="token operator">|</span>         <span class="token number">7698</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>         <span class="token operator">|</span>
<span class="token operator">|</span> SOCTT        <span class="token operator">|</span> MANAGER      <span class="token operator">|</span>         <span class="token number">7939</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>         <span class="token operator">|</span>
<span class="token operator">|</span> KING         <span class="token operator">|</span> ANALYST      <span class="token operator">|</span>         <span class="token number">7566</span> <span class="token operator">|</span> JONES        <span class="token operator">|</span>
<span class="token operator">|</span> TURNER       <span class="token operator">|</span> PRESIDENT    <span class="token operator">|</span>         <span class="token boolean">NULL</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>         <span class="token operator">|</span>
<span class="token operator">|</span> JAMES        <span class="token operator">|</span> CLERK        <span class="token operator">|</span>         <span class="token number">7698</span> <span class="token operator">|</span> <span class="token boolean">NULL</span>         <span class="token operator">|</span>
<span class="token operator">|</span> FORD         <span class="token operator">|</span> ANALYST      <span class="token operator">|</span>         <span class="token number">7566</span> <span class="token operator">|</span> JONES        <span class="token operator">|</span>
<span class="token operator">|</span> MILLER       <span class="token operator">|</span> CLERK        <span class="token operator">|</span>         <span class="token number">7782</span> <span class="token operator">|</span> BLACK        <span class="token operator">|</span>
<span class="token operator">|</span> MILLER       <span class="token operator">|</span> CLERK        <span class="token operator">|</span>         <span class="token number">7782</span> <span class="token operator">|</span> BLACK        <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------+--------------+--------------+--------------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h3 id="右外连接" tabindex="-1"><a class="header-anchor" href="#右外连接" aria-hidden="true">#</a> 右外连接</h3><ul><li><p>右外连接 如果<code>右侧的表能完全显示</code>就是右外连接</p><ul><li><p><strong>右边的表即使和左边的表</strong>没有完全匹配的记录也能完全显示出来</p></li><li><p>语法</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> 字段  <span class="token keyword">from</span>
 左边的表 <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> 右边的表
 <span class="token keyword">ON</span> 右边的表的某个值 <span class="token operator">=</span> 左边的表的某个值<span class="token punctuation">;</span>

<span class="token comment"># 使用左外连接，显示所有员工的下级，即使没有下级</span>
<span class="token keyword">select</span> worker<span class="token punctuation">.</span>ename <span class="token keyword">as</span> <span class="token string">&quot;下级员工名称&quot;</span><span class="token punctuation">,</span>worker<span class="token punctuation">.</span>job <span class="token string">&quot;下级员工工作&quot;</span><span class="token punctuation">,</span>worker<span class="token punctuation">.</span>mgr <span class="token string">&quot;管理者ID&quot;</span> <span class="token punctuation">,</span>boss<span class="token punctuation">.</span>ename <span class="token string">&quot;管理者名称&quot;</span>
 <span class="token keyword">from</span> emp <span class="token keyword">as</span> worker <span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> emp <span class="token keyword">as</span> boss
 <span class="token keyword">ON</span> worker<span class="token punctuation">.</span>mgr <span class="token operator">=</span> boss<span class="token punctuation">.</span>empno<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------+--------------------+-------------+-----------------+</span>
<span class="token operator">|</span> 下级员工名称         <span class="token operator">|</span> 下级员工工作         <span class="token operator">|</span> 管理者ID     <span class="token operator">|</span> 管理者名称       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+--------------------+-------------+-----------------+</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span>        <span class="token boolean">NULL</span> <span class="token operator">|</span> SMITH           <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span>        <span class="token boolean">NULL</span> <span class="token operator">|</span> WARD            <span class="token operator">|</span>
<span class="token operator">|</span> FORD               <span class="token operator">|</span> ANALYST            <span class="token operator">|</span>        <span class="token number">7566</span> <span class="token operator">|</span> JONES           <span class="token operator">|</span>
<span class="token operator">|</span> KING               <span class="token operator">|</span> ANALYST            <span class="token operator">|</span>        <span class="token number">7566</span> <span class="token operator">|</span> JONES           <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span>        <span class="token boolean">NULL</span> <span class="token operator">|</span> MARTIN          <span class="token operator">|</span>
<span class="token operator">|</span> MILLER             <span class="token operator">|</span> CLERK              <span class="token operator">|</span>        <span class="token number">7782</span> <span class="token operator">|</span> BLACK           <span class="token operator">|</span>
<span class="token operator">|</span> MILLER             <span class="token operator">|</span> CLERK              <span class="token operator">|</span>        <span class="token number">7782</span> <span class="token operator">|</span> BLACK           <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span>        <span class="token boolean">NULL</span> <span class="token operator">|</span> COALK           <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span>        <span class="token boolean">NULL</span> <span class="token operator">|</span> SOCTT           <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span>        <span class="token boolean">NULL</span> <span class="token operator">|</span> KING            <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span>        <span class="token boolean">NULL</span> <span class="token operator">|</span> TURNER          <span class="token operator">|</span>
<span class="token operator">|</span> SMITH              <span class="token operator">|</span> CLERK              <span class="token operator">|</span>        <span class="token number">7902</span> <span class="token operator">|</span> JAMES           <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span>        <span class="token boolean">NULL</span> <span class="token operator">|</span> FORD            <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span>        <span class="token boolean">NULL</span> <span class="token operator">|</span> MILLER          <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span> <span class="token boolean">NULL</span>               <span class="token operator">|</span>        <span class="token boolean">NULL</span> <span class="token operator">|</span> MILLER          <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+--------------------+-------------+-----------------+</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h1 id="mysql约束" tabindex="-1"><a class="header-anchor" href="#mysql约束" aria-hidden="true">#</a> Mysql约束</h1><p>嘛，这玩意可能是sql中创建表时必备的玩意了</p><h2 id="primary-key-主键约束" tabindex="-1"><a class="header-anchor" href="#primary-key-主键约束" aria-hidden="true">#</a> Primary key 主键约束</h2><p>语法：<code>字段名 字段类型 PRIMARY KEY</code></p><p>用于唯一的标识该字段（表行）的数据当定义主键后，该列<strong>不能重复</strong></p><p>这个 。。。只能说是一张表都得用它</p><figure><img src="`+z+`" alt="image-20211122163807238" tabindex="0" loading="lazy"><figcaption>image-20211122163807238</figcaption></figure><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 前面添加主键</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
 id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 后面添加主键</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
 id <span class="token keyword">int</span> <span class="token punctuation">,</span>
    email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 一个表最多只能有一个主键，但是可以有复合主键</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
 id <span class="token keyword">int</span><span class="token punctuation">,</span>
    email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>email<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 让这两个值都不能重复</span>

<span class="token comment"># 但是不能两种方式一起用</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
 id <span class="token keyword">int</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span> <span class="token comment">-- 绝对不能先在这定义主键后又在尾部定义主键 只能二选一</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="not-null-非空约束" tabindex="-1"><a class="header-anchor" href="#not-null-非空约束" aria-hidden="true">#</a> NOT NULL 非空约束</h2><p>这个不多说了</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
 字段名 字段类型 <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="unique-唯一约束" tabindex="-1"><a class="header-anchor" href="#unique-唯一约束" aria-hidden="true">#</a> UNIQUE 唯一约束</h2><p>让某个字段不能有重复值</p><p>注意，这玩意一定要配合非空约束<code>not null</code>来使用</p><p>如果没有指定<code>not null</code>，则<code>unique</code>字段可以有多个null</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
 字段值 字段类型 <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">UNIQUE</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="foreign-key-外键约束" tabindex="-1"><a class="header-anchor" href="#foreign-key-外键约束" aria-hidden="true">#</a> FOREIGN KEY 外键约束</h2><p>语法：<code>FOREIGN KEY (本表字段名) REFERENCES 主表名(主键名或UNIQUE字段名)</code></p><p>用语定义主表和从表之间 关系，外键约束要定义在从表上，且主表必须具有主键约束或是<code>unique</code>约束，当定义外键约束后，要求外键约束的字段（列）的数据（值）必须在主表的主键列存在或是为null</p><p>外键约束定义后，若主表要删除某个值，且该值正在外界约束的影响下，且从表正在使用他，需要先删除正在使用它的从表中用了它的内容，才能删除它的值</p><p><strong>一个从表中，外键可以有多个，任何表都可以是从表</strong></p><figure><img src="`+H+'" alt="image-20211122170615206" tabindex="0" loading="lazy"><figcaption>image-20211122170615206</figcaption></figure><figure><img src="'+Y+'" alt="image-20211122164902068" tabindex="0" loading="lazy"><figcaption>image-20211122164902068</figcaption></figure><figure><img src="'+F+`" alt="image-20211122164935895" tabindex="0" loading="lazy"><figcaption>image-20211122164935895</figcaption></figure><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> class_tab<span class="token punctuation">(</span>
 id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#学生表，外键约束</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> student_tab<span class="token punctuation">(</span>
 id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span> 
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">default</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    class_id <span class="token keyword">int</span><span class="token punctuation">,</span>
    <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>class_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> class_tab <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 测试数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> class_tab <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;1年级1班&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;2年级2班&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> student_tab <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;李四&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#插入这条将会报错</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> student_tab <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;王老五&quot;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#Cannot add or update a child row: a foreign key constraint fails (\`db1\`.\`student_tab\`, CONSTRAINT \`student_tab_ibfk_1\` FOREIGN KEY (\`class_id\`) REFERENCES \`class_tab\` (\`id\`))</span>

<span class="token comment"># 插入该班级后再插入值 将可以正常插入</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> class_tab <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;3年级3班&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> student_tab <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&quot;王老五&quot;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 当然，如果在图形化软件里面，可以更直观的看到外键</span>
<span class="token operator">+</span><span class="token comment">----+-------------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name        <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">1</span>年级<span class="token number">1</span>班    <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> <span class="token number">2</span>年级<span class="token number">2</span>班    <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> <span class="token number">3</span>年级<span class="token number">3</span>班    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-------------+</span>

<span class="token operator">+</span><span class="token comment">----+-----------+----------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name      <span class="token operator">|</span> class_id <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------+----------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三      <span class="token operator">|</span>        <span class="token number">1</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 李四      <span class="token operator">|</span>        <span class="token number">2</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">3</span> <span class="token operator">|</span> 王老五    <span class="token operator">|</span>        <span class="token number">3</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+-----------+----------+</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>图形化界面可以轻松地选择外键</p><figure><img src="`+V+'" alt="image-20211122170505505" tabindex="0" loading="lazy"><figcaption>image-20211122170505505</figcaption></figure><h2 id="check约束-要求字段满足指定条件-枚举约定" tabindex="-1"><a class="header-anchor" href="#check约束-要求字段满足指定条件-枚举约定" aria-hidden="true">#</a> Check约束 -要求字段满足指定条件（枚举约定）</h2><figure><img src="'+P+`" alt="image-20211122171017894" tabindex="0" loading="lazy"><figcaption>image-20211122171017894</figcaption></figure><p>在Mysql8.0中，已经可以支持验证了，插入不合法的值，将插入失效</p><p>在<code>oracle</code>、<code>sql server</code>中，这个约束是一定会生效的</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> my_test_nx<span class="token punctuation">(</span>
 id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">CHECK</span> <span class="token punctuation">(</span>sex <span class="token operator">IN</span><span class="token punctuation">(</span><span class="token string">&#39;man&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;woman&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    sal <span class="token keyword">double</span> <span class="token keyword">check</span><span class="token punctuation">(</span>sal<span class="token operator">&gt;</span><span class="token number">1000</span> <span class="token operator">and</span> sal<span class="token operator">&lt;</span><span class="token number">2000</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> my_test_nx <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&#39;张三&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;man&#39;</span><span class="token punctuation">,</span><span class="token number">1001</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> my_test_nx <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&#39;李四&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;woman&#39;</span><span class="token punctuation">,</span><span class="token number">1999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># mysql8 中 这条将插入失效</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> my_test_nx <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&#39;王老五&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;男&#39;</span><span class="token punctuation">,</span><span class="token number">1999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># ERROR 3819 (HY000): Check constraint &#39;my_test_nx_chk_1&#39; is violated.</span>
<span class="token comment"># 这条也是</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> my_test_nx <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&#39;王老五&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;man&#39;</span><span class="token punctuation">,</span><span class="token number">22333</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># ERROR 3819 (HY000): Check constraint &#39;my_test_nx_chk_2&#39; is violated.</span>

<span class="token operator">+</span><span class="token comment">----+--------+-------+------+</span>
<span class="token operator">|</span> id <span class="token operator">|</span> name   <span class="token operator">|</span> sex   <span class="token operator">|</span> sal  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------+-------+------+</span>
<span class="token operator">|</span>  <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span> man   <span class="token operator">|</span> <span class="token number">1001</span> <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">2</span> <span class="token operator">|</span> 李四   <span class="token operator">|</span> woman <span class="token operator">|</span> <span class="token number">1999</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----+--------+-------+------+</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="auto-increment-自增长" tabindex="-1"><a class="header-anchor" href="#auto-increment-自增长" aria-hidden="true">#</a> Auto_increment-自增长</h2><p>如其名，自动增长，适用于主键等 通常情况下主键都会用它</p><p>也得名：主键自增</p><figure><img src="`+W+`" alt="image-20211122173148429" tabindex="0" loading="lazy"><figcaption>image-20211122173148429</figcaption></figure><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">#自增长</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> test_auto<span class="token punctuation">(</span>
 id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 修改默认的自增长开始的值</span>
<span class="token comment"># 1.创建时指定</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> test_auto<span class="token punctuation">(</span>
 id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">auto_increment</span><span class="token operator">=</span><span class="token number">10001</span><span class="token punctuation">;</span>
<span class="token comment"># 2 创建后修改</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> test_auto <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="自增长增归零" tabindex="-1"><a class="header-anchor" href="#自增长增归零" aria-hidden="true">#</a> 自增长增归零</h3><p>·如果曾经的数据都不需要的话，可以直接清空所有数据，并将自增字段恢复从1开始计数<br><code>truncate table 表名</code></p><p>或者要保留数据，但是后插入的数据都是按照新的值来开始计算</p><p><code>ALTER TABLE 表名 AUTO_INCREMENT = 值;</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> test_auto<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;jock&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&#39;having&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&#39;booluse&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+---------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+---------+</span>
<span class="token operator">|</span> <span class="token number">1000</span> <span class="token operator">|</span> jock    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">1001</span> <span class="token operator">|</span> <span class="token keyword">having</span>  <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">1002</span> <span class="token operator">|</span> booluse <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+---------+</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> test_auto <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">=</span> <span class="token number">6666</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> test_auto<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&#39;jiny&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&#39;makr&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token string">&#39;ddd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+---------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name    <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+---------+</span>
<span class="token operator">|</span> <span class="token number">1000</span> <span class="token operator">|</span> jock    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">1001</span> <span class="token operator">|</span> <span class="token keyword">having</span>  <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">1002</span> <span class="token operator">|</span> booluse <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">6666</span> <span class="token operator">|</span> jiny    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">6667</span> <span class="token operator">|</span> makr    <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">6668</span> <span class="token operator">|</span> ddd     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+---------+</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="mysql索引" tabindex="-1"><a class="header-anchor" href="#mysql索引" aria-hidden="true">#</a> Mysql索引</h1><figure><img src="`+Q+'" alt="image-20211122173232565" tabindex="0" loading="lazy"><figcaption>image-20211122173232565</figcaption></figure>',132),en={href:"https://blog.csdn.net/qq_40530040/article/details/107623254",target:"_blank",rel:"noopener noreferrer"},pn=p(`<p>或者按照下方代码顺序的运行( 分开运行)</p><p>第一步： 这一步可能会出错，出错的话就三个建表的分开执行即可</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 第一行代码的用途：https://blog.csdn.net/topasstem8/article/details/8216740/</span>
<span class="token keyword">set</span> <span class="token keyword">global</span> log_bin_trust_function_creators<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">;</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> dept<span class="token punctuation">(</span> <span class="token comment">/*部门表*/</span>
deptno <span class="token keyword">MEDIUMINT</span>   <span class="token keyword">UNSIGNED</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span>  <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span>
dname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span>  <span class="token keyword">DEFAULT</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
loc <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token comment">#创建表EMP雇员</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp
<span class="token punctuation">(</span>empno  <span class="token keyword">MEDIUMINT</span> <span class="token keyword">UNSIGNED</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span>  <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">/*编号*/</span>
ename <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token comment">/*名字*/</span>
job <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token comment">/*工作*/</span>
mgr <span class="token keyword">MEDIUMINT</span> <span class="token keyword">UNSIGNED</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span><span class="token comment">/*上级编号*/</span>
hiredate <span class="token keyword">DATE</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token comment">/*入职时间*/</span>
sal <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token comment">/*薪水*/</span>
comm <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token comment">/*红利*/</span>
deptno <span class="token keyword">MEDIUMINT</span> <span class="token keyword">UNSIGNED</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span> <span class="token comment">/*部门编号*/</span>
<span class="token punctuation">)</span> <span class="token punctuation">;</span>
<span class="token comment">#工资级别表</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> salgrade
<span class="token punctuation">(</span>
grade <span class="token keyword">MEDIUMINT</span> <span class="token keyword">UNSIGNED</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token number">0</span><span class="token punctuation">,</span>
losal <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
hisal <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">17</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#测试数据</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salgrade <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">700</span><span class="token punctuation">,</span><span class="token number">1200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salgrade <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1201</span><span class="token punctuation">,</span><span class="token number">1400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salgrade <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1401</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salgrade <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2001</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> salgrade <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">3001</span><span class="token punctuation">,</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第二步</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">delimiter</span> $$

<span class="token comment">#创建一个函数，名字 rand_string，可以随机返回我指定的个数字符串</span>
<span class="token keyword">create</span> <span class="token keyword">function</span> rand_string<span class="token punctuation">(</span>n <span class="token keyword">INT</span><span class="token punctuation">)</span>
<span class="token keyword">returns</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token comment">#该函数会返回一个字符串</span>
<span class="token keyword">begin</span>
<span class="token comment">#定义了一个变量 chars_str， 类型  varchar(100)</span>
<span class="token comment">#默认给 chars_str 初始值   &#39;abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ&#39;</span>
 <span class="token keyword">declare</span> chars_str <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">default</span>
   <span class="token string">&#39;abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ&#39;</span><span class="token punctuation">;</span> 
 <span class="token keyword">declare</span> return_str <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
 <span class="token keyword">declare</span> i <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span> 
 <span class="token keyword">while</span> i <span class="token operator">&lt;</span> n 
 <span class="token keyword">do</span>
    <span class="token comment"># concat 函数 : 连接函数mysql函数</span>
   <span class="token keyword">set</span> return_str <span class="token operator">=</span>concat<span class="token punctuation">(</span>return_str<span class="token punctuation">,</span>substring<span class="token punctuation">(</span>chars_str<span class="token punctuation">,</span>floor<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">52</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">set</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
   <span class="token keyword">end</span> <span class="token keyword">while</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> return_str<span class="token punctuation">;</span>
  <span class="token keyword">end</span> $$


<span class="token comment">#这里我们又自定了一个函数,返回一个随机的部门号</span>
<span class="token keyword">create</span> <span class="token keyword">function</span> rand_num<span class="token punctuation">(</span> <span class="token punctuation">)</span>
<span class="token keyword">returns</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
<span class="token keyword">declare</span> i <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> i <span class="token operator">=</span> floor<span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">+</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> i<span class="token punctuation">;</span>
<span class="token keyword">end</span> $$

 <span class="token comment">#创建一个存储过程， 可以添加雇员</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> insert_emp<span class="token punctuation">(</span><span class="token operator">in</span> <span class="token keyword">start</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">in</span> max_num <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
<span class="token keyword">declare</span> i <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">#set autocommit =0 把autocommit设置成0</span>
 <span class="token comment">#autocommit = 0 含义: 不要自动提交</span>
 <span class="token keyword">set</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">#默认不提交sql语句</span>
 <span class="token keyword">repeat</span>
 <span class="token keyword">set</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
 <span class="token comment">#通过前面写的函数随机产生字符串和部门编号，然后加入到emp表</span>
 <span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">start</span><span class="token operator">+</span>i<span class="token punctuation">)</span> <span class="token punctuation">,</span>rand_string<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;SALESMAN&#39;</span><span class="token punctuation">,</span><span class="token number">0001</span><span class="token punctuation">,</span>curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">,</span>rand_num<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  until i <span class="token operator">=</span> max_num
 <span class="token keyword">end</span> <span class="token keyword">repeat</span><span class="token punctuation">;</span>
 <span class="token comment">#commit整体提交所有sql语句，提高效率</span>
   <span class="token keyword">commit</span><span class="token punctuation">;</span>
 <span class="token keyword">end</span> $$

<span class="token comment">#这里我们又自定了一个函数,返回一个随机的部门号</span>
<span class="token keyword">create</span> <span class="token keyword">function</span> rand_num<span class="token punctuation">(</span> <span class="token punctuation">)</span>
<span class="token keyword">returns</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
<span class="token keyword">declare</span> i <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">set</span> i <span class="token operator">=</span> floor<span class="token punctuation">(</span><span class="token number">10</span><span class="token operator">+</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> i<span class="token punctuation">;</span>
<span class="token keyword">end</span> $$

 <span class="token comment">#创建一个存储过程， 可以添加雇员</span>
<span class="token keyword">create</span> <span class="token keyword">procedure</span> insert_emp<span class="token punctuation">(</span><span class="token operator">in</span> <span class="token keyword">start</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">in</span> max_num <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>
<span class="token keyword">declare</span> i <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">#set autocommit =0 把autocommit设置成0</span>
 <span class="token comment">#autocommit = 0 含义: 不要自动提交</span>
 <span class="token keyword">set</span> autocommit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">#默认不提交sql语句</span>
 <span class="token keyword">repeat</span>
 <span class="token keyword">set</span> i <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
 <span class="token comment">#通过前面写的函数随机产生字符串和部门编号，然后加入到emp表</span>
 <span class="token keyword">insert</span> <span class="token keyword">into</span> emp <span class="token keyword">values</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">start</span><span class="token operator">+</span>i<span class="token punctuation">)</span> <span class="token punctuation">,</span>rand_string<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&#39;SALESMAN&#39;</span><span class="token punctuation">,</span><span class="token number">0001</span><span class="token punctuation">,</span>curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">,</span><span class="token number">400</span><span class="token punctuation">,</span>rand_num<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  until i <span class="token operator">=</span> max_num
 <span class="token keyword">end</span> <span class="token keyword">repeat</span><span class="token punctuation">;</span>
 <span class="token comment">#commit整体提交所有sql语句，提高效率</span>
   <span class="token keyword">commit</span><span class="token punctuation">;</span>
 <span class="token keyword">end</span> $$
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第三步：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">delimiter</span> $$
<span class="token comment"># 这里是生成的数据量</span>
<span class="token keyword">CALL</span> insert_emp <span class="token punctuation">(</span> <span class="token number">100001</span><span class="token punctuation">,</span> <span class="token number">10000</span> <span class="token punctuation">)</span> $$
<span class="token keyword">DELIMITER</span><span class="token punctuation">;</span>
<span class="token comment"># 这里的10000 可以替换为自己想要的数值，我替换的是100w 用时300s</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对自己电脑有信心的话可以1000w，千万不要1个亿，除非你的时间和硬盘空间是真滴多</p><p>接下来尝试查询下：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno<span class="token operator">=</span><span class="token number">123456</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+------+------------+---------+--------+--------+</span>
<span class="token operator">|</span> empno  <span class="token operator">|</span> ename  <span class="token operator">|</span> job      <span class="token operator">|</span> mgr  <span class="token operator">|</span> hiredate   <span class="token operator">|</span> sal     <span class="token operator">|</span> comm   <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+------+------------+---------+--------+--------+</span>
<span class="token operator">|</span> <span class="token number">123456</span> <span class="token operator">|</span> qJxjJC <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">22</span> <span class="token operator">|</span> <span class="token number">2000.00</span> <span class="token operator">|</span> <span class="token number">400.00</span> <span class="token operator">|</span>    <span class="token number">432</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+------+------------+---------+--------+--------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.75</span> sec<span class="token punctuation">)</span>

<span class="token comment"># 可以看到，这只是插入了100w条数据，查询的速度就变成了0.75s</span>
<span class="token comment"># 1kw大概要5~10s</span>
<span class="token comment"># 如果在工作中，查个东西给用户要这么久时间，会被骂死..</span>
<span class="token comment"># 举个形象点的例子，打个游戏，买个装备，要在商店前等到5秒才能拿到装备</span>
<span class="token comment"># 5秒在那里卡着干等，什么都做不了</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>接下来使用索引优化下表</p><figure><img src="`+X+`" alt="image-20211122204414063" tabindex="0" loading="lazy"><figcaption>image-20211122204414063</figcaption></figure><p>优化前，这个表是72mb，查询一次大概要1s的时间</p><h2 id="创建索引" tabindex="-1"><a class="header-anchor" href="#创建索引" aria-hidden="true">#</a> 创建索引</h2><p>语法：<code>CREATE INDEX 索引名 ON 表名(字段);</code></p><p>索引创建需要时间，索引跟数据一样，也占用空间</p><p>但是能对查询速度有显著提升</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> empno_index <span class="token keyword">ON</span> emp<span class="token punctuation">(</span>empno<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># empno_index 索引名称</span>
<span class="token comment"># ON emp(empno) 表示在表emp的empno这个字段创建索引;</span>
<span class="token comment"># 我这里创建索引花了3s</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+$+`" alt="image-20211122204942231" tabindex="0" loading="lazy"><figcaption>image-20211122204942231</figcaption></figure><p>创建完毕后，文件大了10mb</p><p>索引本身也是会占用磁盘空间</p><p>接下来尝试搜索下</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno<span class="token operator">=</span><span class="token number">123486</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+-----+------------+---------+--------+--------+</span>
<span class="token operator">|</span> empno  <span class="token operator">|</span> ename  <span class="token operator">|</span> job      <span class="token operator">|</span> mgr <span class="token operator">|</span> hiredate   <span class="token operator">|</span> sal     <span class="token operator">|</span> comm   <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+-----+------------+---------+--------+--------+</span>
<span class="token operator">|</span> <span class="token number">123486</span> <span class="token operator">|</span> XHtVyJ <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">22</span> <span class="token operator">|</span> <span class="token number">2000.00</span> <span class="token operator">|</span> <span class="token number">400.00</span> <span class="token operator">|</span>    <span class="token number">365</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+-----+------------+---------+--------+--------+</span>
<span class="token number">1</span> <span class="token keyword">row</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>
<span class="token comment"># 瞬间完成...</span>
<span class="token comment"># 如果是1000w条数据，也是可以这样完成 不信的话自行尝试...</span>

<span class="token comment"># 当然，创建索引后，只对创建了索引的列有效</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename<span class="token operator">=</span><span class="token string">&#39;SxKgBm&#39;</span><span class="token punctuation">;</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename<span class="token operator">=</span><span class="token string">&#39;SxKgBm&#39;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+-----+------------+---------+--------+--------+</span>
<span class="token operator">|</span> empno  <span class="token operator">|</span> ename  <span class="token operator">|</span> job      <span class="token operator">|</span> mgr <span class="token operator">|</span> hiredate   <span class="token operator">|</span> sal     <span class="token operator">|</span> comm   <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+-----+------------+---------+--------+--------+</span>
<span class="token operator">|</span> <span class="token number">114014</span> <span class="token operator">|</span> SxKgBm <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">22</span> <span class="token operator">|</span> <span class="token number">2000.00</span> <span class="token operator">|</span> <span class="token number">400.00</span> <span class="token operator">|</span>    <span class="token number">339</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">627592</span> <span class="token operator">|</span> SxKgBm <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">22</span> <span class="token operator">|</span> <span class="token number">2000.00</span> <span class="token operator">|</span> <span class="token number">400.00</span> <span class="token operator">|</span>    <span class="token number">326</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+-----+------------+---------+--------+--------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.84</span> sec<span class="token punctuation">)</span>
<span class="token comment"># 没创建索引的列依旧要1s左右的时间</span>

<span class="token comment"># 如果为enmae 也创建个索引：</span>
<span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> ename_index <span class="token keyword">ON</span> emp<span class="token punctuation">(</span>ename<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 创建完毕后，文件变成了108MB</span>
<span class="token comment"># 搜索</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> ename<span class="token operator">=</span><span class="token string">&#39;SxKgBm&#39;</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+-----+------------+---------+--------+--------+</span>
<span class="token operator">|</span> empno  <span class="token operator">|</span> ename  <span class="token operator">|</span> job      <span class="token operator">|</span> mgr <span class="token operator">|</span> hiredate   <span class="token operator">|</span> sal     <span class="token operator">|</span> comm   <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+-----+------------+---------+--------+--------+</span>
<span class="token operator">|</span> <span class="token number">114014</span> <span class="token operator">|</span> SxKgBm <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">22</span> <span class="token operator">|</span> <span class="token number">2000.00</span> <span class="token operator">|</span> <span class="token number">400.00</span> <span class="token operator">|</span>    <span class="token number">339</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">627592</span> <span class="token operator">|</span> SxKgBm <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">22</span> <span class="token operator">|</span> <span class="token number">2000.00</span> <span class="token operator">|</span> <span class="token number">400.00</span> <span class="token operator">|</span>    <span class="token number">326</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+-----+------------+---------+--------+--------+</span>
<span class="token number">2</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">0.00</span> sec<span class="token punctuation">)</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当然，目前也有很多不良程序员，会直接把产品给用户用，直到用户发觉很慢的时候，让用户加钱优化</p><h2 id="索引机制" tabindex="-1"><a class="header-anchor" href="#索引机制" aria-hidden="true">#</a> 索引机制</h2><p>下图到查询到1后不确定后面还没有没有id=1的，所以要全表扫描</p><figure><img src="`+Z+'" alt="image-20211122211047180" tabindex="0" loading="lazy"><figcaption>image-20211122211047180</figcaption></figure><figure><img src="'+ss+'" alt="image-20211122212123404" tabindex="0" loading="lazy"><figcaption>image-20211122212123404</figcaption></figure><p>索引快的原因</p><ul><li>形成了二叉树或B树等 数据结构，让查询起来变得高效快捷 <ul><li>二叉树这玩意以后一定得学</li></ul></li></ul><p>索引的代价</p><ul><li><p>磁盘占用增加</p><ul><li>索引的数据结构也是要占用空间的</li></ul></li><li><p>DML(update delete insert)效率变慢（影响不是很大）</p><ul><li>增删改一个数据后，要重新的去维护这个索引</li></ul><figure><img src="'+ns+`" alt="image-20211122212421742" tabindex="0" loading="lazy"><figcaption>image-20211122212421742</figcaption></figure></li></ul><p>当然，在实际项目中，实际上90%左右的业务都是在进行查询，只有10%左右的业务在进行增删改</p><h2 id="索引的类型" tabindex="-1"><a class="header-anchor" href="#索引的类型" aria-hidden="true">#</a> 索引的类型</h2><ol><li><p>主键索引，主键自动为主索引（加了<code>primary key</code>的字段就不需要加其他的索引了）</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code>crate <span class="token keyword">table</span> t1<span class="token punctuation">(</span>
 id <span class="token keyword">int</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span>
    <span class="token comment"># 主键，同时也是索引，称为主键索引</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>唯一索引<code>unique</code> 同上</p></li><li><p>普通索引<code>index</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> 索引名 <span class="token keyword">ON</span> 表名<span class="token punctuation">(</span>字段<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>全文索引(<code>fulltext</code>)</p><ul><li>mysq自带这玩意，但是不好用，效率也比较低</li><li>在实际开发中，很少会用mysql自带的全文索引，一般都是用一些框架的全文搜索： <ul><li>比如Java的<code>Solr</code>和<code>ElasticSearch</code>框架</li></ul></li><li>一般开发中不使用mysql自带的全文索引（任何语言都是如此）</li></ul></li></ol><h2 id="各种类型的索引添加、查询、删除、修改" tabindex="-1"><a class="header-anchor" href="#各种类型的索引添加、查询、删除、修改" aria-hidden="true">#</a> 各种类型的索引添加、查询、删除、修改</h2><p><strong>添加索引：</strong></p><p><code>create [可选 UNIQUE] index 索引名 on 表名(字段1 [可选：length] [可选 ASC|DESC], 字段2... )</code></p><p>如果某列的值是不会重复的，则优先考虑unique索引</p><p>添加unique索引的同时也会添加唯一约束</p><p>或者</p><p><code>alter table 表名 add index 索引名 (字段名...)</code></p><p>这里也可以通过这种方式来添加主键索引<code>alter table 表名 add primary key (字段);</code></p><p><strong>查看索引：</strong></p><ul><li><p><code>show index from 表名;</code></p></li><li><p><code>show indexes from 表名;</code></p></li><li><p><code>show keys from 表名</code></p></li></ul><p>三种方式都是相同的结果</p><ul><li><code>desc 表名</code> 中的KEY字段就是索引 通过这种方式查找出来的索引信息没有前面的那么详细</li></ul><p><strong>删除普通索引：</strong></p><p><code>drop index 索引名称 on 表名;</code></p><p>删除主键索引：<code>alter table 表名 drop primary key;</code></p><p>修改索引：先删除，然后添加新的索引~</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> ts<span class="token punctuation">(</span>
 id <span class="token keyword">int</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#查询一个表是否有索引</span>
<span class="token keyword">SHOW</span> INDEXES <span class="token keyword">FROM</span> ts<span class="token punctuation">;</span>
<span class="token comment">#Empty set (0.00 sec)</span>
<span class="token comment"># 没有任何索引</span>

<span class="token comment"># 添加唯一索引</span>
<span class="token keyword">create</span> <span class="token keyword">unique</span> <span class="token keyword">index</span> id_index <span class="token keyword">ON</span> ts<span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 添加普通索引-alter方式</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> ts <span class="token keyword">add</span> <span class="token keyword">index</span> name_index <span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 添加主键索引</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> ts2<span class="token punctuation">(</span>
 id <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token comment"># 要么在这里加</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>
    <span class="token comment">#要么在这里加</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 创建时候没加的话就：</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> ts2 <span class="token keyword">add</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加完索引后查看：唯一索引和普通索引的：</p><figure><img src="`+as+'" alt="image-20211122220117209" tabindex="0" loading="lazy"><figcaption>image-20211122220117209</figcaption></figure><p>主键索引的：</p><figure><img src="'+es+`" alt="image-20211122220509463" tabindex="0" loading="lazy"><figcaption>image-20211122220509463</figcaption></figure><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 删除普通索引</span>
<span class="token keyword">drop</span> <span class="token keyword">index</span> id_index <span class="token keyword">on</span> ts<span class="token punctuation">;</span>
<span class="token keyword">drop</span> <span class="token keyword">index</span> name_index <span class="token keyword">on</span> ts<span class="token punctuation">;</span>

<span class="token comment"># 删除主键索引</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> ts2 <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="索引使用原则" tabindex="-1"><a class="header-anchor" href="#索引使用原则" aria-hidden="true">#</a> 索引使用原则</h2><p>创建索引前，先看看是否遵循以下原则（当然上司特别要求的玩意的话，啥索引都可以放上去）</p><ol><li><p>较频繁作为查询条件字段<strong>应该</strong>创建索引</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>唯一性太差的字段<strong>不适合</strong>单独创建索引，即使该字段频繁的作为查询条件</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> sex<span class="token operator">=</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>更新非常频繁的字段<strong>不适合</strong>创建索引</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> logincount <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>不会出现在where字句中的字段<strong>不该</strong>创建索引</p></li></ol><h1 id="mysql事务" tabindex="-1"><a class="header-anchor" href="#mysql事务" aria-hidden="true">#</a> Mysql事务</h1><p>事务用于保证数据的一致性，它由一组相关的dml语句构成，该组的dml语句要么全部成功，要么全部失败<br> 如：转账就要用事务来处理，用以确保事务的一致性</p><p>当执行事务操作时(DML语句)，MYSQL会在表上加锁，防止其他用户修改表的数据，这对用户来讲是非常重要的</p><figure><img src="`+ps+'" alt="image-20211122222616278" tabindex="0" loading="lazy"><figcaption>image-20211122222616278</figcaption></figure><p>使用MySQL的事务，第一步<strong>必须得确保</strong>Mysql当前是是innodb引擎，查看方式</p><p><code>show engines</code></p><figure><img src="'+os+'" alt="image-20211122225446144" tabindex="0" loading="lazy"><figcaption>image-20211122225446144</figcaption></figure><p>看到innoDB这里的support是default即可；如果不是就要百度自行开启</p><h2 id="基本语法-1" tabindex="-1"><a class="header-anchor" href="#基本语法-1" aria-hidden="true">#</a> 基本语法</h2><ul><li><code>start transaction</code> 开始一个事务 <ul><li>或者<code>set autocommit=off</code></li></ul></li><li><code>savepoint</code> 保存点名 设置保存点</li><li><code>rollback to</code> 保存点名 回退事务</li><li><code>rollback</code> 回退全部事物</li><li><code>commit</code> 提交事务，所有的操作生效，不能回退</li></ul><figure><img src="'+ts+'" alt="image-20211122224421237" tabindex="0" loading="lazy"><figcaption>image-20211122224421237</figcaption></figure><figure><img src="'+ls+`" alt="image-20211122223136404" tabindex="0" loading="lazy"><figcaption>image-20211122223136404</figcaption></figure><p>回滚可以让事务能吃后悔药</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 1  测试表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> person<span class="token punctuation">(</span>
 id <span class="token keyword">int</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 2 开始事务</span>
<span class="token keyword">START</span> <span class="token keyword">TRANSACTION</span><span class="token punctuation">;</span>
<span class="token comment"># 3 设置保存点</span>
<span class="token keyword">SAVEPOINT</span> a<span class="token punctuation">;</span>
<span class="token comment"># 执行dml操作</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> person <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span><span class="token string">&#39;tom&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+------+</span>
<span class="token operator">|</span>  <span class="token number">100</span> <span class="token operator">|</span> tom  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+------+</span>

<span class="token comment"># 设置第二个保存点</span>
<span class="token keyword">savepoint</span> b<span class="token punctuation">;</span>
<span class="token comment"># 执行dml操作</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> person <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token string">&#39;jack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+------+</span>
<span class="token operator">|</span>  <span class="token number">100</span> <span class="token operator">|</span> tom  <span class="token operator">|</span>
<span class="token operator">|</span>  <span class="token number">200</span> <span class="token operator">|</span> jack <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+------+</span>

<span class="token comment"># 回退到B保存点</span>
<span class="token keyword">ROLLBACK</span> <span class="token keyword">TO</span> b<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person<span class="token punctuation">;</span>

<span class="token operator">+</span><span class="token comment">------+------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+------+</span>
<span class="token operator">|</span>  <span class="token number">100</span> <span class="token operator">|</span> tom  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+------+</span>

<span class="token comment">#继续回退</span>
<span class="token keyword">rollback</span> <span class="token keyword">to</span> a<span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person<span class="token punctuation">;</span>
<span class="token comment">#--没有任何记录</span>

<span class="token comment">#如果直接rollback</span>
<span class="token keyword">ROLLBACK</span><span class="token punctuation">;</span> 
<span class="token comment"># 直接回退到事物开始的状态</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> person <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token string">&#39;jack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 提交所有事物，让其无法回退 并且将所有保存点一并删除</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> person<span class="token punctuation">;</span>

<span class="token comment">#如果试图再次回退</span>
<span class="token keyword">rollback</span> <span class="token keyword">to</span> a<span class="token punctuation">;</span>
<span class="token comment">#ERROR 1305 (42000): SAVEPOINT a does not exist</span>



</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="事务的细节" tabindex="-1"><a class="header-anchor" href="#事务的细节" aria-hidden="true">#</a> 事务的细节</h2><figure><img src="`+cs+'" alt="image-20211122224643847" tabindex="0" loading="lazy"><figcaption>image-20211122224643847</figcaption></figure><p>数据库的存储引擎一定要是innodb！</p><h2 id="mysql的事务隔离级别" tabindex="-1"><a class="header-anchor" href="#mysql的事务隔离级别" aria-hidden="true">#</a> Mysql的事务隔离级别</h2><ol><li>多个连接开启各自事务操作数据库中数据时，数据库系统要负责隔离性，以保证各个连接在获取数据时的准确性</li><li>如果不考虑隔离性，可能会引发如下问题： <ul><li>脏读<br> 当一个事务读取另一个事务尚未提交的改变(增删改)时，产生脏读</li><li>不可重复读<br> 同一查询在同一事务中多次进行，由于其他提交事务所做的修改或删除，每次返回不同的结果集，此时发生不可重复度</li><li>幻读<br> 同一查询在同一事务中多次进行，由于其他提交事务所做的插入操作，每次返回不同的结果，此时发生幻读</li></ul></li></ol><figure><img src="'+rs+'" alt="image-20211122230850135" tabindex="0" loading="lazy"><figcaption>image-20211122230850135</figcaption></figure><figure><img src="'+is+`" alt="image-20211122231201037" tabindex="0" loading="lazy"><figcaption>image-20211122231201037</figcaption></figure><p>查看当前Mysql的隔离级别：</p><ul><li>Mysql5.7: <ul><li><code>select @@tx_isolation;</code></li></ul></li><li>Mysql 8+: <ul><li><code>select @@transaction_isolation;</code></li><li><code>show variables like &#39;transaction_isolation&#39;;</code></li></ul></li></ul><p>可以看到，当前Mysql的隔离级别是(Mysql 8):</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">+</span><span class="token comment">-------------------------+</span>
<span class="token operator">|</span> @<span class="token variable">@transaction_isolation</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">REPEATABLE</span><span class="token operator">-</span><span class="token keyword">READ</span>         <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------+</span>
<span class="token comment"># 默认级别-可重复度</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="读未提交-read-uncommitted" tabindex="-1"><a class="header-anchor" href="#读未提交-read-uncommitted" aria-hidden="true">#</a> 读未提交（Read uncommitted）</h3><p>为了演示，先把其中一个控制台（第二个控制台）的隔离级别改成读未提交（Read uncommitted）</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">SET</span> <span class="token keyword">SESSION</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">isolation</span> <span class="token keyword">LEVEL</span> <span class="token keyword">read</span> <span class="token keyword">uncommitted</span><span class="token punctuation">;</span>
<span class="token comment">#isolation就是隔离的意思</span>
<span class="token comment"># level 就是级别的意思</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后查看其隔离级别：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 第一个控制台： 可重复度</span>
<span class="token operator">+</span><span class="token comment">-----------------------+-----------------+</span>
<span class="token operator">|</span> Variable_name         <span class="token operator">|</span> <span class="token keyword">Value</span>           <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------------+-----------------+</span>
<span class="token operator">|</span> transaction_isolation <span class="token operator">|</span> <span class="token keyword">REPEATABLE</span><span class="token operator">-</span><span class="token keyword">READ</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------------+-----------------+</span>

<span class="token comment">#第二个控制台： 读未提交</span>
<span class="token operator">+</span><span class="token comment">-----------------------+------------------+</span>
<span class="token operator">|</span> Variable_name         <span class="token operator">|</span> <span class="token keyword">Value</span>            <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------------+------------------+</span>
<span class="token operator">|</span> transaction_isolation <span class="token operator">|</span> <span class="token keyword">READ</span><span class="token operator">-</span><span class="token keyword">UNCOMMITTED</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-----------------------+------------------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>隔离级别是跟事务相关的，一定要先启动事务，才能谈隔离级别的问题，离开事务就不要谈隔离级别的问题</p><p>首先创建一个表</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">use</span> <span class="token keyword">table</span> db1<span class="token punctuation">;</span>
<span class="token keyword">create</span> account<span class="token punctuation">(</span>id <span class="token keyword">int</span> <span class="token punctuation">,</span>name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>money <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>然后两个控制台均开启一个事务，</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后console1 写入一个数据</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>insert into account values(1,&quot;张三&quot;,1000);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后两个表同时查询这一个表，发现：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># console 1</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> money <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>  <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>

<span class="token comment"># console 2</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> money <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>  <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这就是脏读：<strong>当一个事务读取另一个事务尚未提交的改变(增删改)时，产生脏读</strong></p><p>然后我再往console 1中修改下内容，再添加一个新的value</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">update</span> account <span class="token keyword">set</span> money <span class="token operator">=</span><span class="token number">800</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> account <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;jock&quot;</span><span class="token punctuation">,</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>此时再查看console2</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> money <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>  <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> jock   <span class="token operator">|</span>   <span class="token number">222</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>发现他这之中显示了console1对表操作的结果</p><p>这个本应该是不存在的------</p><p>​ 这里把console 1 叫做A，console 2叫做B</p><p>​ 事务的本意(潜台词)是：让B在进入事务的时间点，只展示改时间点有的内容，即：一个空的account表，而不是每次A操作，B就能同步感知A操作的结果，进而影响B的查询，只要B还没有提交<code>commit</code>，B读取到的就应该是它开启事务时SQL所拥有的数据，而不受到其他事务对SQL的影响</p><p>​ 事务的最理想效果：当B开启后连接到ACCOUNT表并对其操作时，B不会接收到A操作带来的影响，B的操作同时也不回影响A，也不希望互相影响到C 、D、E.....的操作和其带来的影响</p><p>其实到这一步的时候，已经可以发现，读未提交（Read uncommitted）已经出现了 脏读、不可重复读和幻读</p><h3 id="读已提交-read-committed" tabindex="-1"><a class="header-anchor" href="#读已提交-read-committed" aria-hidden="true">#</a> 读已提交(Read committed)</h3><p>​ 接下来将A和B的事务都提交，然后A重新开启一个新的事务，B将隔离级别改变为读已提交(Read committed) 并开启一个新的事务</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># A &amp; B</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>

<span class="token comment"># A</span>
<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span>

<span class="token comment"># B</span>
<span class="token keyword">SET</span> <span class="token keyword">SESSION</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">isolation</span> <span class="token keyword">LEVEL</span> <span class="token keyword">read</span> <span class="token keyword">committed</span><span class="token punctuation">;</span>
<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后A添加一条数据，A、B再进行查找这个表</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># A </span>
 <span class="token keyword">insert</span> <span class="token keyword">into</span> account <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">&#39;scott&#39;</span><span class="token punctuation">,</span><span class="token number">8000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment"># A</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> money <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>  <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> jock   <span class="token operator">|</span>   <span class="token number">222</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> scott  <span class="token operator">|</span>  <span class="token number">8000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>

<span class="token comment"># B</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> money <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>  <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> jock   <span class="token operator">|</span>   <span class="token number">222</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到B的表中并没有出现A的表中所出现的第三条数据，即：读已提交(Read committed)隔离开启后，将不会出现脏读了</p><p>然后A再修改一条数据并提交，查看B此时的数据：</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># A</span>
<span class="token keyword">update</span> account <span class="token keyword">set</span> money <span class="token operator">=</span> <span class="token number">1800</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>


<span class="token comment"># B</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> money <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>  <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> jock   <span class="token operator">|</span>  <span class="token number">1800</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> scott  <span class="token operator">|</span>  <span class="token number">8000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>

<span class="token comment"># B</span>

<span class="token keyword">commit</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以发现 ，B表中的不可重复读，和幻读问题依旧存在</p><p>由上可知，在读已提交(Read committed)级别下，脏读已经不复存在，但是依旧出现了不可重复读和幻读</p><h3 id="可重复读-repeatable-read" tabindex="-1"><a class="header-anchor" href="#可重复读-repeatable-read" aria-hidden="true">#</a> 可重复读(Repeatable read)</h3><p>接下来把B改为可重复读(Repeatable read)并开启新的事务</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># A</span>
 <span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span>
 
<span class="token comment"># B </span>
<span class="token keyword">SET</span> <span class="token keyword">SESSION</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">isolation</span> <span class="token keyword">LEVEL</span> <span class="token keyword">Repeatable</span> <span class="token keyword">read</span>
<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后A添加一条数据 ，B进行select</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># A</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> account <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token string">&#39;milan&#39;</span><span class="token punctuation">,</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># B</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> money <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>  <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> jock   <span class="token operator">|</span>  <span class="token number">1800</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> scott  <span class="token operator">|</span>  <span class="token number">8000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到并未受A的影响</p><p>然后A修改一条数据</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># A</span>
<span class="token keyword">update</span> account <span class="token keyword">set</span> money <span class="token operator">=</span> <span class="token number">100</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token comment"># B</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> money <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>  <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> jock   <span class="token operator">|</span>  <span class="token number">1800</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> scott  <span class="token operator">|</span>  <span class="token number">8000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token comment"># B依旧没有收到影响</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后A commit</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># A </span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>

<span class="token comment"># B</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> money <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>  <span class="token number">1000</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> jock   <span class="token operator">|</span>  <span class="token number">1800</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> scott  <span class="token operator">|</span>  <span class="token number">8000</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以发现B没有受到影响，看不到A的变化</p><p>这就是可重复读(Repeatable read)，它将不会出现以上三种问题；</p><p>当然，还有最后一个：</p><h3 id="可串行化-serializable" tabindex="-1"><a class="header-anchor" href="#可串行化-serializable" aria-hidden="true">#</a> 可串行化(Serializable)</h3><p>​ 这个继承了可重复读(Repeatable read)的优良传统，并且有一个新的特点：加锁：</p><p>​ 如果说他发现有一张表正在被操作且没有被提交<code>commit</code>，它会卡在这个地方，不会对表进行任何实际操作，非常神奇</p><p>将B表隔离级别设定为可串行化，A表不变</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># A &amp; B</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>

<span class="token comment"># B </span>
<span class="token keyword">SET</span> <span class="token keyword">SESSION</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">isolation</span> <span class="token keyword">LEVEL</span> <span class="token keyword">Serializable</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">-------------------------+</span>
<span class="token operator">|</span> @<span class="token variable">@transaction_isolation</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------+</span>
<span class="token operator">|</span> <span class="token keyword">SERIALIZABLE</span>            <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------------------------+</span>

<span class="token comment"># A &amp; B</span>

<span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>A 添加内容</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> account <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">&#39;trray&#39;</span><span class="token punctuation">,</span><span class="token number">600</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">update</span> account <span class="token keyword">set</span> money <span class="token operator">=</span> <span class="token number">400</span> <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>此时 ，B查询内容</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>select * from account;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>可以发现，B的终端卡住了，并且过了一会儿弹出：</p><p><code>ERROR 1205 (HY000): Lock wait timeout exceeded; try restarting transaction</code></p><p>锁定等待超时;试着重新启动事务；</p><p>然后我再次进行查询，并在10s后在A中commit</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># B </span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> account<span class="token punctuation">;</span>

<span class="token comment"># A 等待10秒</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>

<span class="token comment">#B</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> name   <span class="token operator">|</span> money <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token operator">|</span>    <span class="token number">1</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>   <span class="token number">400</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">2</span> <span class="token operator">|</span> jock   <span class="token operator">|</span>  <span class="token number">1800</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">3</span> <span class="token operator">|</span> scott  <span class="token operator">|</span>   <span class="token number">100</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">4</span> <span class="token operator">|</span> milan  <span class="token operator">|</span>   <span class="token number">300</span> <span class="token operator">|</span>
<span class="token operator">|</span>    <span class="token number">5</span> <span class="token operator">|</span> trray  <span class="token operator">|</span>   <span class="token number">600</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+-------+</span>
<span class="token number">5</span> <span class="token keyword">rows</span> <span class="token operator">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token number">9.44</span> sec<span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以看到，几乎是A一提交，B就出了结果</p><p>这就是可串行化(Serializable)</p><h2 id="事务隔离级别-指令" tabindex="-1"><a class="header-anchor" href="#事务隔离级别-指令" aria-hidden="true">#</a> 事务隔离级别-指令</h2><ol><li><p>查看当前回话隔离级别：</p><ul><li><p>Mysql5.7:</p><ul><li><code>select @@tx_isolation;</code></li></ul></li><li><p>Mysql 8+:</p><ol><li><code>select @@transaction_isolation;</code></li><li>\`\`show variables like &#39;transaction_isolation&#39;;\`</li></ol></li></ul></li><li><p>查看系统当前隔离级别</p><ul><li>Mysql5.7 <ul><li><code>select @@global.tx_isolation;</code></li></ul></li><li>Mysql8+ <ul><li><code>select @@global.transaction_isolation;</code></li></ul></li></ul></li><li><p>设置当前回话隔离级别</p><ul><li><code>SET session transaction isolation LEVEL 隔离级别</code><ul><li>读未提交（<code>Read uncommitted</code>）</li><li>读已提交(<code>Read committed</code>)</li><li>可重复读(<code>Repeatable read</code>)</li><li>可串行化(<code>Serializable</code>)</li></ul></li></ul></li><li><p>设置系统当前隔离级别</p><ul><li><p><code>set global transaction isolation level 隔离级别</code></p></li><li><p>也可以在<code>my.ini</code>或者<code>my.cfg</code>中的[mysqld]加上并重启mysql来设置全局默认隔离级别</p><div class="language-ini line-numbers-mode" data-ext="ini"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysqld</span><span class="token punctuation">]</span></span>
...其他内容
<span class="token key attr-name">transaction-isolation</span> <span class="token punctuation">=</span> <span class="token value attr-value">隔离级别</span>
<span class="token comment"># 注意 这里的隔离级别要采用全大写横线的命名方式：</span>
<span class="token comment"># 如：</span>
Read committed---&gt;  READ-COMMITTED
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 并重启mysql</span>

<span class="token comment"># windows</span>
net restart mysql<span class="token punctuation">;</span>

<span class="token comment"># linux /ubuntu</span>
<span class="token function">sudo</span> <span class="token function">service</span> mysql restart<span class="token punctuation">;</span>

<span class="token comment"># docker </span>
<span class="token function">docker</span> restart mysql<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>Mysql默认的事务隔离级别是 <code>repatable read</code>，一般情况下，没有特殊要求，没有必要修改（因为该级别可以满足绝大部门项目要求）</p></li></ol><h3 id="事务的acid特性" tabindex="-1"><a class="header-anchor" href="#事务的acid特性" aria-hidden="true">#</a> 事务的ACID特性</h3><figure><img src="`+ks+'" alt="image-20211123004055233" tabindex="0" loading="lazy"><figcaption>image-20211123004055233</figcaption></figure><h1 id="mysql表类型和存储引擎" tabindex="-1"><a class="header-anchor" href="#mysql表类型和存储引擎" aria-hidden="true">#</a> Mysql表类型和存储引擎</h1><ol><li>Mysql的表类型由存储引擎（Storage Engines）决定，主要包括MyISAM、innoDB、Memory等</li><li>Mysql数据表主要支持六种类型，分别是：CSV、Memory、ARCHIVE、MRG_MYISAM、MYISAM、InnoDB</li><li>这六种分为两类 <ul><li>事务安全型(transaction-safe)---支持事务 <ul><li>innoDB 系统默认是这个</li></ul></li><li>非事物安全型（non-transaction-safe）---不支持事务 <ul><li>CSV</li><li>Memory</li><li>ARCHIVE</li><li>MRG_MYISAM</li><li>MYISAM</li></ul></li></ul></li></ol><ul><li>查看所有引擎：<code>show engines;</code><br><img src="'+us+'" alt="image-20211123121320164" loading="lazy"></li></ul><h2 id="引擎的选择" tabindex="-1"><a class="header-anchor" href="#引擎的选择" aria-hidden="true">#</a> 引擎的选择</h2><p>一般情况会选择的</p><figure><img src="'+ds+'" alt="image-20211123121826094" tabindex="0" loading="lazy"><figcaption>image-20211123121826094</figcaption></figure><figure><img src="'+ms+'" alt="image-20211123122055639" tabindex="0" loading="lazy"><figcaption>image-20211123122055639</figcaption></figure><figure><img src="'+vs+'" alt="image-20211123122248185" tabindex="0" loading="lazy"><figcaption>image-20211123122248185</figcaption></figure><figure><img src="'+bs+`" alt="image-20211123132241153" tabindex="0" loading="lazy"><figcaption>image-20211123132241153</figcaption></figure><h2 id="引擎使用" tabindex="-1"><a class="header-anchor" href="#引擎使用" aria-hidden="true">#</a> 引擎使用</h2><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 默认就是innodb，这里不做演示</span>


<span class="token comment"># 创建一个表，引擎为myisam</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> test_engine01<span class="token punctuation">(</span>
 id <span class="token keyword">int</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span> myisam<span class="token punctuation">;</span>
<span class="token comment">-- 添加速度快，不支持外键和事务，支持表锁</span>

<span class="token comment"># memory引擎</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> test_engine01<span class="token punctuation">(</span>
 id <span class="token keyword">int</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token keyword">ENGINE</span> memory<span class="token punctuation">;</span>
<span class="token comment"># 数据存储在内存中（关闭或重启mysql会导致所有数据丢失）</span>
<span class="token comment"># 执行速度很快（没有io读写）</span>
<span class="token comment"># 默认支持索引（hash table）</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="修改存储引擎" tabindex="-1"><a class="header-anchor" href="#修改存储引擎" aria-hidden="true">#</a> 修改存储引擎</h2><p>语法：<code>alter table 表名 engine = 存储引擎</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 修改前得确定表是否符合要转到的引擎的规定</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> emp <span class="token keyword">engine</span> <span class="token operator">=</span> myisam<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="视图-view" tabindex="-1"><a class="header-anchor" href="#视图-view" aria-hidden="true">#</a> 视图(View)</h1><ul><li>先看一个需求：emp表的列(字段)信息很多，有些信息是个人重要信息，比如sal、comm、mgr、hiredate<br><img src="`+ys+'" alt="image-20211123132622996" loading="lazy"></li><li>如果我们希望<strong>某个用户只能查询</strong>emp表的 empno、 ename、job和deptno信息</li><li>这个时候有很多方案，但是最好用的大概就是视图了</li></ul><p>视图的基本概念：</p><ol><li>视图是一个虚拟表。其内容由查询定义。和真实的表一样，视图包含列(字段)，<strong>其数据来源对应真实的表</strong>(基表)</li><li>视图和基表的关系示意图<br><img src="'+gs+`" alt="image-20211123133743001" loading="lazy"></li></ol><h2 id="视图的基本使用" tabindex="-1"><a class="header-anchor" href="#视图的基本使用" aria-hidden="true">#</a> 视图的基本使用</h2><ol><li>创建<code>create view 视图名 as select语句</code></li><li>修改(更新视图) <code>alter view 视图名 as select语句</code></li><li>显示视图的结构<code>show create view 视图名</code></li><li>删除视图 <code>drop view 视图名1,视图名2...</code></li></ol><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 视图的增删改查</span>
<span class="token comment"># 只查询emp表的 empno、 ename、job和deptno信息</span>
<span class="token comment"># 创建</span>
<span class="token keyword">create</span> <span class="token keyword">view</span> emp_view01 <span class="token keyword">as</span> <span class="token keyword">select</span> empno<span class="token punctuation">,</span> ename<span class="token punctuation">,</span>job<span class="token punctuation">,</span>deptno <span class="token keyword">from</span> emp<span class="token punctuation">;</span>

<span class="token comment"># 查看结构</span>
<span class="token keyword">desc</span> emp_view01<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+--------------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> Field  <span class="token operator">|</span> <span class="token keyword">Type</span>               <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> empno  <span class="token operator">|</span> <span class="token keyword">mediumint</span> <span class="token keyword">unsigned</span> <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token number">0</span>       <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>        <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span>         <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> job    <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>         <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span>         <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> deptno <span class="token operator">|</span> <span class="token keyword">mediumint</span> <span class="token keyword">unsigned</span> <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token number">0</span>       <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------------------+------+-----+---------+-------+</span>

<span class="token comment"># 查</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp_view01 <span class="token keyword">limit</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+--------+</span>
<span class="token operator">|</span> empno  <span class="token operator">|</span> ename  <span class="token operator">|</span> job      <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+--------+</span>
<span class="token operator">|</span> <span class="token number">100007</span> <span class="token operator">|</span> ofLpoA <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>    <span class="token number">360</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">100008</span> <span class="token operator">|</span> ZSoQnR <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>    <span class="token number">213</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">100009</span> <span class="token operator">|</span> BwDASN <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>    <span class="token number">132</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">100010</span> <span class="token operator">|</span> WWRuxd <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>     <span class="token number">15</span> <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">100011</span> <span class="token operator">|</span> RipbkV <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>    <span class="token number">488</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+--------+</span>

<span class="token comment"># 查看创建视图时的指令：</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">view</span> emp_view01<span class="token punctuation">;</span>

<span class="token comment"># 删除视图</span>
<span class="token keyword">drop</span> <span class="token keyword">view</span> emp_view01<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="视图的使用细节" tabindex="-1"><a class="header-anchor" href="#视图的使用细节" aria-hidden="true">#</a> 视图的使用细节</h2><figure><img src="`+ws+'" alt="image-20211123135455381" tabindex="0" loading="lazy"><figcaption>image-20211123135455381</figcaption></figure><figure><img src="'+hs+`" alt="image-20211123140408719" tabindex="0" loading="lazy"><figcaption>image-20211123140408719</figcaption></figure><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 视图1号</span>
<span class="token keyword">desc</span> emp_view01<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+--------------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> Field  <span class="token operator">|</span> <span class="token keyword">Type</span>               <span class="token operator">|</span> <span class="token boolean">Null</span> <span class="token operator">|</span> <span class="token keyword">Key</span> <span class="token operator">|</span> <span class="token keyword">Default</span> <span class="token operator">|</span> Extra <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------------------+------+-----+---------+-------+</span>
<span class="token operator">|</span> empno  <span class="token operator">|</span> <span class="token keyword">mediumint</span> <span class="token keyword">unsigned</span> <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token number">0</span>       <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> ename  <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>        <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span>         <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> job    <span class="token operator">|</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>         <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span>         <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">|</span> deptno <span class="token operator">|</span> <span class="token keyword">mediumint</span> <span class="token keyword">unsigned</span> <span class="token operator">|</span> <span class="token keyword">NO</span>   <span class="token operator">|</span>     <span class="token operator">|</span> <span class="token number">0</span>       <span class="token operator">|</span>       <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------------------+------+-----+---------+-------+</span>

<span class="token comment"># 把他的empno和ename做成新的视图</span>
<span class="token keyword">create</span> <span class="token keyword">view</span> emp_view02 <span class="token keyword">as</span> <span class="token keyword">select</span> empno<span class="token punctuation">,</span>ename <span class="token keyword">from</span> emp_view01<span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp_view02 <span class="token keyword">limit</span> <span class="token number">5</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+--------+</span>
<span class="token operator">|</span> empno  <span class="token operator">|</span> ename  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+</span>
<span class="token operator">|</span> <span class="token number">100007</span> <span class="token operator">|</span> ofLpoA <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">100008</span> <span class="token operator">|</span> ZSoQnR <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">100009</span> <span class="token operator">|</span> BwDASN <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">100010</span> <span class="token operator">|</span> WWRuxd <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">100011</span> <span class="token operator">|</span> RipbkV <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+</span>


<span class="token comment"># 修改view02 就相当于更该基表emp;</span>

<span class="token keyword">update</span>  emp_view02 <span class="token keyword">set</span> ename <span class="token operator">=</span><span class="token string">&quot;张三&quot;</span> <span class="token keyword">where</span> empno<span class="token operator">=</span><span class="token number">100007</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp_view02 <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">100007</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+--------+</span>
<span class="token operator">|</span> empno  <span class="token operator">|</span> ename  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+</span>
<span class="token operator">|</span> <span class="token number">100007</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp_view01 <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">100007</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+--------+</span>
<span class="token operator">|</span> empno  <span class="token operator">|</span> ename  <span class="token operator">|</span> job      <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+--------+</span>
<span class="token operator">|</span> <span class="token number">100007</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>    <span class="token number">360</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+--------+</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">where</span> empno <span class="token operator">=</span> <span class="token number">100007</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+-----+------------+---------+--------+--------+</span>
<span class="token operator">|</span> empno  <span class="token operator">|</span> ename  <span class="token operator">|</span> job      <span class="token operator">|</span> mgr <span class="token operator">|</span> hiredate   <span class="token operator">|</span> sal     <span class="token operator">|</span> comm   <span class="token operator">|</span> deptno <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+-----+------------+---------+--------+--------+</span>
<span class="token operator">|</span> <span class="token number">100007</span> <span class="token operator">|</span> 张三   <span class="token operator">|</span> SALESMAN <span class="token operator">|</span>   <span class="token number">1</span> <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">22</span> <span class="token operator">|</span> <span class="token number">2000.00</span> <span class="token operator">|</span> <span class="token number">400.00</span> <span class="token operator">|</span>    <span class="token number">360</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------+--------+----------+-----+------------+---------+--------+--------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="mysql管理-用户管理" tabindex="-1"><a class="header-anchor" href="#mysql管理-用户管理" aria-hidden="true">#</a> Mysql管理-用户管理</h1><p>mysql中的用户，都存储在系统数据库mysql中的user表中</p><figure><img src="`+qs+'" alt="image-20211123140910846" tabindex="0" loading="lazy"><figcaption>image-20211123140910846</figcaption></figure><p>其中user表的重要字段说明：</p><ol><li><code>host</code>： 运行登陆的位置，localhost表示本机，也可以指定Ip地址，比如：172.17.0.1，115.15.15.15....</li><li><code>user</code>：用户名</li><li><code>authentication_string</code>密码 <ul><li>Mysql8前，是通过Mysql的password()函数加密之后的密码（mysql_native_password）</li><li>Mysql8后，可以通过caching_sha2_password加密密码 <ul><li>当然，默认还是(mysql_native_password)加密密码</li></ul></li><li>密码字段左边会显示密码的加密方式<br><img src="'+fs+`" alt="image-20211123143351050" loading="lazy"></li></ul></li></ol><h2 id="创建、删除用户" tabindex="-1"><a class="header-anchor" href="#创建、删除用户" aria-hidden="true">#</a> 创建、删除用户</h2><p>如果创建的时候没有指定host，则默认为%:在任何地方都可以登陆</p><p><code>create user xxx</code>;</p><p>指定host：<code>create user &#39;xxx&#39;@xxx</code></p><ul><li>host指定方式： <ul><li><code>%</code> :所有地方</li><li><code>127.0.0.5</code> 特定地方</li><li><code>192.168.1.%</code> 192.168.1下的所有地址都可链接</li><li><code>255.255.%.%</code> 255.255下的所有地址都可连接</li></ul></li></ul><p>在删除用户的时候，如果host不是%，则必须要明确指定<code>用户名@登录位置</code></p><p><code>drop user jack</code> 等价于<code>drop user &#39;jack&#39;@&#39;%&#39;</code></p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># 创建用户</span>

<span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token identifier"><span class="token punctuation">\`</span>用户名<span class="token punctuation">\`</span></span><span class="token variable">@\`允许登陆位置\`</span> identified <span class="token keyword">by</span> <span class="token string">&#39;密码&#39;</span><span class="token punctuation">;</span>

<span class="token comment"># 创建用户 同时指定密码 注意 \`\` 这个绝对不能省略 但是可以替换成&#39;&#39;</span>
<span class="token comment"># 并且 用户名@密码 @前后不能有空格</span>

<span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token string">&#39;mycom&#39;</span><span class="token variable">@&#39;localhost&#39;</span>  identified <span class="token keyword">by</span> <span class="token string">&#39;123456&#39;</span><span class="token punctuation">;</span>


<span class="token comment"># 删除用户</span>
<span class="token keyword">drop</span> <span class="token keyword">user</span> <span class="token identifier"><span class="token punctuation">\`</span>用户名<span class="token punctuation">\`</span></span><span class="token variable">@\`允许登录位置\`</span><span class="token punctuation">;</span>

<span class="token comment"># 删除的时候加不加引号都可以 但是建议加上</span>
<span class="token keyword">drop</span> <span class="token keyword">user</span> mycom<span class="token variable">@localhost</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>登陆：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql <span class="token parameter variable">-u</span> mycom -p123456<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="修改密码" tabindex="-1"><a class="header-anchor" href="#修改密码" aria-hidden="true">#</a> 修改密码</h2><p>Mysql5.7</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">use</span> mysql<span class="token punctuation">;</span>
<span class="token comment"># 修改自己的密码</span>
<span class="token keyword">set</span> password <span class="token operator">=</span> password<span class="token punctuation">(</span><span class="token string">&#39;新密码&#39;</span><span class="token punctuation">)</span>；

<span class="token comment">#修改他人的密码</span>
<span class="token keyword">set</span> password <span class="token keyword">for</span> <span class="token string">&#39;用户名&#39;</span><span class="token variable">@&#39;登录位置&#39;</span> <span class="token operator">=</span> password<span class="token punctuation">(</span><span class="token string">&#39;新密码&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 修改完密码后需要刷新权限</span>
flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Mysql8+</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">&#39;用户名&#39;</span><span class="token variable">@&#39;登陆位置&#39;</span> IDENTIFIED <span class="token keyword">WITH</span> MYSQL_NATIVE_PASSWORD <span class="token keyword">BY</span> <span class="token string">&#39;新密码&#39;</span><span class="token punctuation">;</span>
<span class="token comment"># MYSQL_NATIVE_PASSWORD 是密码校验规则 不可省略</span>
<span class="token comment"># 可以替换成 caching_sha2_password</span>

<span class="token comment"># 例如：</span>
<span class="token keyword">alter</span> <span class="token keyword">user</span> <span class="token string">&#39;mycom&#39;</span><span class="token variable">@&#39;localhost&#39;</span> IDENTIFIED <span class="token keyword">WITH</span> caching_sha2_password <span class="token keyword">BY</span> <span class="token string">&#39;1234&#39;</span><span class="token punctuation">;</span>

<span class="token comment"># 修改完密码后需要刷新权限</span>
flush <span class="token keyword">privileges</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="用户权限" tabindex="-1"><a class="header-anchor" href="#用户权限" aria-hidden="true">#</a> 用户权限</h2><p>在登陆到mycom用户后，查看数据库，发现了如下信息</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span> <span class="token keyword">Database</span>           <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span> information_schema <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+Es+'" alt="image-20211123144656109" tabindex="0" loading="lazy"><figcaption>image-20211123144656109</figcaption></figure><p>Mysql的权限大概有这些：</p><figure><img src="'+Ls+`" alt="image-20211123145819580" tabindex="0" loading="lazy"><figcaption>image-20211123145819580</figcaption></figure><h3 id="给用户授权、回收权限" tabindex="-1"><a class="header-anchor" href="#给用户授权、回收权限" aria-hidden="true">#</a> 给用户授权、回收权限</h3><h4 id="授权" tabindex="-1"><a class="header-anchor" href="#授权" aria-hidden="true">#</a> 授权</h4><p>语法：<code>grant 权限对象 on 库.对象名 to &#39;用户名&#39;@&#39;登录位置&#39;</code></p><p>在mysql5.7中在授权时可以修改密码:</p><p><code>grant 权限对象 on 库.对象名 to &#39;用户名&#39;@&#39;登录位置&#39; [identified by &#39;密码&#39;]</code></p><ul><li>identified by可以省略就是修改用户密码 <ul><li>如果该用户存在，就修改用户的密码</li><li>如果用户不存在，就创建该用户</li></ul></li><li>在mysql8之前应该都是有效的，mysql8后不允许这样，授权，创建用户，给用户修改密码是三档事情</li></ul><p><code>权限列表</code>，多个权限用逗号分开</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">grant</span> <span class="token keyword">select</span> <span class="token keyword">on</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">grant</span> <span class="token keyword">select</span><span class="token punctuation">,</span><span class="token keyword">delete</span><span class="token punctuation">,</span><span class="token keyword">create</span> <span class="token keyword">on</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment">#赋予用户在该对象上的所有权限，all privileges  必须一块使用 不能单独 all on 或者 privileges  on</span>
<span class="token keyword">grant</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span>  <span class="token keyword">on</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>库.对象名</code>的特别说明</p><ul><li><code>*.*</code> ：代表本系统中所有数据库的所有对象（表，视图，存储过程等）</li><li><code>库名.*</code> ：表示某个数据库中的所有数据对象（表，视图，存储过程等）</li><li><code>库名.对象名</code>: 表示某个数据库中的单个对象，对象名可以是表，视图，存储过程等 ，一般都是表名</li></ul><p>授权完毕如果没有生效的话：刷新权限<code>flush privileges;</code></p><h4 id="回收权限" tabindex="-1"><a class="header-anchor" href="#回收权限" aria-hidden="true">#</a> 回收权限</h4><p>基本语法: <code>revoke 权限列表 on 库.对象名 from &#39;用户名&#39;@&#39;登录位置&#39;</code></p><p>也可以：<code>revoke all on 库.对象名 from &#39;用户名&#39;@&#39;登录位置&#39;</code> 直接回收某个用户的所有权限</p><p>撤销授权后如果没有生效的话：刷新权限<code>flush privileges;</code></p><figure><img src="`+Ss+`" alt="image-20211123152210307" tabindex="0" loading="lazy"><figcaption>image-20211123152210307</figcaption></figure><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment"># mysql8.0.1 ROOT USER</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token string">&#39;a&#39;</span><span class="token variable">@&#39;localhost&#39;</span>  identified <span class="token keyword">by</span> <span class="token string">&#39;123&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> testdb<span class="token punctuation">;</span>
<span class="token keyword">use</span> testdb<span class="token punctuation">;</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> news<span class="token punctuation">(</span>
 id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">Auto_increment</span><span class="token punctuation">,</span>
    author <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    title <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    body <span class="token keyword">text</span>
<span class="token punctuation">)</span><span class="token keyword">Auto_increment</span><span class="token operator">=</span><span class="token number">1001</span><span class="token punctuation">;</span>

<span class="token comment">#授权</span>
<span class="token keyword">grant</span> <span class="token keyword">insert</span><span class="token punctuation">,</span><span class="token keyword">select</span><span class="token punctuation">,</span><span class="token keyword">update</span><span class="token punctuation">,</span><span class="token keyword">delete</span> <span class="token keyword">on</span> testdb<span class="token punctuation">.</span>news <span class="token keyword">to</span> <span class="token string">&#39;a&#39;</span><span class="token variable">@&#39;localhost&#39;</span><span class="token punctuation">;</span>

<span class="token comment">#修改密码</span>
<span class="token keyword">ALTER</span> <span class="token keyword">USER</span> <span class="token string">&#39;a&#39;</span><span class="token variable">@&#39;localhost&#39;</span> IDENTIFIED <span class="token keyword">WITH</span> MYSQL_NATIVE_PASSWORD <span class="token keyword">BY</span> <span class="token string">&#39;12345&#39;</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后用户登陆</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql <span class="token parameter variable">-ua</span> - p <span class="token number">12345</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>进入后增删改查数据</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span> <span class="token keyword">Database</span>           <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token operator">|</span> information_schema <span class="token operator">|</span>
<span class="token operator">|</span> testdb             <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">--------------------+</span>
<span class="token keyword">use</span> testdb<span class="token punctuation">;</span>

<span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------------------+</span>
<span class="token operator">|</span> Tables_in_testdb <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+</span>
<span class="token operator">|</span> news             <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------------------+</span>

<span class="token comment">## 添加数据</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> news<span class="token punctuation">(</span>author<span class="token punctuation">,</span>title<span class="token punctuation">,</span>body<span class="token punctuation">)</span> <span class="token keyword">values</span>
 <span class="token punctuation">(</span><span class="token string">&quot;周树人&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;狂人日记&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;某君昆仲，今隐其名，皆余昔日在中学时良友；分隔多年，消息渐阙。日前偶闻其一大病...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
 <span class="token punctuation">(</span><span class="token string">&quot;鲁迅&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;彷徨&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;寂寞新文苑，平安旧战场，两间余一卒，荷戟独彷徨。&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment"># 修改数据</span>
<span class="token keyword">update</span> news <span class="token keyword">set</span> body <span class="token operator">=</span> <span class="token string">&quot;123&quot;</span> <span class="token keyword">where</span> author <span class="token operator">=</span><span class="token string">&quot;周树人&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">update</span> news <span class="token keyword">set</span> body <span class="token operator">=</span> <span class="token string">&quot;456&quot;</span> <span class="token keyword">where</span> author <span class="token operator">=</span><span class="token string">&quot;鲁迅&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> news<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+-----------+--------------+------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> author    <span class="token operator">|</span> title        <span class="token operator">|</span> body <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+--------------+------+</span>
<span class="token operator">|</span> <span class="token number">1001</span> <span class="token operator">|</span> 周树人    <span class="token operator">|</span> 狂人日记     <span class="token operator">|</span> <span class="token number">123</span>  <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token number">1002</span> <span class="token operator">|</span> 鲁迅      <span class="token operator">|</span> 彷徨         <span class="token operator">|</span> <span class="token number">456</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+-----------+--------------+------+</span>

<span class="token comment"># 删除</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> news <span class="token keyword">where</span> author <span class="token operator">=</span><span class="token string">&quot;周树人&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> news<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">------+--------+--------+------+</span>
<span class="token operator">|</span> id   <span class="token operator">|</span> author <span class="token operator">|</span> title  <span class="token operator">|</span> body <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+--------+------+</span>
<span class="token operator">|</span> <span class="token number">1002</span> <span class="token operator">|</span> 鲁迅   <span class="token operator">|</span> 彷徨   <span class="token operator">|</span> <span class="token number">456</span>  <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">------+--------+--------+------+</span>

<span class="token comment"># 视图创建表</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> tt<span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#ERROR 1142 (42000): CREATE command denied to user &#39;a&#39;@&#39;localhost&#39; for table &#39;tt&#39;</span>

<span class="token comment"># 退出</span>
<span class="token keyword">exit</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用root用户删除该用户;</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token comment">## ROOT </span>
<span class="token comment"># 先取消授权</span>
<span class="token keyword">revoke</span> <span class="token keyword">all</span> <span class="token keyword">on</span> testdb<span class="token punctuation">.</span>news <span class="token keyword">from</span> <span class="token string">&#39;a&#39;</span><span class="token variable">@&#39;localhost&#39;</span>；

<span class="token comment"># 再删除用户</span>
<span class="token keyword">drop</span> <span class="token keyword">user</span> <span class="token identifier"><span class="token punctuation">\`</span>a<span class="token punctuation">\`</span></span><span class="token variable">@\`localhost\`</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>自此，Mysql初级部分就过完了，Mysql实际上还有复杂的东西，以后有机会的话去了解下;</p>`,228);function on(tn,ln){const a=t("ExternalLinkIcon");return l(),c("div",null,[Ns,n("p",null,[s("Windows下的安装教程可以直接去看"),n("a",_s,[s("老韩的视频"),e(a)]),s("，讲的比较细，根据他的操作下来走一遍就可以使用了，Mysql的"),n("a",xs,[s("下载地址"),e(a)]),s("，根据他的视频下来操作一遍即可")]),Rs,n("ol",null,[n("li",null,[n("p",null,[n("a",Ms,[s("下载"),e(a)]),s("到包，并解压")])]),Ts]),Is,n("p",null,[n("a",Cs,[s("https://www.cnblogs.com/zhaosq/p/10469848.html"),e(a)])]),n("p",null,[n("a",Os,[s("https://blog.csdn.net/weixin_29348211/article/details/113163856"),e(a)])]),Us,n("p",null,[s("详细的配置外网连接可以看"),n("a",Js,[s("这篇文章"),e(a)]),s("，尤其是其评论区")]),Ds,n("p",null,[s("先通过"),n("a",Ks,[s("这篇文章1"),e(a)]),s("的操作走一遍删除，再通过"),n("a",Bs,[s("这篇文章2"),e(a)]),s("的操作走一遍删除，然后回到文章1进行安装")]),Gs,n("p",null,[n("a",js,[s("NaviCat"),e(a)]),s("应该是目前为止最好的Mysql管理软件，虽然贵，但是超好用")]),n("p",null,[s("当然，贴心的"),n("a",zs,[s("链接"),e(a)]),s("也是不可少的")]),n("p",null,[n("a",Hs,[s("SQlyog"),e(a)]),s("也不错，社区版本免费试用")]),Ys,n("p",null,[s("....然后这太基础的地方（图形化创建db，图形化创建table，图形化insert数据）就不过多赘述了，可以去"),n("a",Fs,[s("老韩的视频"),e(a)]),s("看看，我选择性撰写，他的视频中视频的是SqlYog")]),Vs,n("p",null,[s("它们三者更详细的说明可以看"),n("a",Ps,[s("这里"),e(a)])]),Ws,n("p",null,[n("a",Qs,[s("运算符链接"),e(a)]),s("，"),n("a",Xs,[s("正则表达式链接"),e(a)]),s("，"),n("a",$s,[s("Like模糊匹配链接"),e(a)])]),Zs,n("p",null,[s("补充："),n("a",sn,[s("mysql加密数据的几种方法"),e(a)]),s("、"),n("a",nn,[s("mysql8更该的用户信息加密方式"),e(a)])]),an,n("p",null,[s("先按照"),n("a",en,[s("这个教程"),e(a)]),s("创建一个海量表")]),pn])}const kn=o(As,[["render",on],["__file","21-MySql.html.vue"]]);export{kn as default};
