---
title: 18-IOæµ
date: 2021-11-13 20:42:30
category: JavaSE
tag:
 - Java
 - JavaSE
 - IO
---

## æ–‡ä»¶

å¯¹äºè¿™ç©æ„æˆ‘ä»¬å·²ç»ä¹ ä»¥ä¸ºå¸¸äº†ï¼Œå°±æ˜¯ä¿å­˜æ•°æ®çš„åœ°æ–¹ï¼Œæ¯”å¦‚ä¸€å¼ å›¾ç‰‡ï¼Œä¸€ä¸ªæ–‡æ¡£ï¼Œä¸€ä¸ªè¡¨æ ¼ï¼Œä¸€ä¸ªjsonæ•°æ®é›†ç­‰

ä¸è¿‡é‚£äº›éƒ½ä¸æ˜¯é‡ç‚¹ï¼Œæ¥ä¸‹æ¥è¯´è¯´æ–‡ä»¶æµçš„æ¦‚å¿µ

### æ–‡ä»¶æµ

æ–‡ä»¶åœ¨ç¨‹åºä¸­æ˜¯ä»¥æµçš„å½¢å¼æ¥æ“ä½œçš„

![æ–‡ä»¶æµçš„æ¦‚å¿µ](/images/JavaSE/18-IOæµ/æ–‡ä»¶æµçš„æ¦‚å¿µ-16368079080021.svg)

æµï¼š**æ•°æ®åœ¨æ•°æ®æºï¼ˆæ–‡ä»¶ï¼‰å’Œç¨‹åºï¼ˆå†…å­˜ï¼‰ä¹‹é—´ç»å†çš„è·¯å¾„**

è¾“å…¥æµï¼š**æ•°æ®ä»æ•°æ®æºï¼ˆæ–‡ä»¶ï¼‰åˆ°ç¨‹åºï¼ˆå†…å­˜ï¼‰çš„è·¯å¾„**

è¾“å‡ºæµï¼š**ç¨‹åºä»ï¼ˆå†…å­˜ï¼‰åˆ°æ•°æ®æºï¼ˆæ–‡ä»¶ï¼‰çš„è·¯å¾„**

ä¸Šé¢è¿™äº›æ˜¯æ¯”è¾ƒé‡è¦çš„..å»ºè®®å€’èƒŒå¦‚æµï¼Œå¦‚æœèƒŒä¸ä¸‹æ¥å°±è®°ä½ï¼šè¾“å…¥æµæ˜¯æŠŠæ•°æ®ä»æ–‡ä»¶ä¸­æå–åˆ°ç¨‹åºé‡Œï¼Œè¾“å‡ºæµæ˜¯æŠŠæ•°æ®ä¸¢åˆ°æ–‡ä»¶é‡Œï¼Œå¦‚æœè¿˜æ˜¯ä¸æ‡‚çš„è¯ï¼š

![æ–‡ä»¶æµçš„æ¦‚å¿µ1](/images/JavaSE/18-IOæµ/æ–‡ä»¶æµçš„æ¦‚å¿µ1.svg)

æ˜¯ä¸æ˜¯çªç„¶å°±æ˜ç™½äº†

é‚£ä¹ˆæ¥ä¸‹æ¥è¯´è¯´è¯¥æ€ä¹ˆæ“ä½œæ–‡ä»¶ï¼š

ï¼ˆå…¶å®ç›¸æ¯”äºé›†åˆï¼Œå¤šçº¿ç¨‹ï¼Œè¿™ç©æ„çœŸçš„ç®—æ˜¯æŒºç®€å•çš„ï¼‰

### File-å¸¸ç”¨çš„æ–‡ä»¶æ“ä½œ

> åˆ›å»ºæ–‡ä»¶å¯¹è±¡ç›¸å…³æ„é€ å™¨å’Œæ–¹æ³•

- `new File(String pathname)`æ ¹æ®è·¯å¾„ç»“æ„åˆ›å»ºä¸€ä¸ªFIleå¯¹è±¡
- `new File(File parent,String child)`æ ¹æ®çˆ¶ç›®å½•**æ–‡ä»¶**+å­è·¯å¾„æ„å»º
- `new File(String parent,String child)`æ ¹æ®çˆ¶ç›®å½•+å­è·¯å¾„æ„å»º

![image-20211113210418512](/images/JavaSE/18-IOæµ/image-20211113210418512.png)

æ¥ä¸‹æ¥ç®€å•çš„æ¼”ç¤ºä¸‹åˆ›å»ºæ–‡ä»¶ï¼š

æ–¹æ³•1ï¼š

```java
@Test
public void create01() {
    //åˆ›å»ºfileå¯¹è±¡ è¿™ä¸ªfileåªæ˜¯ä¸€ä¸ªå¯¹è±¡è€Œå·²ï¼Œåªæœ‰å½“ä»–ä½¿ç”¨äº†createNewFileæ‰ä¼šçœŸæ­£çš„å°†æ–‡ä»¶æ”¾å…¥åˆ°æœ¬åœ°ç£ç›˜
    File file = new File("d:/a.txt");
    // è¿™é‡Œç”¨ / æˆ–è€…\\ éƒ½å¯ä»¥ çœ‹ä¸ªäººä¹ æƒ¯ æˆ‘æ˜¯ç”¨ä¹ æƒ¯äº†Linuxæ‰€ä»¥æ‰/
    try {
        //è°ƒç”¨æ–¹æ³•åˆ›å»ºæ–‡ä»¶
        file.createNewFile(); //è¿™é‡Œå¯èƒ½ä¼šæŠ›å‡ºIOå¼‚å¸¸
        System.out.println("æ–‡ä»¶åˆ›å»ºæˆåŠŸ");
    } catch (IOException e) {
        e.printStackTrace();
    }
}
```

æ–¹æ³•2:

```java
@Test
public void create02(){
    File parent = new File("d:");
    //        è¿™é‡Œé€šè¿‡parentæ¥åˆ›å»º å¦‚æœè¯´å‰ç¼€æ˜¯ä¸ªç›˜ç¬¦çš„è¯ ç›´æ¥xx: å°±å¯ä»¥äº†
    //        å¦‚æœè¦åœ¨ç›®å½•ä¸‹åˆ›å»ºçš„è¯ å°±è¦ç”¨File("xx:/filePath")
    File file = new File(parent,"b.txt");
    try {
        file.createNewFile();
        System.out.println("åˆ›å»ºæˆåŠŸ");
    } catch (IOException e) {
        e.printStackTrace();
    }
}
```

æ–¹æ³•3:

```java
@Test
public void create03() {
    //        ç¬¬ä¸‰ç§æ–¹å¼
    String parentPath = "d:/";
    String fileName = "c.txt";
    File file = new File(parentPath, fileName);
    try {
        file.createNewFile();
    } catch (IOException e) {
        e.printStackTrace();
    }
}
```

>  å¸¸ç”¨çš„è·å–æ–‡ä»¶ä¿¡æ¯çš„ç›¸å…³æ–¹æ³•

- `getName` è·å–åç§°
- `getAbsolutePath` è·å–ç»å¯¹è·¯å¾„
- `getParent` è·å–çˆ¶çº§è·¯å¾„
- `length` æ–‡ä»¶å¤§å°(å­—èŠ‚)
- `exists` è¿™ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨
- `isFile` æ˜¯ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹
- `isDirectory` æ˜¯ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹

é€šå¸¸æ¥è¯´ï¼Œæƒ³è·å–å•¥ç™¾åº¦å³å¯ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¾‹å¤–ï¼š(ä¸‹é¢è¿™äº›ä»£ç å…¨éƒ½æ˜¯æˆ‘åˆšè£…ä¸Šçš„GitHub Copilotæ’ä»¶è‡ªåŠ¨ç”Ÿæˆçš„..)

```java
//txt: Hello 123456 ä½ å¥½
@Test
public void info() {
    //        éšä¾¿æ‹¿ä¸€ä¸ªæ–‡ä»¶æµ‹è¯•
    File file = new File("D:/a.txt");
    System.out.println("æ–‡ä»¶åï¼š" + file.getName());
    System.out.println("æ–‡ä»¶è·¯å¾„ï¼š" + file.getPath());
    System.out.println("ç»å¯¹è·¯å¾„ï¼š" + file.getAbsolutePath());
    System.out.println("çˆ¶çº§è·¯å¾„ï¼š" + file.getParent());
    System.out.println("æ–‡ä»¶å¤§å°ï¼š" + file.length());
    System.out.println("æ˜¯å¦å­˜åœ¨ï¼š" + file.exists());
    System.out.println("æ˜¯ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼š" + file.isFile());
    System.out.println("æ˜¯ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼š" + file.isDirectory());
    System.out.println("æ˜¯ä¸æ˜¯éšè—æ–‡ä»¶ï¼š" + file.isHidden());
    System.out.println("æ˜¯ä¸æ˜¯åªè¯»æ–‡ä»¶ï¼š" + file.canRead());
    System.out.println("æ˜¯ä¸æ˜¯å¯å†™æ–‡ä»¶ï¼š" + file.canWrite());
    System.out.println("æ˜¯ä¸æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼š" + file.canExecute());
    System.out.println("æ–‡ä»¶æœ€åä¿®æ”¹æ—¶é—´ï¼š" + file.lastModified());
}
//    æ–‡ä»¶åï¼ša.txt
//    æ–‡ä»¶è·¯å¾„ï¼šD:\a.txt
//    ç»å¯¹è·¯å¾„ï¼šD:\a.txt
//    çˆ¶çº§è·¯å¾„ï¼šD:\
//    æ–‡ä»¶å¤§å°ï¼š19
//    æ˜¯å¦å­˜åœ¨ï¼štrue
//    æ˜¯ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼štrue
//    æ˜¯ä¸æ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼šfalse
//    æ˜¯ä¸æ˜¯éšè—æ–‡ä»¶ï¼šfalse
//    æ˜¯ä¸æ˜¯åªè¯»æ–‡ä»¶ï¼štrue
//    æ˜¯ä¸æ˜¯å¯å†™æ–‡ä»¶ï¼štrue
//    æ˜¯ä¸æ˜¯å¯æ‰§è¡Œæ–‡ä»¶ï¼štrue
//    æ–‡ä»¶æœ€åä¿®æ”¹æ—¶é—´ï¼š1636812170769
```

å…³äºå­—èŠ‚ï¼šä¸€ä¸ªæ±‰å­—ä¸‰ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªå­—æ¯/æ•°å­—/ç¬¦å·1ä¸ªå­—èŠ‚ 

> ç›®å½•çš„æ“ä½œå’Œæ–‡ä»¶åˆ é™¤

`mkdir`åˆ›å»ºä¸€çº§ç›®å½•ï¼Œ`mkdirs`åˆ›å»ºå¤šçº§ç›®å½•ï¼Œ`delete`åˆ é™¤ç©ºç›®å½•æˆ–æ–‡ä»¶

> åˆ é™¤ä¸€ä¸ªæ–‡ä»¶

```java
@Test
public void deleteFile() {
    File file = new File("d:/new1.txt");
    //        åˆ¤æ–­æ˜¯å¦å­˜åœ¨
    if (file.exists()) {
        //          åˆ é™¤
        file.delete();
        System.out.println("åˆ é™¤æˆåŠŸ");
    } else {
        System.out.println("æ–‡ä»¶ä¸å­˜åœ¨");
    }

}
```

> åˆ é™¤æˆ–åˆ›å»ºä¸€ä¸ªç›®å½•

```java
//    åˆ¤æ–­ d:/demo2ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨å°±åˆ é™¤ï¼Œå¦åˆ™å°±åˆ›å»º
//    åœ¨Javaç¼–ç¨‹ä¸­ï¼Œç›®å½•ä¹Ÿè¢«å½“ä½œæ–‡ä»¶
@Test
public void deleteDirectory() {
    File file = new File("d:/demo2");
    if (file.exists()) {
        if (file.delete()) {
            System.out.println("åˆ é™¤æˆåŠŸ");
        } else {
            System.out.println("åˆ é™¤å¤±è´¥");
        }

    } else {
        System.out.println("ç›®å½•ä¸å­˜åœ¨.æ­£åœ¨åˆ›å»º");
        if (file.mkdir()) {
            System.out.println("åˆ›å»ºæˆåŠŸ");
        } else {
            System.out.println("åˆ›å»ºå¤±è´¥");
        }
    }
}
```

> åˆ é™¤å¤šçº§ç›®å½•

```java
//    åˆ¤æ–­ d:/demo/a/b/cç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨å°±æç¤ºå·²å­˜åœ¨ï¼Œå¦åˆ™å°±åˆ›å»º
@Test
public void createDirectory() {
    File directoryPath = new File("d:/demo/a/b/c");
    if (directoryPath.exists()) {
        System.out.println("è¯¥ç›®å½•å·²å­˜åœ¨");
    } else {
        //            åˆ›å»ºå¤šçº§ç›®å½• mkdirs() ;mkdir()--åˆ›å»ºä¸€çº§ç›®å½•
        if (directoryPath.mkdirs()) {
            System.out.println("åˆ›å»ºæˆåŠŸ");
        } else {
            System.out.println("åˆ›å»ºå¤±è´¥");
        }
    }
}
```

è¿™äº›å·®ä¸å¤šå°±æ˜¯æœ€ç®€å•çš„æ“ä½œæ–‡ä»¶æµç¨‹äº†ï¼Œä¸è¿‡çœŸçš„è¦å¾€é‡Œé¢å†™ã€è¯»æ•°æ®ï¼Œå°±å¾—ç”¨åˆ°IOæµï¼š

## IOæµåŸç†åŠæµçš„åˆ†ç±»

å…ˆæ¥è¯´è¯´ä»–çš„åŸç†

- I/Oæ˜¯Input/Outputçš„ç¼©å†™ï¼ŒI/OæŠ€æœ¯æ˜¯éå¸¸å®ç”¨çš„æŠ€æœ¯ï¼Œç”¨äºå¤„ç†æ•°æ®ä¼ è¾“ï¼Œä¾‹å¦‚è¯»å†™æ–‡ä»¶ï¼Œç½‘ç»œé€šè®¯ç­‰
- Javaç¨‹åºä¸­ï¼Œå¯¹äºæ•°æ®çš„è¾“å…¥ã€è¾“å‡ºæ“ä½œç±»ä¼¼äº`æµ(Stream)`æ–¹å¼è¿›è¡Œ
- `java.io`åŒ…ä¸‹æä¾›äº†å„ç§"æµ"ç±»å’Œæ¥å£ï¼Œç”¨äºè·å–ä¸åŒç±»å‹çš„æ•°æ®ï¼Œå¹¶é€šè¿‡æ–¹æ³•è¾“å…¥æˆ–è¾“å‡ºæ•°æ®
- è¾“å…¥`input`ï¼šè¯»å–å¤–éƒ¨æ•°æ®(ç£ç›˜ï¼Œå…‰ç›˜ï¼Œæ•°æ®åº“ï¼Œç½‘ç»œï¼Œå¦ä¸€ä¸ªç¨‹åº)ç­‰å­˜å‚¨è®¾å¤‡çš„æ•°æ®åˆ°ç¨‹åºï¼ˆå†…å­˜ï¼‰ä¸­
- è¾“å‡º`output`:å°†(å†…å­˜)æ•°æ®è¾“å‡ºåˆ°ç›¸åº”çš„å­˜å‚¨è®¾å¤‡ä¸­

![image-20211113223551420](/images/JavaSE/18-IOæµ/image-20211113223551420.png)

### æµçš„åˆ†ç±»

- åœ¨Javaç¼–ç¨‹ä¸­ï¼ŒæŒ‰æ“ä½œæ•°æ®å•ä½ä¸åŒåˆ†ä¸ºï¼šå­—èŠ‚æµ(8-bit)ï¼Œå­—ç¬¦æµ(æŒ‰å­—ç¬¦ï¼Œå¯¹åº”å‡ ä¸ªå­—èŠ‚è·Ÿæ–‡ä»¶ç¼–ç æŒ‚é’©(ASCII,UTF-8,Uncode...))
  - å¦‚æœè¯´ä»æ“ä½œçš„å•ä½æ¥è¯´ï¼Œå­—ç¬¦æµçš„æ•ˆç‡æ›´é«˜ï¼Œå­—èŠ‚æµæ¯æ¬¡è¯»å–çš„å•ä½æ¯”è¾ƒå°‘ï¼ˆä¸€ä¸ªå­—èŠ‚ä¸€ä¸ªå­—èŠ‚çš„è¯»å–ï¼‰ï¼Œæ•ˆç‡ä¼šä½ä¸€äº›ï¼Œ**æ–‡æœ¬æ–‡ä»¶**ä½¿ç”¨å­—ç¬¦æµæ¥æ“ä½œæ¯”è¾ƒå¥½
  - åœ¨æ“ä½œ**äºŒè¿›åˆ¶æ–‡ä»¶**çš„æ—¶å€™(å£°éŸ³ï¼Œè§†é¢‘ï¼ŒWordæ–‡æ¡£ç­‰æ–‡ä»¶)ï¼Œä½¿ç”¨å­—èŠ‚æµçš„æ–¹å¼æ¥æ“ä½œï¼Œèƒ½ä¿è¯æˆ‘ä»¬çš„æ“ä½œæ˜¯æ— æŸæ“ä½œ
- æŒ‰æ•°æ®æµçš„æµå‘ä¸åŒåˆ†ä¸ºï¼šè¾“å…¥æµï¼Œè¾“å‡ºæµ
- æŒ‰æµçš„è§’è‰²ä¸åŒåˆ†ä¸ºï¼šèŠ‚ç‚¹æµï¼Œå¤„ç†æµ/åŒ…è£…æµ

| æŠ½è±¡åŸºç±» |     å­—èŠ‚æµ     |  å­—ç¬¦æµ  |
| :------: | :------------: | :------: |
|  è¾“å…¥æµ  | `inputStream`  | `Reader` |
|  è¾“å‡ºæµ  | `OutputStream` | `Writer` |

![image-20211113225259642](/images/JavaSE/18-IOæµ/image-20211113224951257.png)

![image-20211113225231021](/images/JavaSE/18-IOæµ/image-20211113225231021.png)

![image-20211113225003082](/images/JavaSE/18-IOæµ/image-20211113225003082.png)

![image-20211113225259642.png](/images/JavaSE/18-IOæµ/image-20211113225259642.png)

ä¸Šæ–¹æ˜¯è¿™å››ä¸ªç±»çš„ç»§æ‰¿å…³ç³»å›¾ï¼ŒæŸ¥çœ‹ä»–ä»¬çš„æºç å¯ä»¥å‘ç°ï¼šä»–ä»¬**éƒ½æ˜¯æŠ½è±¡ç±»**ï¼Œæ²¡æœ‰ç›´æ¥å®ç°çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬æ“ä½œä»–ä»¬éƒ½æ˜¯é€šè¿‡ä»–ä»¬çš„**å®ç°ç±»**æ¥è¿›è¡Œ

1. Javaçš„IOæµå…±æ¶‰åŠ40å¤šä¸ªç±»ï¼Œå®é™…ä¸Šä»–ä»¬éå¸¸è§„åˆ™ï¼Œéƒ½æ˜¯ä»ä¸Šè¿°4ä¸ªæŠ½è±¡åŸºç±»æ´¾ç”Ÿçš„
2. ç”±è¿™å››ä¸ªç±»æ´¾ç”Ÿå‡ºæ¥çš„å­ç±»åç§°éƒ½æ˜¯ä»¥å…¶çˆ¶ç±»åç§°ä½œä¸ºå­ç±»ååç¼€

åœ¨æ­£å¼å¼€å§‹å‰ï¼Œå†å›é¡¾ä¸‹ï¼Œ`æµ`å’Œ`æ–‡ä»¶`çš„å…³ç³»ï¼š

å¦‚æœè¯´æ–‡ä»¶åƒæ˜¯ä¸€ä¸ªç‰©æµä¸­å¿ƒï¼Œæˆ‘ä»¬çš„ç¨‹åºåƒæ˜¯ä¸€ä¸ªç”¨æˆ·ï¼Œé‚£ä¹ˆæµå°±åƒæ˜¯å¤–å–å°å“¥ä¸€æ ·ï¼Œä»ç‰©æµä¸­å¿ƒæŠŠæ–‡ä»¶æ‹¿å‡ºæ¥ï¼Œé€åˆ°ç”¨æˆ·æ‰‹ä¸Šï¼Œå¦‚æœè¯´ç”¨æˆ·è¦å¯„ä¸œè¥¿ä¹Ÿæ˜¯å…ˆè®©å¤–å–å°å“¥è¿‡æ¥å–ä¸œè¥¿ï¼Œè®©åé€åˆ°ç‰©æµä¸­å¿ƒï¼Œç„¶åä¼ é€’ç»™æ›´å¤šçš„ç”¨æˆ·ï¼Œæµå°±æ˜¯ä¸€ä¸ªä¸­é—´ä»¶

### Java IOæµç»“æ„å›¾

![Javaä¹‹IOæµ](/images/JavaSE/18-IOæµ/Javaä¹‹IOæµ.svg)

å‰é¢ä¹Ÿè¯´åˆ°è¿‡ï¼Œè¿™ç©æ„å­ç±»ç‰¹åˆ«å¤šï¼Œä½†æ˜¯å®é™…ä¸Šæˆ‘ä»¬åªéœ€è¦æŒæ¡å…¶ä¸­å‡ ä¸ªå°±è¡Œï¼Œå…¶ä»–çš„éƒ½æ˜¯å¤§åŒå°å¼‚ã€‚

æ¥ä¸‹æ¥ä¸€ä¸ªä¸€ä¸ªçš„äº†è§£ï¼š

## `InputerStream` å­—èŠ‚è¾“å…¥æµ

- `InputStream`æŠ½è±¡ç±»æ˜¯æ‰€æœ‰ç±»å­—èŠ‚è¾“å…¥æµçš„è¶…ç±»
- `InputStream`å¸¸ç”¨å­ç±»
  1. `FileInputStream` æ–‡ä»¶è¾“å…¥æµ
  2. `BufferedInputStream`ç¼“å†²å­—èŠ‚è¾“å…¥æµ
  3. `ObjectInputStream`å¯¹è±¡å­—èŠ‚è¾“å…¥æµ

ç»“æ„å›¾ï¼š

![image-20211113233244380](/images/JavaSE/18-IOæµ/image-20211113233244380.png)


### `FileInputStream`æ–‡ä»¶å­—èŠ‚è¾“å…¥æµ

æ–‡æ¡£[é€Ÿé“¾](https://www.matools.com/file/manual/jdk_api_1.8_google/java/io/FileInputStream.html)

æ„é€ æ–¹æ³•ï¼š

![image-20211113233608670](/images/JavaSE/18-IOæµ/image-20211113233608670.png)

æ‰€æœ‰æ–¹æ³•ï¼š

![image-20211113233706976](/images/JavaSE/18-IOæµ/image-20211113233706976.png)

å¯ä»¥çœ‹åˆ°ï¼Œä»–é‡Œé¢åŒ…å«çš„æ–¹æ³•å¹¶ä¸æ˜¯å¾ˆå¤šï¼Œé™¤å»æ„é€ å‡½æ•°ï¼Œåªæœ‰9ä¸ª

æœ€å¸¸ç”¨çš„ä¸ªäººè®¤ä¸ºæ˜¯è¿™ä¸ªï¼š`read(byte[] b ,int off ,int len)` å°†è¾“å…¥æµä¸­æœ€å¤šlenä¸ªå­—èŠ‚çš„æ•°æ®è¯»å–å…¥ä¸€ä¸ªbyteæ•°ç»„ä¸­

æ¥ä¸‹æ¥æ¼”ç¤ºä¸‹ï¼š

> å•ä¸ªå­—èŠ‚è¯»å–

```java
/**
* æ¼”ç¤ºè¯»å–æ–‡ä»¶ å•ä¸ªå­—èŠ‚çš„è¯»å– æ•ˆç‡æ¯”è¾ƒä½
* @throws IOException IOå¼‚å¸¸
*/
@Test
public void readFile01() throws IOException {
    String filePath = "d:/a.txt"; // a.txt:Hello 123456 ä½ å¥½
    int read = 0;
    //        åˆ›å»ºå“¦ä»¬çš„FileInputStreamå¯¹è±¡ï¼Œç”¨äºè¯»å–æ–‡ä»¶
    FileInputStream fileInputStream = new FileInputStream(filePath); //ä¼šæŠ›å‡º FileNotFoundException ç¼–è¯‘å¼‚å¸¸-æ–‡ä»¶å¯èƒ½ä¸å­˜åœ¨

    while ((read = fileInputStream.read()) != -1) { 
        //ä»è¯¥è¾“å‡ºæµè¯»å–æ–‡ä»¶çš„ä¸€ä¸ªå­—èŠ‚ï¼Œå¦‚æœåˆ°è¾¾æœ«å°¾ï¼Œåˆ™è¿”å›-1
        //readå¯èƒ½ä¼šæŠ›å‡ºçš„å¼‚å¸¸IOException
        
        System.out.print((char) read); //è¿”å›çš„æ˜¯intç±»å‹ï¼ŒæŠŠintè½¬æ¢æˆcharæ‰“å°
        //out: Hello 123456 Ã¤Â½Â Ã¥Â¥Â½
        //å¯ä»¥çœ‹åˆ° ä¸­æ–‡ä¹±ç äº†... ä¸€ä¸ªæ±‰å­—å ç”¨ä¸‰ä¸ªå­—èŠ‚  readä¸€æ¬¡è¯»å–ä¸€ä¸ªå­—èŠ‚
    }


    //è¯»å–å®Œæ¯•åä¸€å®šè¦å…³é—­æµï¼Œè¿™é‡Œæ˜¯ä»¥æ¼”ç¤ºä¸ºç›®çš„å°†å¼‚å¸¸Throwsï¼Œå®é™…ä½¿ç”¨æ—¶éœ€è¦
    //try...catch...finally(åœ¨è¿™é‡Œå…³é—­æµ)
    //ä¸å…³é—­æµçš„è¯ï¼Œä¼šé€ æˆæå¤§çš„èµ„æºæµªè´¹ï¼ˆå°¤å…¶æ˜¯å¤šçº¿ç¨‹å¤„ç†æ—¶ï¼‰
    
    fileInputStream.close();
    //è¿™é‡Œå…³é—­çš„æ—¶å€™ä¹Ÿå¯èƒ½ä¼šæŠ›å‡ºIOExceptionå¼‚å¸¸ ä¸€èˆ¬æƒ…å†µä¸‹æ¥è¯´ï¼Œcloseåœ¨è¿è¡Œæ—¶å‡ºç°å¼‚å¸¸éƒ½æ˜¯è‡´å‘½çš„é”™è¯¯å¯¼è‡´çš„
    
}

```

> ä¸€æ¬¡æ€§è¯»å–å¤šä¸ªå€¼

```java
    /**
     * æ¼”ç¤ºè¯»å–æ–‡ä»¶ å•ä¸ªå­—èŠ‚çš„è¯»å– æ•ˆç‡æ¯”è¾ƒä½-->ä½¿ç”¨read(byte[])æ¥è§£å†³
     *
     * @throws IOException IOå¼‚å¸¸
     */
@Test
public void readFile02() throws IOException {
    String filePath = "d:/a.txt"; //Hello 123456
    byte[] buffer = new byte[8];// ä¸€æ¬¡è¯»å–8ä¸ªæ•°æ®
    FileInputStream fileInputStream = new FileInputStream(filePath);

    //        å¦‚æœè¯»å–æ­£å¸¸è¿™é‡Œè¿”å›åˆ°çš„æ˜¯æˆ‘ä»¬å®é™…è¯»å–åˆ°çš„å­—èŠ‚æ•°
    //        int read = fileInputStream.read(buffer); //readçš„æ˜¯è¯»å–åˆ°çš„å­—èŠ‚æ•°


    while (fileInputStream.read(buffer) != -1) {
        System.out.print(new String(buffer));
        //Hello 123456
        //            å¯ä»¥çœ‹åˆ° è‹±æ–‡ä¾æ—§æ˜¯æ²¡æœ‰ä»»ä½•é—®é¢˜ (å¦‚æœæ˜¯ä¸­æ–‡çš„è¯é—®é¢˜ä¼šä¾æ—§)
        //            ç¬¬ä¸€æ¬¡ï¼š [H,e,l,l,o, ,1,2]
        //            ç¬¬äºŒæ¬¡ï¼š [3,4,5,6,è´Ÿæ•° ,è´Ÿæ•°,è´Ÿæ•°,è´Ÿæ•°]

    }
    fileInputStream.close();
}
```

### `FileOutputStream` æ–‡ä»¶å­—èŠ‚è¾“å‡ºæµ

![image-20211114113542537](/images/JavaSE/18-IOæµ/image-20211114113542537.png)

è¿™ä¸ªæ„é€ æ–¹æ³•å’Œæ‰€æœ‰æ–¹æ³•éƒ½å’Œ`InputStream`åŸºæœ¬æ²¡å•¥åŒºåˆ«ï¼Œæœ€å¤§çš„å·®åˆ«å°±å®ƒæ˜¯writeï¼Œ`InputStream`æ˜¯readï¼Œ[æ–‡æ¡£åœ°å€](https://www.matools.com/file/manual/jdk_api_1.8_google/java/io/FileOutputStream.html)

![image-20211114113328836](/images/JavaSE/18-IOæµ/image-20211114113328836.png)

![image-20211114113348070](/images/JavaSE/18-IOæµ/image-20211114113348070.png)

æ¥ä¸‹æ¥ä½¿ç”¨`FIleOutPutStream`åœ¨æ–‡ä»¶a.txtä¸­å†™å…¥ `hello , world. `

```java
    /**
     * æ¼”ç¤ºä½¿ç”¨FileOutputStream å†™å…¥æ–‡ä»¶
     * å°†æ•°æ®å†™åˆ°æ–‡ä»¶ä¸­
     * å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºè¯¥æ–‡ä»¶
     */
@Test
public void writeFile() {
//åˆ›å»º FileOutputStreamå¯¹è±¡
    String filePath = "e:/aaa.txt";
    FileOutputStream fileOutputStream = null;
    try {
//å¾—åˆ°FileOutputStreamå¯¹è±¡
        
//1.  new FileOutputStream(filePath);è¿™æ˜¯è¦†ç›–åˆ›å»ºï¼Œå½“å†™å…¥å†…å®¹æ—¶ï¼Œä¼šè¦†ç›–åŸæ¥çš„å†…å®¹
//fileOutputStream = new FileOutputStream(filePath);
//è¿™é‡Œä¹Ÿæœ‰å¯èƒ½ä¼šæœ‰FileNotFoundExceptionå¼‚å¸¸ï¼Œå¯ä»¥ç›´æ¥åœ¨ä¸‹é¢ç”¨IOæµå¼‚å¸¸æŠ›å‡º

//2. å¯ä»¥çœ‹åˆ°æ„é€ æ–¹æ³•ä¸­è¿˜æœ‰ä¸€ä¸ªappendå‚æ•°çš„æ–¹æ³•ã€‚å¹¶ä¸”å¯ä»¥å¾—çŸ¥å°†è¯¥é¡¹è®¾ç½®ä¸ºtrueå°±æ˜¯è¿½åŠ å†™å…¥
fileOutputStream = new FileOutputStream(filePath, true);

//3. æ— è®ºä½¿ç”¨å“ªç§æ–¹å¼æ¥åˆ›å»ºæ–‡ä»¶å†™å…¥æµï¼Œæ–‡ä»¶ä¸å­˜åœ¨éƒ½ä¼šè¢«åˆ›å»º

//å†™å…¥ä¸€ä¸ªå­—èŠ‚
//fileOutputStream.write('a');//Char ä¼šè‡ªåŠ¨è½¬æ¢æˆint

//å†™å…¥å­—ç¬¦ä¸²
        String str = "hello world";
        
//fileOutputStream.write(str.getBytes(StandardCharsets.UTF_8));
//å­—ç¬¦ä¸²æœ¬èº«æä¾›äº†ä¸€ä¸ªgetBytesæ–¹æ³• å¯ä»¥å°†å­—ç¬¦ä¸²è½¬æ¢æˆä¸€ä¸ªbyte[]æ•°ç»„ï¼Œè€Œä¸”å¯ä»¥æŒ‡å®šç¼–ç 
//ç®€è€Œè¨€ä¹‹ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥æŠŠä¸€ä¸ªå­—ç¬¦ä¸²è½¬æ¢æˆä¸€ä¸ªå­—èŠ‚æ•°ç»„

//è¿˜æœ‰ä¸€ä¸ªæ–¹æ³•æ¥å†™å…¥å­—ç¬¦ä¸²ï¼ŒæŒ‡å®šæ•°é‡
//fileOutputStream.write(str.getBytes(StandardCharsets.UTF_8),0,str.length());
//æŒ‡å®šä»0å¼€å§‹ï¼Œåˆ°str.lengthç»“æŸï¼ˆå…¨éƒ¨å†™è¿›å»ï¼‰
        
        fileOutputStream.write(str.getBytes(StandardCharsets.UTF_8), 0, 5);
        //åªå†™å…¥å‰5ä¸ªå­—èŠ‚:hello


        System.out.println("å†™å…¥æˆåŠŸ");
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            fileOutputStream.close(); //è¿™é‡Œä¾æ—§å¯èƒ½æœ‰å¼‚å¸¸ï¼Œè€ä¸€å¥—å¤„ç†
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```

> å°ç»ƒï¼šä½¿ç”¨å­—å­—èŠ‚è¾“å…¥æµå®Œæˆå›¾ç‰‡ã€éŸ³ä¹ã€è½¯ä»¶çš„copy

æ€è·¯ï¼š

![image-20211114121718636](/images/JavaSE/18-IOæµ/image-20211114121718636.png)

```java
@Test
public void copyFile() {
    FileInputStream fileInputStream = null;
    FileOutputStream fileOutputStream = null;
    try {
        //            è·å–è¾“å…¥æµï¼ˆæ‰“å¼€æ–‡ä»¶ï¼‰
        fileInputStream = new FileInputStream("d:/å£çº¸/ä¸åŠ¨é¸£ç¥ï¼Œæ³¡å½±æ–­ç­-2560x1440.jpg");
        //            æºæ–‡ä»¶

        //            è·å–è¾“å‡ºæµ
        fileOutputStream = new FileOutputStream("d:/test.jpg");
        //            è¦å†™å…¥çš„æ–‡ä»¶

        //            å®šä¹‰æ¯æ¬¡è¯»å–çš„é•¿åº¦ æ¯æ¬¡è¯»å–1024å­—èŠ‚/1kb æé«˜è¯»å–é€Ÿåº¦ï¼ˆæ¯æ¬¡è¯»å–1byteå¤ªæ…¢äº†ï¼‰
        //            å½“ç„¶ä¹Ÿå¯ä»¥:1024*1024 1MB
        byte[] buffer = new byte[1024 * 1024];
        int count =0;
        //            è¯»å–æ–‡ä»¶
        while ((count=fileInputStream.read(buffer)) != -1) {
            //                è¾¹åº¦è¾¹å†™
            //                ä½¿ç”¨lençš„æ–¹æ³•æ˜¯å› ä¸ºï¼šé˜²æ­¢æœ€åä¸€æ¬¡é¢å¤–å¡«å†™æ— æ„ä¹‰çš„0
            //                å‡å¦‚è¿™ä¸ªæ–‡ä»¶æ˜¯1039byte
            //                 ç¬¬ä¸€æ¬¡è¯»å–äº†1024byte
            //                é‚£ä¹ˆè¿˜å‰©ä½™15byte
            //                å¦‚æœä¸ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œç¬¬äºŒæ¬¡å†™è¿›å»çš„è¿˜æ˜¯1024byte
            //                ä¹Ÿå°±æ˜¯å¤šå†™äº†æ•°æ®è¿›æ–‡ä»¶ï¼Œå°±ä¼šå¯¼è‡´æ–‡ä»¶å¼‚å¸¸
            //                æ‰€ä»¥æ¯æ¬¡åªå†™å…¥byte[]ä¸­æœ‰æ„ä¹‰çš„æ•°æ®
            fileOutputStream.write(buffer, 0, count);
        }
        System.out.println("å¤åˆ¶æˆåŠŸï¼");

    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            //                å…³é—­æµ  å½“ç„¶ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨çš„æ—¶å€™è¦ï¼šif(xxx!=null) xxx.close
            fileInputStream.close();
            fileOutputStream.close();
            System.out.println("å…³é—­æµæˆåŠŸ");
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
}
```

## `FileReader`å’Œ`FileWriter`

## èŠ‚ç‚¹æµå’Œå¤„ç†æµ

èŠ‚ç‚¹æµå¯ä»¥ä»ä¸€ä¸ªç‰¹å®šçš„æ•°æ®æºè¯»å†™æ•°æ®ï¼Œå¦‚`FileReader`ã€`FileWriter`

èŠ‚ç‚¹æµçš„æ‰€å±

|    åˆ†ç±»    |      å­—èŠ‚è¾“å…¥æµ      |      å­—èŠ‚æ•°å‡ºæµ       |   å­—ç¬¦è¾“å…¥æµ    |   å­—ç¬¦è¾“å‡ºæµ    |
| :--------: | :------------------: | :-------------------: | :-------------: | :-------------: |
|  æŠ½è±¡åŸºç±»  |     InputStream      |     OutputStream      |     Reader      |     Writer      |
|  è®¿é—®æ–‡ä»¶  |   FileInputStream    |   FileOutputStream    |   FileReader    |   FileWriter    |
|  è®¿é—®æ•°ç»„  | ByteArrayInputStream | ByteArrayOutputStream | CharArrayReader | CharArrayWriter |
|  è®¿é—®ç®¡é“  |   PipedInputStream   |   PipedOutputStream   |   PipedReader   |   PipedWriter   |
| è®¿é—®å­—ç¬¦ä¸² |                      |                       |  StringReader   |  StringWriter   |

![image](/images/JavaSE/18-IOæµ/image.svg)

èŠ‚ç‚¹æµå¯ä»¥ç›´æ¥æ“ä½œæ•°æ®ï¼Œå¥½å¤„æ˜¯é›¶è·ç¦»å’Œæ•°æ®æ¥è§¦ï¼Œåå¤„æ˜¯ä»–çš„çµæ´»æ€§å¯èƒ½ä¼šæ”¶åˆ°ä¸€äº›å½±å“ï¼ŒåŠŸèƒ½æ€§ä¸æ˜¯å¾ˆå¼ºå¤§

Javaçš„è®¾è®¡è€…ä¸ºäº†è§£å†³è¿™ä¸ªç‚¹ï¼Œåˆ¶é€ äº†ä¸€ä¸ª**å¤„ç†æµ**ï¼ˆä¹Ÿå«åŒ…è£…æµï¼‰ï¼Œæ˜¯`è¿æ¥`**å·²å­˜åœ¨çš„æµ**ï¼ˆèŠ‚ç‚¹æµæˆ–å¤„ç†æµï¼‰ä¹‹ä¸Šï¼Œä¸ºç¨‹åºæä¾›æ›´ä¸ºå¼ºå¤§çš„è¯»å†™åŠŸèƒ½ï¼Œå¦‚`BufferedReader`ã€`BufferedWriter`

`BufferedReader`ç±»ä¸­ï¼Œæœ‰å±æ€§Readerï¼Œå³å¯ä»¥å°è£…ä¸€ä¸ªèŠ‚ç‚¹æµï¼Œ**è¯¥èŠ‚ç‚¹æµå¯ä»¥æ˜¯ä»»æ„çš„**ï¼Œåªè¦æ˜¯Readerå­ç±»

![images](/images/JavaSE/18-IOæµ/images.svg)

å¤„ç†æµæ‰€ç”¨çš„æ¨¡å¼ä¹Ÿå«**ä¿®é¥°å™¨æ¨¡å¼**

|    åˆ†ç±»    |     å­—èŠ‚è¾“å…¥æµ      |      å­—èŠ‚è¾“å‡ºæµ      |    å­—ç¬¦è¾“å…¥æµ     |     å­—ç¬¦è¾“å‡ºæµ     |
| :--------: | :-----------------: | :------------------: | :---------------: | :----------------: |
|   ç¼“å†²æµ   | BufferedInputStream | BufferedOutputStream |  BufferedReader   |   BufferedWriter   |
|   è½¬æ¢æµ   |                     |                      | InputStreamReader | OutputStreamWriter |
|   å¯¹è±¡ç±»   |  ObjectInputStream  |  ObjectoutputStream  |                   |                    |
|  æŠ½è±¡åŸºç±»  |  FilterInputStream  |  FilterOutputStream  |   FilterReader    |    FilterWriter    |
|   æ‰“å°æµ   |                     |     PrintStream      |                   |    PrintWriter     |
| æ¨å›è¾“å…¥æµ | PushbackInputStream |                      |  PushbackReader   |                    |
|   ç‰¹æ®Šæµ   |   DataInputStream   |   DataOutputStream   |                   |                    |

### èŠ‚ç‚¹æµå’Œå¤„ç†æµçš„åŒºåˆ«å’Œè”ç³»

1. èŠ‚ç‚¹æµæ˜¯åº•å±‚æµ/ä½çº§æµï¼Œç›´æ¥è·Ÿæ•°æ®æºç›¸æ¥
2. å¤„ç†æµï¼ˆ**åŒ…è£…æµ**ï¼‰åŒ…è£…èŠ‚ç‚¹æµï¼Œæ—¢å¯ä»¥æ¶ˆé™¤ä¸åŒèŠ‚ç‚¹æµä¹‹é—´çš„å·®å¼‚ï¼Œä¹Ÿå¯ä»¥æä¾›æ›´æ–¹ä¾¿çš„æ–¹å¼æ¥å®Œæˆè¾“å…¥è¾“å‡º
3. å¤„ç†æµå¯¹èŠ‚ç‚¹æµè¿›è¡ŒåŒ…è£…ï¼Œé‡‡ç”¨äº†ä¿®é¥°å™¨æ¨¡å¼ï¼Œä¸ä¼šç›´æ¥ä¸æ•°æ®æºç›¸è¿

> æ¨¡æ‹Ÿä¿®é¥°å™¨æ¨¡å¼

```java
package com;

public class testReaderene_ {
    public static void main(String[] args) {
        MyBufferedReader_ myBufferedReader_ = new MyBufferedReader_(new MyFileReader_());
        myBufferedReader_.readFile();
        new MyBufferedReader_(new MyStringReader_()).readString(3);
        
    }
}

abstract class MyReader_ { //æŠ½è±¡ç±» å¯ä»¥æŠŠè¿™ä¸ªç±»çœ‹æˆReader
    public void readFile() {};
    public void readString() { };
}

//è¿™ä¸ªå°±å¯ä»¥å½“åšèŠ‚ç‚¹æµ
class MyFileReader_ extends MyReader_ {
    @Override
    public void readFile() {
        System.out.println("å¯¹æ–‡ä»¶è¿›è¡Œè¯»å–");
    }
}

//è¿™ä¸ªåŒä¸Š
class MyStringReader_ extends MyReader_ {
    @Override
    public void readString() {
        System.out.println("å¯¹å­—ç¬¦ä¸²è¿›è¡Œè¯»å–");
    }
}

/**
 * åšæˆå¤„ç†æµ/åŒ…è£…æµ
 */
class MyBufferedReader_ extends MyReader_ {
    private MyReader_ reader_;//å±æ€§æ—¶myReaderç±»å‹

    //    æ¥æ”¶MyReader_å­ç±»å¯¹è±¡
    public MyBufferedReader_(MyReader_ reader_) {
        this.reader_ = reader_;
    }

    public void readFile() { //å°è£…ä¸€å±‚
        reader_.readFile();
    }

    //    è®©æ–¹æ³•æ›´çµæ´»  æ‰©å±•äº†åŸå…ˆçš„readFile
    public void readFile(int num) {
        for (int i = 0; i < num; i++) {
            reader_.readFile();
        }
    }

    //    æ‰©å±• readString
    public void readString(int num) {
        for (int i = 0; i < num; i++) {
            reader_.readString();
        }
    }
}
```



å¤„ç†æµçš„åŠŸèƒ½ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹ä¸¤ä¸ªæ–¹é¢ï¼š

1. æ€§èƒ½çš„æé«˜ï¼šä¸»è¦ä»¥å¢åŠ ç¼“å†²çš„æ–¹å¼æ¥æé«˜è¾“å…¥è¾“å‡ºçš„æ•ˆç‡
2. æ“ä½œçš„ä¾¿æ·ï¼šå¤„ç†æµå¯èƒ½æä¾›äº†ä¸€ç³»åˆ—ä¾¿æ·æ–¹å¼æ¥ä¸€æ¬¡è¾“å…¥è¾“å‡ºå¤§æ‰¹é‡æ•°æ®ï¼Œä½¿ç”¨æ›´åŠ çµæ´»æ–¹ä¾¿

## å¤„ç†æµ-BufferedReaderå’ŒBufferedWriter

- `BufferedReader`å’Œ`BufferedWriter`å±äºå­—ç¬¦æµï¼Œæ˜¯æŒ‰ç…§å­—ç¬¦æ¥è¯»å–æ•°æ®çš„
- å…³é—­æ—¶ï¼Œåªéœ€è¦å…³é—­å¤–å±‚æµå³å¯ï¼Œå³ï¼Œåªéœ€è¦å…³é—­å¤„ç†æµï¼ˆæ ¹æ®ä¹‹å‰çš„åˆ†æä¹Ÿå¯ä»¥å¾—å‡ºï¼ŒçœŸæ­£æ¥æ“ä½œæ•°æ®çš„å…¶å®è¿˜æ˜¯æˆ‘ä»¬çš„èŠ‚ç‚¹æµï¼Œå¤„ç†æµæ˜¯å¸®åŠ©æˆ‘ä»¬è®©æ“ä½œæ•°æ®æ›´åŠ ç®€å•æ–¹ä¾¿ï¼Œæ‰€ä»¥å¤„ç†æµä¸­å¤§æ¦‚ç‡æ˜¯æœ‰å°è£…closeçš„ï¼‰
- è¯¦ç»†æ–‡æ¡£ï¼š
  - [BufferedReaderä¸­æ–‡æ‰‹å†Œ](https://www.matools.com/file/manual/jdk_api_1.8_google/java/io/BufferedReader.html)
  - [BufferedWriterä¸­æ–‡æ‰‹å†Œ](https://www.matools.com/file/manual/jdk_api_1.8_google/java/io/BufferedWriter.html)

è¿™ä¸¤ä½æ˜¯ç”¨æ¥å¤„ç†å­—ç¬¦æµçš„ï¼Œå³ï¼šReaderå’ŒWriterä¸‹çš„æµéƒ½å¯ä»¥ç»ç”±ä»–ä»¬ä¹‹æ‰‹

![image-20211114175317610](/images/JavaSE/18-IOæµ/image-20211114175317610.png)



> ä½¿ç”¨BufferedReaderè¯»å–æ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶å±•ç¤ºåœ¨æ§åˆ¶å°

```java
@Test
public void test01() throws IOException {
    // åˆ›å»ºä¸€ä¸ªBufferedReaderå¯¹è±¡
    String filePath = "D:\\JavaStudy\\10-çº¿ç¨‹\\src\\com\\work_\\testPool.java";
    BufferedReader bufferedReader = new BufferedReader(new FileReader(filePath)); //FileReaderå¯èƒ½ä¼šå‡ºå¼‚å¸¸ï¼Œç›´æ¥throws
    //        è¯»å–ï¼Œå…¶å®åº•å±‚ç”¨çš„è¿˜æ˜¯fileReaderçš„è¯»å–
    String line; //æŒ‰è¡Œè¯»å– æ€§èƒ½æ•ˆç‡é«˜
    //        è¯´æ˜ï¼š
    //        1.bufferedReader.readLine() æ˜¯æŒ‰è¡Œè¯»å–ï¼Œ
    //        å½“è¿”å›nullæ—¶è¡¨ç¤ºæ–‡ä»¶è¯»å–å®Œæ¯•
    while ((line = bufferedReader.readLine()) != null) {
        System.out.println(line);
    }
    //        å…³é—­æµ è¿™é‡Œåªéœ€è¦å…³é—­åŒ…è£…æµï¼ˆBufferedReaderï¼‰å³å¯ çœ‹æºç å¯ä»¥å‘ç°ä»–åº•å±‚ä¼šè°ƒç”¨èŠ‚ç‚¹æµçš„close
    bufferedReader.close();
}
```

> ä½¿ç”¨BufferedWriterå†™å…¥æ–‡ä»¶

```java
@Test
public void testBufferedWriter() throws IOException {
    String filePath = "d:/a.txt";
    //        åˆ›å»ºä¸€ä¸ªBufferedWriter
    BufferedWriter bufferedWriter = new BufferedWriter(new FileWriter(filePath));
    //        è¦è¿½åŠ çš„è¯å’Œå¾€å¸¸ä¸€æ ·åœ¨FileWriteä¸­åŠ ä¸ªtrueå³å¯
    //        BufferedWriter bufferedWriter = new BufferedWriter(new FileWriter(filePath, true));

    bufferedWriter.write("hello world");
    bufferedWriter.write("hello world");
    bufferedWriter.write("hello world");
    //        æ’å…¥ä¸€ä¸ªæ¢è¡Œ
    //        bufferedWriter.write('\r');
    bufferedWriter.newLine();//è¿™ä¹Ÿæ˜¯æ’å…¥ä¸€ä¸ªæ¢è¡Œï¼Œè‡ªåŠ¨å†³å®šæ¢è¡Œç¬¦æ˜¯\rè¿˜æ˜¯\n
    bufferedWriter.write("hello world");

    bufferedWriter.close();
}
```

> ä½¿ç”¨BufferedWriterå’ŒBufferedReadyæ‹·è´éäºŒè¿›åˆ¶æ–‡ä»¶

```java
@Test
public void copyFile() throws IOException {
    //        ç‰¹åˆ«è¯´æ˜ï¼š
    //        BufferedWriterå’ŒBufferedReaderæ˜¯æŒ‰ç…§å­—ç¬¦æ¥è¯»å–å’Œæ“ä½œçš„
    //        æ‰€ä»¥ä¸è¦å»æ“ä½œäºŒè¿›åˆ¶æ–‡ä»¶
    //        å¦‚æœæ“ä½œäºŒè¿›åˆ¶æ–‡ä»¶[å£°éŸ³ï¼Œè§†é¢‘ï¼Œofficeæ–‡æ¡£ï¼ŒPDFï¼Œpsdç­‰]ï¼Œå¯èƒ½ä¼šé€ æˆæ–‡ä»¶çš„æŸå

    //        ä½¿ç”¨BufferedReaderå’ŒBufferedWriteræ¥æ‹·è´æ–‡é›†N
    String filePath = "E:\\MyProject\\blog_server\\modules\\admin/files.js";
    String destFile = "d:/a.txt";
    BufferedReader reader = new BufferedReader(new FileReader(filePath));
    BufferedWriter writer = new BufferedWriter(new FileWriter(destFile));
    String line; //æŒ‰è¡Œæ¥è¯»å–
    //        readlineæ˜¯è¯»å–ä¸€è¡Œçš„å†…å®¹ï¼Œä½†æ˜¯æ²¡æœ‰å¸¦æ¢è¡Œç¬¦
    while ((line = reader.readLine()) != null) {
        writer.write(line);

        //            è¯»å–å®Œä¸€è¡Œåæ¢è¡Œï¼Œå¦‚æœä¸æ¢è¡Œçš„è¯æ•´ä¸ªæ–‡ä»¶éƒ½æ˜¯åœ¨ä¸€è¡Œé‡Œäº†
        writer.newLine();
    }
    System.out.println("æ‹·è´å®Œæ¯•");
    reader.close();
    writer.close();
    System.out.println("æµå’Œæ–‡ä»¶å…³é—­å®Œæ¯•");

}
```

## å¤„ç†æµ-BufferedInputStreamå’ŒBufferedOutputStream

å’Œåˆšåˆšçš„é‚£ä¸¤ä½å¾ˆåƒï¼Œè¿™ä¸¤ä¸ªä¹Ÿæ˜¯åŒ…è£…æµï¼Œæ¥åŒ…è£…InputStreamå’ŒOutputStreamä¸­çš„æµï¼š

![image-20211114175212713](/images/JavaSE/18-IOæµ/image-20211114175212713.png)

> æ¥ä¸‹æ¥ä½¿ç”¨BufferedOutputStreamå’ŒBufferInputStreamæ¥å®Œæˆå¯¹å›¾ç‰‡çš„æ‹·è´
>
> å½“ç„¶ï¼Œä½¿ç”¨ä»–ä¹Ÿå¯ä»¥å¯¹æ–‡æœ¬æ–‡ä»¶è¿›è¡Œå¤åˆ¶ï¼ˆæ— è®ºæ˜¯å¦æœ‰æ±‰å­—ï¼‰ å› ä¸ºä»–ä»¬ç›¸å½“äºæ˜¯å¯¹

```java
  @Test
    public void copyImage() throws IOException {
        String filePath = "D:\\è½¯ä»¶å®‰è£…ç›®å½•/Uninstall.exe";
        String destFile = "d:/a.exe";
        BufferedInputStream inputStream = new BufferedInputStream(new FileInputStream(filePath));
        BufferedOutputStream outputStream = new BufferedOutputStream(new FileOutputStream(destFile));
        byte[] bytes = new byte[1024 * 1024];
        int len;
//        æœ¬è´¨ä¸Šè·ŸFileInputStreamå’ŒFileOutputStreamæ˜¯ä¸€æ ·çš„ç”¨æ³•
        while ((len = inputStream.read(bytes)) != -1) {
            outputStream.write(bytes, 0, len);
        }
        outputStream.close();
        inputStream.close();
        System.out.println("copyæˆåŠŸ");


    }
```

## æ·±å…¥ç†è§£å¤„ç†/åŒ…è£…æµ

åœ¨ä¸Šæ–¹æ¡ˆä¾‹ä¸­ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯å­—ç¬¦åŒ…è£…æµè¿˜æ˜¯å­—èŠ‚åŒ…è£…æµï¼Œä½¿ç”¨èµ·æ¥çš„æ–¹æ³•éƒ½è·Ÿæ™®é€šçš„ä¸€æ¨¡ä¸€æ ·ï¼Œé™¤äº†å­—ç¬¦åŒ…è£…æµä¸­å¯ä»¥è¿›è¡Œçš„æ¢è¡Œä¹‹å¤–ï¼Œå¹¶æ²¡æœ‰æ„Ÿè§‰åˆ°ä»»ä½•çš„ä¸åŒï¼Œåè€Œè¿˜è®©æ•´ä¸ªç¨‹åºå˜å¾—å¥—å¨ƒäº†èµ·æ¥...

é‚£ä¸ºä»€ä¹ˆè¦ç”¨å®ƒå‘¢ï¼Ÿ

å…ˆæ¥çœ‹ä¸‹å®ƒçš„åŸç†å›¾ï¼š

![ä¼ è¾“åŸç†](/images/JavaSE/18-IOæµ/ä¼ è¾“åŸç†.svg)

å…ˆæ¥å›é¡¾ä¸‹å¼€å§‹æˆ‘ä»¬å¤åˆ¶æ–‡ä»¶çš„æƒ…æ™¯

- å½“æˆ‘ä»¬åªä½¿ç”¨`FileInputStream`å’Œ`FileOutputStream`æ¥è¿›è¡Œæ•°æ®å¤åˆ¶æ—¶ï¼Œæ¯æ¬¡ä»æ•°æ®æºï¼ˆæ–‡ä»¶ï¼‰ä¸­è¯»å–ä¸€ä¸ªå­—èŠ‚ï¼Œç„¶åäº¤ç»™`b`ï¼Œç„¶å`b`å†ç»™`FileOutputStream`å†™å…¥å­˜å‚¨ç›®çš„åœ°ï¼ˆæ–‡ä»¶ä¸­ï¼‰ï¼Œ**æ¯æ­¤å­˜å‚¨ä¸€ä¸ªå­—èŠ‚éœ€è¦è®¿é—®ç¡¬ç›˜ä¸¤æ¬¡**ï¼Œä»¥æ­¤å¾€å¤ç›´è‡³å­˜å‚¨å®Œæ¯•
- å¦‚æœä½¿ç”¨äº†`BufferInputStream`å’Œ`BufferOutPutStream`æ¥åŒ…è£…ä»–ä»¬ï¼ˆä½œä¸ºç¼“å†²åŒºï¼‰ï¼Œ`BufferInputStream`ä¸­è‡ªå¸¦ä¸€ä¸ª8192å¤§å°çš„å­—èŠ‚æ•°ç»„ï¼ˆå¯ä»¥ç¿»çœ‹æºç çœ‹åˆ°ï¼ŒåŒæ—¶åœ¨JDKæ–‡æ¡£ä¸­ä¹Ÿå¯ä»¥å‘ç°ï¼Œä»–æœ‰ä¸€ä¸ªé‡è½½æ„é€ æ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ªintï¼Œè¯¥intçš„å€¼å°†æ›¿æ¢8192ä¸ºç¼“å†²æ•°æ®å¤§å°ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡å¯ä»¥ä»æ•°æ®æºï¼ˆæ–‡ä»¶ï¼‰ä¸­è¯»å–8192ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œç„¶åä¸€ä¸ªä¸€ä¸ªçš„äº¤ç»™`b`ï¼Œç„¶å`b`å­˜å…¥`BuffetOutPutStream`çš„æ•°ç»„ä¸­ï¼Œå¦‚æœ`BufferedOutputStream`ä¸­æ•°æ®å­˜æ”¾çš„æ•°æ®æ»¡äº†ï¼Œå°†ä¼šå°†æ•°æ®å†™å…¥åˆ°æ•°æ®ä¼ è¾“ç»ˆç‚¹ï¼Œç„¶å`BufferInputStream`å†ä»æ–°ä»æ•°æ®æºè¯»å–8192å¤§å°çš„æ•°æ®ï¼Œä»¥æ­¤å¾€å¤ç›´è‡³å­˜å‚¨å®Œæ¯•

å‡è®¾ç°åœ¨è¦å­˜å‚¨ä¸€ä¸ª8kb(8192ä¸ªå­—èŠ‚)å¤§å°çš„æ•°æ®ï¼Œéœ€è¦å¤åˆ¶åˆ°ç»ˆç‚¹

| æ–¹å¼           | å•æ¬¡ä¼ è¾“æµç¨‹                                                                                                                   | è®¿é—®ç¡¬å­˜æ¬¡æ•°                    |
| -------------- | ------------------------------------------------------------------------------------------------------------------------------ | ------------------------------- |
| ä¼ ç»Ÿæ–¹æ³•       | æ¯æ¬¡ä¼ è¾“ä¸€ä¸ªå­—èŠ‚éœ€è¦è®¿é—®ä¸€æ¬¡æ•°æ®æºä¸€æ¬¡æ•°æ®ä¼ è¾“ç»ˆç‚¹<br />å…±è®¿é—®ä¸¤æ¬¡ç¡¬å­˜                                                         | 8x1024x2=16384                  |
| ä½¿ç”¨å¤„ç†æµåŒ…è£… | BufferedInputStreamä¸€æ¬¡å°†æ‰€æœ‰æ•°æ®è¯»å–å®Œæ¯•å­˜å…¥æ•°ç»„ä¸­<br />ç„¶åä¸€ä¸ªä¸€ä¸ªç»™bå†å­˜å…¥BufferedOutputStreamçš„æ•°ç»„<br />æœ€ç»ˆä¸€æ¬¡å­˜å…¥ç¡¬ç›˜ | 2æ¬¡<br />è¯»å–ä¸€æ¬¡<br />å­˜å‚¨ä¸€æ¬¡ |

ä½¿ç”¨`BufferedInputStream`å’Œ`BufferedOutputStream`è™½ç„¶ä¼ è¾“8KBçš„æ•°æ®åªéœ€è¦è®¿é—®2æ¬¡ç¡¬ç›˜ï¼Œä½†æ˜¯åŒæ ·ä¹Ÿéœ€è¦åœ¨å†…å­˜ä¸­ä¸€ä¸ªä¸€ä¸ªçš„è¿›è¡Œè½¬å­˜ï¼Œè¿™æ ·æ„Ÿè§‰ä¸æ˜¯æ²¡ä»€ä¹ˆåŒºåˆ«å—ï¼Ÿ

æ­¤æ—¶å°±æ˜¯è®¡ç®—æœºä¸­æœ€é‡è¦çš„ç‰¹ç‚¹äº†ï¼š

- **å†…å­˜çš„è®¿é—®é€Ÿåº¦ï¼ˆè¿ç®—æ•ˆç‡ï¼‰æ¯”ç¡¬ç›˜çš„è®¿é—®é€Ÿåº¦ï¼ˆè¿ç®—æ•ˆç‡ï¼‰è¦é«˜å¾—å¤šçš„å¤š**
- `BufferedInputStream`å’Œ`BufferedOutputStream`çš„å·¥ä½œåŸºæœ¬éƒ½æ˜¯åœ¨å†…å­˜ä¸­å®Œæˆçš„ï¼Œå¯¹ç¡¬ç›˜çš„æ“ä½œæ¬¡æ•°ååˆ†å°‘ï¼Œè¿™å°±ç›¸å¯¹çš„æé«˜äº†æ•ˆç‡
- ç°åœ¨ä¸¾ä¾‹åªæ˜¯ä»¥8KBä¸ºä¾‹ï¼Œä½¿ç”¨`BufferedInputStream`å’Œ`BufferedOutputStream`å°±èƒ½æ¯”å•ä½¿ç”¨`FileInputStream`å’Œ`FileOutputStream`çš„æ•ˆç‡æé«˜å¾ˆå¤šå¾ˆå¤š
- æˆ‘ä»¬ç°å®ç”Ÿæ´»ä¸­éšä¾¿ä¸€ä¸ªæ–‡ä»¶åŸºæœ¬éƒ½æ˜¯ä»¥MBä¸ºå•ä½æˆ–è€…GBä¸ºå•ä½ï¼Œè¿™æ—¶ä¸¤è€…çš„æ•ˆç‡å°±å¤©å·®åœ°åˆ«äº†ï¼Œæ‰€ä»¥è¿™å°±æ˜¯ä½¿ç”¨`BufferedInputStream`å’Œ`BufferedOutputStream`ä½œä¸ºç¼“å†²åŒºä¼ è¾“çš„åŸå› ã€‚

## å¯¹è±¡æµ-ObjectInputStreamå’ŒObjectOutputStream

å…ˆæ¥çœ‹ä¸€ä¸ªéœ€æ±‚ï¼š

1. å°† `int num =100`è¿™ä¸ªintæ•°æ®ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œæ³¨æ„ä¸æ˜¯100æ•°å­—ï¼Œè€Œæ˜¯ int 100ï¼Œå¹¶ä¸”èƒ½å¤Ÿä»æ–‡ä»¶ä¸­ç›´æ¥æ¢å¤ int 100
2. å°†`Dog dog = new Dog("å°é»„",3)`è¿™ä¸ªdogå¯¹è±¡ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”èƒ½å¤Ÿä»æ–‡ä»¶ä¸­æ¢å¤
3. ä¸Šé¢çš„è¦æ±‚ï¼Œå°±æ˜¯èƒ½å¤Ÿå°†åŸºæœ¬æ•°æ®ç±»å‹æˆ–è€…å¯¹è±¡è¿›è¡Œ**åºåˆ—åŒ–**å’Œ**ååºåˆ—åŒ–**æ“ä½œ

### åºåˆ—åŒ–å’Œååºåˆ—åŒ–

1. åºåˆ—åŒ–å°±æ˜¯åœ¨ä¿å­˜æ•°æ®æ—¶ï¼Œ**ä¿å­˜æ•°æ®çš„å€¼**å’Œ**æ•°æ®ç±»å‹**
2. è¿”åºåˆ—åŒ–å°±æ˜¯åœ¨æ¢å¤æ•°æ®æ—¶ï¼Œ**æ¢å¤æ•°æ®çš„å€¼**å’Œ**æ•°æ®ç±»å‹**
3. éœ€è¦è®©æŸä¸ªå¯¹è±¡æ”¯æŒåºåˆ—åŒ–çš„æœºåˆ¶ï¼Œåˆ™å¿…é¡»è®©å…¶æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œä¸ºäº†è®©æŸä¸ªç±»æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œè¯¥ç±»å¿…é¡»è¦å®ç°å¦‚ä¸‹ä¸¤ä¸ªæ¥å£ä¹‹ä¸€ï¼š
   - ` ` è¿™æ˜¯ä¸€ä¸ªæ ‡è®°æ¥å£ï¼Œæ²¡æœ‰æ–¹æ³•
   - `Externalizable` è¿™ä¸ªæ¥å£æœ‰æ–¹æ³•éœ€è¦å®ç°ï¼Œå› æ­¤ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨`Serializable`

### ObjectOutPutStreamå’ŒObjectInputStreamçš„ç®€å•ä»‹ç»

1. åŠŸèƒ½ï¼šæä¾›äº†å¯¹åŸºæœ¬ç±»å‹æˆ–å¯¹è±¡ç±»å‹çš„åºåˆ—åŒ–å’Œååºåˆ—åŒ–åŠŸèƒ½
2. `ObjectOutputStream`æä¾› **åºåˆ—åŒ–**åŠŸèƒ½
3. `ObjectInputStream`æä¾› **ååºåˆ—åŒ–**åŠŸèƒ½
4. å‡ä¸ºå¤„ç†/åŒ…è£…æµï¼Œå› æ­¤éœ€è¦ä¼ å…¥`InputStream`å’Œ`OutputStream`

> ç®€å•æ¼”ç¤º

åºåˆ—åŒ–å¹¶å­˜å…¥æ–‡ä»¶

```java
package com.outputStream_;

import org.junit.jupiter.api.Test;

import java.io.*;

public class testobjectoutputStream_ {
    @Test
    public void saveObj() throws IOException {
//        åºåˆ—åŒ–åï¼Œä¿å­˜çš„æ–‡ä»¶æ ¼å¼ä¸æ˜¯çº¯æ–‡æœ¬ï¼Œè€Œæ˜¯æŒ‰ç…§å®ƒçš„æ ¼å¼æ¥ä¿å­˜
        String filename = "d:/data.txt"; //åç¼€éšæ„ï¼Œä¸€èˆ¬æ˜¯dat
        ObjectOutputStream outputStream = new ObjectOutputStream(new FileOutputStream(filename));

//        åºåˆ—åŒ–æ•°æ®åˆ°d:/data.txt
        outputStream.writeInt(999);//intåœ¨åº•å±‚ä¼šè‡ªåŠ¨è£…ç®±ï¼ŒåŒæ—¶Integerå®ç°äº†Serializableæ¥å£
        outputStream.writeBoolean(true); //å…¶ä»–åŸºæœ¬ç±»å‹åŒç† å»ºè®®æ˜¯æŒ‰ç…§è¿™ç§æŒ‡å®šæ•°æ®ç±»å‹çš„å­˜æ”¾
        outputStream.writeChar('a');
        outputStream.writeDouble(155.3333);
        outputStream.writeFloat(9.5f);
//        åˆ‡è®°ï¼šä½¿ç”¨outPutStreamä¸èƒ½ç›´æ¥write()
//        å› ä¸ºwrite()å¹¶æ²¡æœ‰è¡¨ç¤ºä»»ä½•æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚write(100) ä»…ä»…æ˜¯å­˜æ”¾äº†ä¸ª100ï¼Œè€Œä¸æ˜¯int 100


        outputStream.writeUTF("Hello World"); //æ”¾å­—ç¬¦ä¸²æ˜¯UTF Stringä¹Ÿæ˜¯å®ç°äº†Serializableæ¥å£
//        ä¿å­˜ä¸€ä¸ªDog
        outputStream.writeObject(new Dog("æ—ºè´¢", 10));
//        å¦‚æœDogæ²¡æœ‰å®ç°åºåˆ—åŒ–æ¥å£ï¼Œè¿è¡Œæ—¶ä¼šæŠ›å‡ºï¼šjava.io.NotSerializableException: com.outputStream_.Dog
//        è¯¥ç±»å› ä¸ºæ²¡æœ‰å®ç°Serializableæ¥å£ï¼Œæ‰€ä»¥ä¸èƒ½è¢«åºåˆ—åŒ– è€Œå¯¼è‡´çš„å¼‚å¸¸

        outputStream.close();
        System.out.println("æ•°æ®ä¿å­˜å®Œæ¯•ï¼ˆåºåˆ—åŒ–å½¢å¼ï¼‰");

    }
}

//åªéœ€è¦å®ç°è¿™ä¸ªå€Ÿå£å³å¯ï¼Œå¹¶ä¸éœ€è¦é¢å¤–çš„å»åšä»»ä½•äº‹æƒ…
//ä¸€èˆ¬æƒ…å†µä¸‹æ¥è¯´ï¼Œéœ€è¦åºåˆ—åŒ–çš„ç±»éƒ½æ˜¯publicç±»ï¼Œç­‰ä¸‹è¯»å–çš„æ—¶å€™ä¼šè¯´åˆ°
class Dog implements Serializable {
    private String name;
    private int age;

    public Dog(String name, int age) {
        this.name = name;
        this.age = age;
    }
    @Override
    public String toString() {
        return "Dog{" +
                "name='" + name + '\'' +
                ", age=" + age +
                '}';
    }
}

```

> è¯»å–

```java
@Test
public void runDataForObject() throws IOException, ClassNotFoundException {
    //        ååºåˆ—åŒ–çš„æ–‡ä»¶
    String filename = "d:/data.txt";
    ObjectInputStream objectInputStream = new ObjectInputStream(new FileInputStream(filename));

    //        è¯»å–
    //        è¯»å–ï¼ˆååºåˆ—åŒ–ï¼‰çš„é¡ºåºä¸€å®šè¦å’Œä¿å­˜æ•°æ®ï¼ˆåºåˆ—åŒ–ï¼‰çš„å­˜æ”¾çš„é¡ºåºä¸€è‡´
    //        å¦åˆ™å°±ä¼šå‡ºç°å¼‚å¸¸
    System.out.println(objectInputStream.readInt());
    System.out.println(objectInputStream.readBoolean());
    System.out.println(objectInputStream.readChar());
    System.out.println(objectInputStream.readDouble());
    System.out.println(objectInputStream.readFloat());
    System.out.println(objectInputStream.readUTF());

    Object readObject = objectInputStream.readObject();//ClassNotFoundExceptionå¯èƒ½ä¼šæŠ›å‡ºè¿™ä¸ªå¼‚å¸¸

    System.out.println(readObject); //Dog{name='æ—ºè´¢', age=10}
    System.out.println(readObject.getClass()); //class com.outputStream_.Dog

    //        è¿™é‡Œæœ‰ç‰¹åˆ«é‡è¦çš„ç»†èŠ‚
    //        å¦‚æœæˆ‘ä»¬å¸Œæœ›è°ƒç”¨Dogçš„æ–¹æ³•ï¼Œæ¯”å¦‚getName
    //        é‚£ä¹ˆå°±è¦è¿›è¡Œå‘ä¸‹è½¬å‹((Dog) readObject).getName();
    //       é‚£ä¹ˆ ä¸€å®šè¦å°†DogåŒ…è®¾ç½®ä¸ºå…±æœ‰ public æˆ–è€…æ‹·è´åˆ°è·Ÿè¿™ä¸ªåŒ…å¤„äºç›¸åŒçš„ç›®å½•ä¹‹ä¸‹ï¼ˆç¼–è¯‘åç›®å½•ï¼‰ æ€»ä¹‹ï¼Œè¦è¿™é‡Œèƒ½å¤Ÿå¼•ç”¨åˆ°
    //        å½“ç„¶ä¸Šé¢è¿™ä¸ªåªæ˜¯å°é—®é¢˜ï¼Œåº”è¯¥å¯ä»¥é€šè¿‡import çš„æ–¹å¼æ¥è§£å†³
    //        å…¶æ¬¡è¿™ä¸ªæ‰æ˜¯é‡è¦çš„é—®é¢˜ï¼š
    //        åœ¨åºåˆ—åŒ–çš„æ—¶å€™ï¼Œå¯ä»¥ç†è§£ä¸ºåº•å±‚ä¼šæ ¹æ®è¿™ä¸ªDogç±»ä¸­çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•åŠå…¶å†…å®¹ç”Ÿæˆä¸€ä¸ªåºåˆ—åŒ–ID
    //        ç„¶åæˆ‘åœ¨ç»™ä»–åºåˆ—åŒ–å¹¶å­˜æ”¾åˆ°æ–‡ä»¶çš„æ—¶å€™
    //        å¹¶æ²¡æœ‰ç»™Dogè®¾ç½®GetNameæ–¹æ³•
    //        å‡è®¾è¿™ä¸ªæ—¶å€™Dogçš„åºåˆ—åŒ–IDæ˜¯:123456789
    //        ç„¶åæˆ‘æˆ‘ç°åœ¨ç»™DogåŠ äº†ä¸ªgetName,é‚£ä¹ˆå®ƒçš„åºåˆ—åŒ–IDä¹Ÿä¼šè¿›è¡Œç›¸åº”çš„æ”¹å˜ï¼šæ¯”å¦‚å˜æˆäº†é«˜987654321
    //        ç›¸å½“äºæ˜¯ç‰ˆæœ¬å·ä¸ç¬¦
    //        å½“æˆ‘ä»¬å°è¯•å‘ä¸‹è½¬å‹çš„æ—¶å€™ï¼Œç³»ç»Ÿå°±ä¼šå¯¹æ¯”ä»–ä»¬çš„åºåˆ—åŒ–IDï¼Œå¦‚æœä¸ç›¸åŒï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸
    //        java.io.InvalidClassException: com.outputStream_.Dog;
    //        local class incompatible: stream classdesc serialVersionUID = -6349792222849284547,
    //        local class serialVersionUID = -7229961481147053677
    //        æ‰€ä»¥åœ¨æ›´æ”¹äº†Dogçš„æ–¹æ³•ã€å±æ€§åï¼Œéœ€è¦é‡æ–°åºåˆ—åŒ–ä¿å­˜å†è¯»å–ï¼Œå³å¯è§£å†³é—®é¢˜

    Dog dog = (Dog) readObject;
    System.out.println(dog.getName());


    //        å…³é—­æµ
    objectInputStream.close();

}
```

### å¯¹è±¡è¯»å†™æµåŠåºåˆ—åŒ–çš„æ³¨æ„äº‹é¡¹å’Œä½¿ç”¨ç»†èŠ‚

1. è¯»å†™é¡ºåºè¦ä¸€è‡´

2. è¦æ±‚å®ç°åºåˆ—åŒ–æˆ–ååºåˆ—åŒ–å¯¹è±¡ï¼Œéœ€è¦å®ç°`Serializable` 

3. åºåˆ—åŒ–çš„ç±»ä¸­å»ºè®®æ·»åŠ `SerializableUID`ï¼Œä¸ºäº†æé«˜ç‰ˆæœ¬çš„å…¼å®¹æ€§

   ```java
   class Dog implements Serializable {
       private String name;
       private int age;
       //    serialVersionUID åºåˆ—åŒ–çš„ç‰ˆæœ¬å·ï¼Œå¯ä»¥æé«˜åºåˆ—åŒ–çš„å…¼å®¹æ€§
   //    åŠ äº†è¿™ä¸ªåï¼Œå½“æˆ‘ä»¬åºåˆ—åŒ–å®Œæ¯•æ—¶ï¼Œå†ç»™Dogæ·»åŠ å±æ€§ï¼Œå¦‚ï¼š    public int hobby = 123;
   //    å†è¿›è¡Œååºåˆ—åŒ–ï¼Œå°†ä¸ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œæ˜¯è¿”å›è¯¥ç±»å‹çš„é»˜è®¤å€¼0/nullç­‰
   //    ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŠ äº†è¿™ä¸ªï¼Œå°±ç›¸å½“äºè®©ä»–ä»¬å¯¹æ¯”çš„æ—¶å€™ï¼Œä¸ä¼šè®¤ä¸ºæˆ‘åé¢ä¿®æ”¹çš„è¿™ä¸ªDogæ˜¯ä¸€ä¸ªæ–°çš„å¯¹è±¡
   //    è€Œæ˜¯å°†å®ƒè®¤ä¸ºæ˜¯æˆ‘ä¹‹å‰è¿™ä¸ªDogçš„æ‰©å……ç‰ˆ-é«˜çº§ç‰ˆ
       private static final long serialVersionUID = 1L;
       public int hobby = 123;
       
       ......
   }
   ```

4. åºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œé»˜è®¤å°†é‡Œé¢æ‰€æœ‰å±æ€§éƒ½è¿›è¡Œäº†åºåˆ—åŒ–ï¼Œä½†`static`å’Œ`transienet`ä¿®é¥°çš„æˆå‘˜ä¸ä¼šè¢«åºåˆ—åŒ–ï¼ˆæ”¾å¼ƒå¯¹è¿™ä¸ªå€¼çš„åºåˆ—åŒ–ï¼Œæœ€ç»ˆååºåˆ—åŒ–çš„æ—¶å€™å°†æ²¡æœ‰è¿™ä¸ªä¿¡æ¯-->è¿”å›è¿™ä¸ª`static`åœ¨Dogç±»ä¸­çš„å€¼ã€`transienet`æ‰€å±ç±»å‹çš„é»˜è®¤å€¼`0/null`ï¼‰

   - `transienet`çŸ­æš‚çš„ è½¬ç¬å³é€çš„ ä¸å¯è¢«åºåˆ—åŒ–çš„ï¼š

   - æ¯”æ–¹è¯´æˆ‘åœ¨Dogç±»ä¸­æ·»åŠ äº†ä¸¤ä¸ªå±æ€§

     ```java
     public static String Blob = "Hello World";
     public transient String color;
     ```

   - ç„¶åæ„é€ å‡½æ•°ä»€ä¹ˆæ­£å¸¸èµ°ï¼Œç„¶ååºåˆ—åŒ–ï¼Œåºåˆ—åŒ–å®Œæ¯•åæˆ‘å°†Blobçš„å€¼æ›¿æ¢æˆäº†"HHH"

   - é‚£ä¹ˆååºåˆ—åŒ–çš„åçš„è¾“å‡ºç»“æœä¸ºï¼š

     - toString()ï¼šDog{name='æ—ºè´¢', age=10, hobby=123, color='null'}
     - Blobï¼šHHH

5. åºåˆ—åŒ–å¯¹è±¡æ—¶ï¼Œè¦æ±‚é‡Œé¢å±æ€§çš„ç±»å‹ä¹Ÿéœ€è¦å®ç°åºåˆ—åŒ–æ¥å£

   - æ¯”æ–¹è¯´æˆ‘åœ¨Dogä¸­æ·»åŠ ä¸€ä¸ªå±æ€§`Master master =new Master()`
   - ä½†æ˜¯æˆ‘çš„Masterç±»å¹¶æ²¡æœ‰å®ç°`Serializable`æ¥å£
   - é‚£ä¹ˆåºåˆ—åŒ–çš„æ—¶å€™å°†ä¼šæŠ¥é”™ï¼Œæ‰€ä»¥å®é™…ä½¿ç”¨çš„æ—¶å€™`Master`ä¹Ÿéœ€è¦è¿›è¡Œåºåˆ—åŒ–ï¼ˆå®ç°`Serializable`æ¥å£ï¼‰

6. åºåˆ—åŒ–å…·å¤‡å¯ç»§æ‰¿æ€§ï¼Œä¹Ÿå°±æ˜¯å¦‚æœæŸç±»å·²ç»å®ç°äº†åºåˆ—åŒ–ï¼Œåˆ™å®ƒçš„æ‰€æœ‰å­ç±»ä¹Ÿå·²é»˜è®¤å®ç°äº†åºåˆ—åŒ–

   - å°±æ¯”å¦‚çœ‹çœ‹`Integer`ï¼Œå®ƒç»§æ‰¿è‡ª`Number` ,`Number`å®ç°äº†åºåˆ—åŒ–æ¥å£`Serializable`ï¼Œæ‰€ä»¥`Integer`ä¹Ÿå®ç°äº†è¯¥æ¥å£

## æ ‡å‡†è¾“å…¥è¾“å‡ºæµ

è¿™ç©æ„åœ¨æˆ‘ä»¬çš„å¼€å‘ä¸­ç”¨çš„è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ã€‚æ¯”å¦‚ä¸€ä¸ªå¾ˆä¹…å‰å°±å¼€å§‹ä½¿ç”¨çš„ï¼š`System.in`ï¼Œä»¥åŠå¤©å¤©éƒ½åœ¨ç”¨çš„`System.out.println()`

|                     |  ç¼–è¯‘ç±»å‹   |     è¿è¡Œç±»å‹      | é»˜è®¤è®¾å¤‡ |
| :-----------------: | :---------: | :---------------: | :------: |
| System.in æ ‡å‡†è¾“å…¥  | InputStream | BufferInputStream |   é”®ç›˜   |
| System.out æ ‡å‡†è¾“å‡º | PrintStream |    PrintStream    |  æ˜¾ç¤ºå™¨  |

- ä¼ ç»Ÿæ–¹æ³•`System.out.println()`å°±æ˜¯ä½¿ç”¨outå°†å¯¹è±¡è¾“å‡ºåˆ°æ˜¾ç¤ºå™¨
- ä¼ ç»Ÿæ–¹æ³•`Scanner`æ˜¯ä»æ ‡å‡†è¾“å…¥ é”®ç›˜æ¥æ”¶æ•°æ®

## è½¬æ¢æµ-InputStreamReaderå’ŒOutputStreamWriter

æ¥ä¸‹æ¥å…ˆæ”¾ä¸€ä¸ªç®€å•çš„è¯»å–æ–‡æœ¬çš„ä»£ç :

```java
@Test
public void testQuestion() throws IOException {
    BufferedReader reader = new BufferedReader(new FileReader("D:/a.txt"));
    String s = reader.readLine();
    System.out.println("æ¥æ”¶åˆ°çš„å†…å®¹"+s);
    reader.close();
}
```

æ–‡æœ¬å†…å®¹æ˜¯ï¼šHello Fiance ä¸–ç•Œä½ å¥½ 

æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¯»å–å‡ºçš„ç»“æœæ˜¯æ²¡é—®é¢˜çš„ï¼Œå› ä¸ºæ–‡æœ¬æ–‡æ¡£é»˜è®¤æ˜¯é‡‡ç”¨äº†UTF-8çš„ç¼–ç 

ä½†æ˜¯æˆ‘åä¸ï¼Œæˆ‘é‡æ–°ä¿å­˜äº†ä¸‹æ–‡ä»¶ï¼Œå°†ç¼–ç è®¾ç½®ä¸ºASNIï¼ˆå›½æ ‡ç ï¼Œæ ¹æ®ç³»ç»Ÿå†³å®šï¼Œå…·ä½“å¯ä»¥çœ‹[è¿™ç¯‡æ–‡æ¡£](https://blog.csdn.net/imxiangzi/article/details/77370160)ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè®¾ç½®ä¸ºä¸­æ–‡çš„ç”µè„‘å›½æ ‡ç æŒ‡å‘GBKç¼–ç ï¼‰

![image-20211114235905170](/images/JavaSE/18-IOæµ/image-20211114235905170.png)

è¿™æ—¶å€™å†å»è¯»å–ï¼š

```md
æ¥æ”¶åˆ°çš„å†…å®¹Hello Fiance ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½
```

å“¦è± å‡ºç°äº†ä¹±ç 

ä¹Ÿå°±æ˜¯è¯´ï¼Œå½’æ ¹ç»“åº•å‡ºç°é—®é¢˜æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰å»æŒ‡å®šè¯»å–è¿™ä¸ªæ–‡ä»¶çš„ç¼–ç æ–¹å¼ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å»æŒ‡å®šæ–¹å¼çš„è¯ï¼Œå°±èƒ½è½»æ¾çš„è§£å†³è¿™ä¸ªé—®é¢˜äº†ï¼Œè¿™æ—¶å€™å°±è¦ç”¨åˆ°æˆ‘ä»¬çš„**è½¬æ¢æµ**äº†

### åŸºæœ¬ä»‹ç»åŠä½¿ç”¨

1. `InputStreamReader` Readerçš„å­ç±»ï¼Œå¯ä»¥å°†`InputStream`(å­—èŠ‚æµ)åŒ…è£…æˆ`Reader`ï¼ˆå­—ç¬¦æµï¼‰
2. `OutputStreamWriter`Writerçš„å­ç±»ï¼Œå¯ä»¥å°†`OutputStream`(å­—èŠ‚æµ)åŒ…è£…æˆ`Reader`ï¼ˆå­—ç¬¦æµï¼‰
3. å½“å¤„ç†çº¯æ–‡æœ¬æ•°æ®æ—¶ï¼Œå¦‚æœä½¿ç”¨å­—ç¬¦æµæ•ˆç‡æ›´é«˜ï¼Œå¹¶ä¸”å¯ä»¥æœ‰æ•ˆçš„è§£å†³ä¸­æ–‡é—®é¢˜ï¼Œæ‰€ä»¥å»ºè®®å°†å­—èŠ‚æµè½¬æ¢æˆå­—ç¬¦æµ
4. å¯ä»¥åœ¨ä½¿ç”¨æŒ‡å®šç¼–ç æ ¼å¼ï¼ˆå¦‚:UTF-8ã€GBKã€GB2312ã€ISO-8859-1ç­‰ï¼‰

> åº”ç”¨æ¡ˆä¾‹

å°†å­—èŠ‚æµåŒ…è£…æˆInputStreamReaderï¼Œå¯¹æ–‡ä»¶è¿›è¡Œè¯»å–ï¼ˆæŒ‰ç…§utf-8,gbkæ ¼å¼ï¼‰ï¼Œè¿›è€ŒåŒ…è£…æˆBufferedReader

çœ‹ç€æœ‰ç‚¹ç»•ï¼Œä½†æ˜¯å®é™…ä¸Šç”¨èµ·æ¥å¹¶ä¸éš¾..

```java
@Test
public void testQuestion() throws IOException {
    //        æŠŠnew FileInputStream("d:/a.txt")è½¬æ¢æˆäº†InputStreamReader åŒæ—¶æŒ‡å®šäº†ç¼–ç 
    InputStreamReader inputStreamReader = 
        new InputStreamReader(new FileInputStream("d:/a.txt"), "gbk");
    //        æŠŠinputSteamReaderä¼ å…¥BufferReaderæ¥å»è¯»å–æ–‡æœ¬å†…å®¹
    //        ç›¸å½“äºåŒ…è£…äº†ä¸¤æ¬¡
    BufferedReader reader = new BufferedReader(inputStreamReader);
    System.out.println("è¯»å–åˆ°çš„å†…å®¹" + reader.readLine());
    reader.close();
}
// è¯»å–åˆ°çš„å†…å®¹Hello Fiance ä¸–ç•Œä½ å¥½
// å…¶å®åƒä¸Šé¢é‚£æ ·å†™æ˜¯æœ‰ç‚¹å•°å—¦çš„ï¼Œæ­£å¸¸çš„ç¨‹åºå‘˜å®é™…é¡¹ç›®ä¸­ä¸€èˆ¬éƒ½æ˜¯ åˆåœ¨ä¸€èµ·å†™ï¼š
reader = new BufferedReader(new InputStreamReader(new FileInputStream("d:/a.txt"), "gbk"));
```

> æŒ‡å®šå†™å…¥ç¼–ç ï¼š

```java
@Test
public void testWriter() throws IOException {
    //        æŒ‡å®šGBKå†™å…¥
    String str = "æµ‹è¯•ä¸€ä¸‹ï¼Œä»¥GBKæ–¹å¼å†™å…¥æµï¼Œæ˜¯ä»€ä¹ˆæ ·çš„æ•ˆæœğŸ‰ğŸğŸğŸ"; //GBKå­˜ä¸äº†è¿™ç§è¡¨æƒ…
    BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(new FileOutputStream("d:/aaa.txt"), "gbk"));
    writer.write(str);
    writer.close();
    System.out.println("å†™å…¥å®Œæ¯•");
}
//æµ‹è¯•ä¸€ä¸‹ï¼Œä»¥GBKæ–¹å¼å†™å…¥æµï¼Œæ˜¯ä»€ä¹ˆæ ·çš„æ•ˆæœ????
```

## æ‰“å°æµ-PrintStreamå’ŒPrintWriter

æ‰“å°æµåªæœ‰è¾“å‡ºæµï¼Œæ²¡æœ‰è¾“å…¥æµ

`PrintStream`**å­—èŠ‚æ‰“å°æµ**ç›´æ¥çˆ¶ç±»ï¼š`FilterOutputStream` ï¼Œå±äº`OutputStream`ï¼Œ[ä¸­æ–‡æ–‡æ¡£](https://www.matools.com/file/manual/jdk_api_1.8_google/java/io/PrintStream.html)

`PrintWriter`**å­—ç¬¦æ‰“å°æµ**ç›´æ¥çˆ¶ç±»ï¼š`Writer`ï¼Œ[ä¸­æ–‡æ–‡æ¡£](https://www.matools.com/file/manual/jdk_api_1.8_google/java/io/PrintWriter.html)

æ¥ä¸‹æ¥ç®€å•æ¼”ç¤ºä¸‹æ€ä¹ˆç”¨ï¼š

å­—èŠ‚æ‰“å°æµï¼š

```java
    /**
     * æ¼”ç¤ºPrintStream(å­—èŠ‚æ‰“å°æµ)
     */
@Test
public void printTest1() throws IOException {

    //        System.outå°±æ˜¯ä¸€ä¸ªå­—èŠ‚æ‰“å°æµ-PrintStream
    PrintStream out = System.out;
    //        åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒPrintStreamæ•°æ®çš„è¾“å‡ºä½ç½®æ—¶ æ ‡å‡†è¾“å‡º å³ï¼šæ˜¾ç¤ºå™¨ï¼ˆæ§åˆ¶å°ï¼‰
    out.print("hello world");
    //        å› ä¸ºprintçš„åº•å±‚æ˜¯writeæ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨è¿™ä¸ªwriteæ–¹æ³•æ¥è¿›è¡Œæ‰“å°
    out.write("ä¸–ç•Œä½ å¥½".getBytes(StandardCharsets.UTF_8));
    //        è¿™ä¸¤ä¸ªæ–¹æ³•æœ¬è´¨ä¸Šæ˜¯ä¸€æ ·çš„

    out.close();
    //        æˆ‘ä»¬ä¹Ÿå¯ä»¥å»ä¿®æ”¹æ‰“å°è¾“å‡ºæµçš„ä½ç½®ã€è®¾å¤‡
    //        å¯ä»¥é€šè¿‡ä¿®æ”¹æ‰“å°æµçš„setæ–¹æ³•æ¥è¿›è¡Œè®¾ç½®
    //        ä¿®æ”¹åˆ°d:/f1.txt
    System.setOut(new PrintStream("d:/f1.txt"));
    /*        public static void setOut(PrintStream out) {
            checkIO();
            setOut0(out);
            çœ‹åˆ°è¿™ä¸ªç†Ÿæ‚‰çš„0äº†å—ï¼Œæ²¡é”™ä»–ä¹Ÿæ˜¯ä¸ªnativeæ–¹æ³•ï¼Œä¿®æ”¹äº†out
        }*/

    //        é±¼è·ƒæ­¤æ—¶æµ·ï¼ŒèŠ±å¼€å½¼å²¸å¤© è¿™å±€è¯å°†ä¼šè¢«æ‰“å°åœ¨æ–‡ä»¶d:/f1.txtä¸­
    System.out.println("é±¼è·ƒæ­¤æ—¶æµ·ï¼ŒèŠ±å¼€å½¼å²¸å¤©");

}
```

## Propertiesç±»

ä¹‹å‰åœ¨é›†åˆç±»ä¸­æåˆ°è¿‡è¿™ä¸ªç±»ï¼Œå¯ä»¥é€šè¿‡å®ƒæ¥è½»æ¾çš„è¯»å–é…ç½®æ–‡ä»¶å’Œå†™å…¥é…ç½®æ–‡ä»¶

åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œå…ˆçœ‹ä¸€ä¸ªéœ€æ±‚ï¼š

æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶`mysql.properties`

ip=localhost

port=3306

user=root

password=123456

ä½¿ç”¨ç¼–ç¨‹è¯»å†™è¿™äº›å€¼

![image-20211115114236906](/images/JavaSE/18-IOæµ/image-20211115114236906.png)

å¦‚æœä¸ç”¨Propertiesçš„è¯ï¼Œå°±å¾—è¿™æ ·ï¼š

```java
    @Test
public void traditional() throws IOException {
    //        ä½¿ç”¨ä¼ ç»Ÿçš„æ–¹æ³•æ¥è¯»å–
    BufferedReader reader = new BufferedReader(new FileReader("src/mysql.properties"));
    //        å¾ªç¯çš„è¯»å–
    String line = null;
    while ((line = reader.readLine()) != null) { //å¾ªç¯è¯»å–
        //            System.out.println(line);
        //            æ‹†åˆ†å­—ç¬¦ä¸²
        String[] split = line.split("=");
        System.out.println(split[0] + "çš„å€¼æ˜¯ï¼š" + split[1]);
        //            è™½ç„¶æ˜¯å¯ä»¥è¯»å–çš„ï¼Œä½†æ˜¯ç”¨èµ·æ¥è¿˜æ˜¯æœ‰ç‚¹éº»çƒ¦ï¼Œå¹¶ä¸”å¦‚æœæƒ³è¦ä¿®æ”¹çš„è¯è¿˜æ›´éº»çƒ¦ã€‚ã€‚
        //            è€Œä¸”å¦‚æœè¦æ±‚æŒ‡å®šå¾—åˆ°ip å°±å¾—åŠ ä¸ªif("ip".equalsï¼ˆsplit[0]ï¼‰){....}
    }
    reader.close();
}
```

### Propertiesçš„ä½¿ç”¨

å®ƒæ˜¯ä¸“é—¨ç”¨äºè¯»å†™é…ç½®æ–‡ä»¶çš„é›†åˆç±»

é…ç½®æ–‡ä»¶çš„æ ¼å¼ï¼š

key=value

key=value

é”®å€¼å¯¹ä¸éœ€è¦æœ‰ç©ºæ ¼ï¼Œå€¼ä¸éœ€è¦ç”¨å¼•å·ï¼Œé»˜è®¤ç±»å‹æ˜¯String

å¸¸ç”¨æ–¹æ³•ï¼š

- `load` åŠ è½½é…ç½®æ–‡ä»¶çš„é”®å€¼å¯¹åˆ°Propertieså¯¹è±¡
- `list`å°†æ•°æ®æ˜¾ç¤ºåˆ°æŒ‡å®šè®¾å¤‡
- `getProperty(key)` æ ¹æ®é”®è·å–å€¼
- `setProperty(key,value)` è®¾ç½®é”®å€¼å¯¹åˆ°Propertieså¯¹è±¡
- `store`å°†Propertiesé”®å€¼å¯¹ä¿å­˜åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œåœ¨Ideaä¸­ï¼Œä¿å­˜ä¿¡æ¯çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚æœå«æœ‰ä¸­æ–‡ï¼Œå°†ä¼šå­˜å‚¨ä¸ºunicodeç 

> ä½¿ç”¨Propertieså®Œæˆå¯¹mysql.propertiesçš„è¯»å–

```java
    /**
     * è¯»å–
     * @throws IOException IOå¼‚å¸¸
     */
@Test
public void read() throws IOException {
    //        ä½¿ç”¨Propertiesç±» æ¥è¯»å– mysql.propertiesæ–‡ä»¶
    //        1 åˆ›å»ºPropertieså¯¹è±¡
    Properties properties = new Properties();
    //        2 åŠ è½½æŒ‡å®šçš„é…ç½®æ–‡ä»¶
    properties.load(new FileReader("src/mysql.properties"));
    //        3 æŠŠk-væ˜¾ç¤ºåˆ°æ§åˆ¶å°
    properties.list(System.out);

    //        4 æ ¹æ®key è·å–å¯¹åº”çš„value
    System.out.println("Loginçš„ç”¨æˆ·ï¼š" + properties.getProperty("user"));
    System.out.println("PassWordï¼š" + properties.getProperty("password"));
}
```

> ä¿®æ”¹ åˆ›å»º

```java
@Test
public void createAndUpdate() throws IOException {
    Properties properties = new Properties();
    //        åˆ›å»º é”®å€¼å¯¹
    //        å¦‚æœè¯¥æ–‡ä»¶æ²¡æœ‰key å°±æ˜¯åˆ›å»º å¦‚æœæœ‰è¯¥key å°±æ˜¯ä¿®æ”¹å…¶å€¼
    //        Prpertiesçš„çˆ¶ç±»æ˜¯HashTable ï¼Œåº•å±‚å°±æ˜¯HashTable
    //        æ ¸å¿ƒæ–¹æ³•ï¼š
    /*        public synchronized V put (K key, V value){
            // Make sure the value is not null
            if (value == null) {
                throw new NullPointerException();
            }

            // Makes sure the key is not already in the hashtable.
            Hashtable.Entry<?, ?> tab[] = table;
            int hash = key.hashCode();
            int index = (hash & 0x7FFFFFFF) % tab.length;
            @SuppressWarnings("unchecked")
            Hashtable.Entry<K, V> entry = (Hashtable.Entry<K, V>) tab[index];
            for (; entry != null; entry = entry.next) {
                if ((entry.hash == hash) && entry.key.equals(key)) {
                    V old = entry.value;
                    entry.value = value; å¦‚æœè¿™ä¸ªkeyå­˜åœ¨ï¼Œå°±æ›¿æ¢
                    return old;
                }
            }

            addEntry(hash, key, value, index); å¦‚æœæ˜¯æ–°çš„keyï¼Œå°±add
            return null;
        }*/
    properties.setProperty("charset", "utf-8");
    properties.setProperty("user", "æ±¤å§†"); //æ³¨æ„ä¿å­˜æ—¶ï¼Œæ˜¯ä¸­æ–‡çš„Unicodeç 
    properties.setProperty("pwd", "65165156156165fsdf");
    //        å°†kvå­˜å‚¨åˆ°æ–‡ä»¶ä¸­  ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ³¨é‡Šï¼ˆå¤´æ³¨é‡Šï¼‰ ä¼ nullå°±ä¸ä¼šæœ‰æ³¨é‡Š ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ç›´æ¥ä¼ null
    properties.store(new FileOutputStream("src/mysql2.properties"), "æ±¤å§†");

    System.out.println("ä¿å­˜é…ç½®æ–‡ä»¶æˆåŠŸï¼");

}
```

### æ‰©å±•-å°ç»ƒ

1. HomeWork01.java

   1. åœ¨dç›˜ä¸‹æŸ¥çœ‹æ˜¯å¦æœ‰æ–‡ä»¶å¤¹mytempï¼Œå¦‚æœæ²¡æœ‰å°±åˆ›å»ºï¼Œmytemp
   2. åœ¨d:/mytempç›®å½•ä¸‹ï¼Œåˆ›å»ºæ–‡ä»¶hello.txt
   3. å¦‚æœhello.txtå·²å­˜åœ¨ï¼Œå°±æç¤ºè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œä¸é‡å¤åˆ›å»º

   ```java
   @Test
   public void home1() throws IOException {
       File file = new File("d:/temp");
       if (file.exists()) {
           File file1 = new File(file, "hello.txt");
           if (file1.exists()) {
               System.out.println("hello.txtå·²ç»å­˜åœ¨ï¼Œä¸é‡å¤åˆ›å»º");
           } else {
               if (file1.createNewFile()) {
                   System.out.println("hello.txtåˆ›å»ºæˆåŠŸ");
               }
           }
       } else {
           System.out.println("æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œæ­£åœ¨åˆ›å»º....");
           file.mkdir();
           System.out.println("æ–‡ä»¶å¤¹åˆ›å»ºæˆåŠŸ");
           home1();
       }
   }
   ```

2. HomeWork02.java

   1. ä½¿ç”¨BufferedReaderè¯»å–ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œä¸ºæ¯è¡Œæ·»åŠ ä¸Šè¡Œå·ï¼Œå†è¿åŒå†…å®¹ä¸€å¹¶è¾“å‡ºåˆ°å±å¹•ä¸Š

   ```java
   @Test
   public void home2() throws IOException {
       String filepath = "D:\\WebProject\\02 DOM\\js/reloadImg.js";
       BufferedReader reader = new BufferedReader(new FileReader(filepath));
       String str = null;
       int count = 0;
       while ((str = reader.readLine()) != null) {
           System.out.printf("ç¬¬%sè¡Œçš„å†…å®¹ä¸º:%s\n", ++count, str);
       }
       reader.close();
       System.out.println("æ–‡ä»¶è¯»å–å®Œæ¯•ï¼ŒOver");
   }
   ```

3. HomeWork03.java

   1. ç¼–å†™ä¸€ä¸ªdog.propertiesåœ¨srcç›®å½•ä¸‹
      1. name age color ä¸‰ä¸ªå­—æ®µ
   2. ç¼–å†™Dogç±»ï¼Œæ„é€ æ–¹æ³•ä¸ºä¸Šé¢ä¸‰ä¸ªå­—æ®µï¼Œç„¶ååˆ›å»ºä¸€ä¸ªDogå¯¹è±¡ï¼Œè¯»å–dog.propertiesç”¨ç›¸åº”çš„å†…å®¹å®Œæˆå±æ€§åˆå§‹åŒ–ï¼Œå¹¶è¾“å‡º

   ```java
   @Test
   public void home3() throws IOException {
       Properties writerFile = new Properties();
       writerFile.setProperty("name", "tom");
       writerFile.setProperty("age", "5");
       writerFile.setProperty("color", "red");
       writerFile.store(new FileWriter("src/dog.properties"), "TomDog");
       System.out.println("å­˜å‚¨å®Œæ¯•ï¼Œæ­£åœ¨è¯»å–å¹¶åˆ›å»ºDogå¯¹è±¡");
       //        è¯»å–ï¼š
       Properties readerFile = new Properties();
       readerFile.load(new FileReader("src/dog.properties"));
       String name = readerFile.getProperty("name");
       int age = Integer.parseInt(readerFile.getProperty("age"));
       String color = readerFile.getProperty("color");
       Dog dog = new Dog(name, age, color);
       System.out.println("è¯»å–å®Œæ¯•ï¼Œæ‰“å°Dogå¯¹è±¡");
       System.out.println(dog);
   
   }
   ```

   





